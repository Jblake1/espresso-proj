import{t as k,a as y,d as ze}from"../chunks/CBSBxhCm.js";import"../chunks/DbMJBHzy.js";import{X as ke,N as Ge,Y as Be,Q as r,T as t,V as l,g as e,R as o,U as n,_ as R,G as Ne,aw as Oe,a3 as Ce,W as Je}from"../chunks/C8TPyCW6.js";import{d as Fe,s as p,e as Me}from"../chunks/CQOudoi1.js";import{b as Re,p as c,a as V,s as Le,c as Ie}from"../chunks/8hPzZ8EO.js";import{e as Ae,i as Te}from"../chunks/DmvlN3Au.js";import{s as ye,a as Ve,r as Xe,A as Ue}from"../chunks/BsBC_O1b.js";import{b as Ze}from"../chunks/B83bnqjj.js";import{b as Pe}from"../chunks/BqC16pqz.js";import{b as Qe}from"../chunks/ktuwdnXO.js";import{o as Ee}from"../chunks/9HFh9aQn.js";function je(S){if(S&&typeof S.select=="function"){const d=()=>S.select();return S.addEventListener("focus",d),{destroy:()=>S.removeEventListener("focus",d)}}}function We(S,d){ke(d,!0);let B=Re(d,"value",15);const D=async()=>{try{const P=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:d.props.drink,brewingDevice:d.props.brewingDevice,grinder:d.props.grinder,grindSetting:d.props.grindSetting,coffeeBeans:d.props.coffeeBeans})});if(P.ok)alert("Setup saved successfully!"),B(B()==="1"?"0":"1");else{const m=await P.json();alert("Failed to save setup: "+m.message)}}catch(P){console.error("Error saving setup:",P),alert("An error occurred while saving the setup.")}};Ge(()=>{d.props&&d.props.drink&&d.props.brewingDevice&&d.props.grinder&&d.props.grindSetting&&d.props.coffeeBeans&&D()}),Be()}var Ye=(S,d)=>d(),qe=k('<div><button type="button" class="btn btn-sm variant-filled">Add to Notes</button></div>');function Se(S,d){ke(d,!0);const B=async()=>{try{const m=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:d.drink.drink,brewingDevice:d.drink.brewingDevice,grinder:d.drink.grinder,grindSetting:d.drink.grindSetting,coffeeBeans:d.drink.coffeeBeans})});if(m.ok)alert("Java setup sent to notes!");else{const _=await m.json();alert("Failed to archive setup: "+_.message)}}catch(m){console.error("Error archiving setup:",m),alert("An error occurred while archiving the setup.")}};var D=qe(),P=r(D);P.__click=[Ye,B],t(D),y(S,D),Be()}Fe(["click"]);var He=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),Ke=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),$e=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),er=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),rr=k('<div class="flex flex-col w-full items-start"><div class="flex flex-col sm:flex-row w-full items-start gap-4 mb-4"><!> <!></div> <div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div></div>');function tr(S,d){ke(d,!0);let B="/images/espresso1.jpg",D=l(""),P=l(""),m=l(""),_=l(""),F=l(""),X=l(""),q=l(""),C=l(""),H=l(""),U=l(""),j=l(""),L=l(""),K=l(""),ne=l(""),oe=l(""),$=l(""),le=l(""),de=l(""),ce=l(""),Z=l(""),De=()=>({drink:e(D),grinder:e(P),grindSetting:e(m),coffeeBeans:e(_),brewingDevice:e(F)}),_e=()=>({drink:e(X),grinder:e(q),grindSetting:e(C),coffeeBeans:e(H),brewingDevice:e(U)}),me=()=>({drink:e(j),grinder:e(L),grindSetting:e(K),coffeeBeans:e(ne),brewingDevice:e(oe)}),be=()=>({drink:e($),grinder:e(le),grindSetting:e(de),coffeeBeans:e(ce),brewingDevice:e(Z)}),ee=l(c({})),re=l(c({})),Q=l(c({})),te=l(c({}));const ve=async()=>{try{const f=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const u=await f.json();console.log("Recent setups:",u);const s=u.setups;console.log("Setups:",s),s.length>0&&(n(D,c(s[0].drink)),n(P,c(s[0].grinder)),n(m,c(s[0].grindSetting)),n(_,c(s[0].coffeeBeans)),n(F,c(s[0].brewingDevice)),n(ee,c(De()))),s.length>1&&(n(X,c(s[1].drink)),n(q,c(s[1].grinder)),n(C,c(s[1].grindSetting)),n(H,c(s[1].coffeeBeans)),n(U,c(s[1].brewingDevice)),n(re,c(_e()))),s.length>2&&(n(j,c(s[2].drink)),n(L,c(s[2].grinder)),n(K,c(s[2].grindSetting)),n(ne,c(s[2].coffeeBeans)),n(oe,c(s[2].brewingDevice)),n(Q,c(me()))),s.length>3&&(n($,c(s[3].drink)),n(le,c(s[3].grinder)),n(de,c(s[3].grindSetting)),n(ce,c(s[3].coffeeBeans)),n(Z,c(s[3].brewingDevice)),n(te,c(be())))}else{const u=await f.json();console.error("Failed to fetch recent setups:",u.message)}}catch(f){console.error("Error fetching recent setups:",f)}};Ee(()=>{ve()}),Ge(()=>{d.trigger&&ve()});var W=rr(),I=r(W),ae=r(I);{var pe=f=>{var u=He(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),N=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),O=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),v=r(i);Se(v,{get drink(){return e(ee)}}),t(i),t(z),t(s),t(u),R(()=>{p(N,e(_)),p(A,`| ${e(D)??""}`),p(T,`Brewing Device: ${e(F)??""}`),p(O,`Grinder: ${e(P)??""}`),p(a,`Grind Setting: ${e(m)??""}`)}),y(f,u)};V(ae,f=>{e(D)!==""&&f(pe)})}var xe=o(ae,2);{var ie=f=>{var u=Ke(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),N=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),O=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),v=r(i);Se(v,{get drink(){return e(re)}}),t(i),t(z),t(s),t(u),R(()=>{p(N,e(H)),p(A,`| ${e(X)??""}`),p(T,`Brewing Device: ${e(U)??""}`),p(O,`Grinder: ${e(q)??""}`),p(a,`Grind Setting: ${e(C)??""}`)}),y(f,u)};V(xe,f=>{e(X)!==""&&f(ie)})}t(I);var se=o(I,2),we=r(se);{var he=f=>{var u=$e(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),N=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),O=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),v=r(i);Se(v,{get drink(){return e(Q)}}),t(i),t(z),t(s),t(u),R(()=>{p(N,e(ne)),p(A,`| ${e(j)??""}`),p(T,`Brewing Device: ${e(oe)??""}`),p(O,`Grinder: ${e(L)??""}`),p(a,`Grind Setting: ${e(K)??""}`)}),y(f,u)};V(we,f=>{e(j)!==""&&f(he)})}var Y=o(we,2);{var fe=f=>{var u=er(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),N=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),O=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),v=r(i);Se(v,{get drink(){return e(te)}}),t(i),t(z),t(s),t(u),R(()=>{p(N,e(ce)),p(A,`| ${e($)??""}`),p(T,`Brewing Device: ${e(Z)??""}`),p(O,`Grinder: ${e(le)??""}`),p(a,`Grind Setting: ${e(de)??""}`)}),y(f,u)};V(Y,f=>{e($)!==""&&f(fe)})}t(se),t(W),y(S,W),Be()}var ar=k("<option> </option>"),ir=k("<option> </option>"),sr=k('<button type="button" class="btn variant-filled"><!></button>'),nr=k("<div></div>"),or=k('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),lr=k('<div class="RecentSetups svelte-lbz1xu"><!></div>'),dr=k('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),cr=k('<div class="flex flex-col items-start gap-4 p-4 md:flex-row md:gap-6 md:p-6"><div class="flex flex-col items-start gap-4"><form class="toDoForm svelte-lbz1xu"><div class="flex justify-center w-full"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col items-start gap-4 px-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="drink" class="label__lg font-semibold">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 border rounded min-h-10 min-w-30"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="brewing_device" class="label__lg font-semibold">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 border rounded min-w-30 min-h-10"><option>Select a device</option><!></select></div> <div class="flex flex-col items-start gap-4 px-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="grinder" class="label__lg font-semibold">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 border rounded min-w-30 min-h-10"><option>Select a grinder</option><!></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="coffeeBeans" class="label__lg font-semibold">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg min-w-30 min-h-10 svelte-lbz1xu" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div></div></div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-lbz1xu"><!></div></div> <!></div>');function vr(S,d){ke(d,!0);const[B,D]=Le(),P=()=>Ie(K,"$userStore",B);let m=l(""),_=l(""),F=l(""),X=l(""),q=l(""),C=l(""),H=l(""),U=l(c({})),j=l(""),L=l(!1);const K=Oe(null);let ne=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],oe=["Pour Over","French Press","Drip Machine","Cold Brew"],$=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],le=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],de=Ce(()=>e(_)==="Espresso"?ne:e(_)==="Coffee"?oe:[]),ce=Ce(()=>e(_)==="Espresso"?le:e(_)==="Coffee"?$:[]);Ge(()=>{e(_)&&n(m,"")});let Z=l(""),De=()=>({drink:e(_),brewingDevice:e(m),coffeeBeans:e(C),grinder:e(F),grindSetting:e(X)}),_e,me;const be=async()=>{if(n(j,""),!e(_)){n(j,"Please select a drink type");return}if(!e(m)){n(j,"Please select a brewing device");return}if(!e(F)){n(j,"Please select a grinder");return}if(!e(C)||e(C).trim()===""){n(j,"Please enter coffee bean information");return}n(L,!0);try{const a=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(m),drink:e(_),grinder:e(F),coffee_beans:e(C)})});if(a.ok){const i=await a.json();console.log("Received data:",i);const v=i.advice;console.log("Advice:",v),n(X,c(v.grind_recommendation)),n(q,c(v.bean_segmentation)),console.log("Grind Segment:",e(q)),n(H,c(v.bean_analysis)),console.log("Bean Description:",e(H)),n(U,c(De()))}else throw new Error("Network response was not ok")}catch(a){console.error("There was a problem with the fetch operation:",a),n(j,"Error submitting data. Please try again.")}finally{n(L,!1)}};Ee(()=>d.autofocus&&_e.focus&&_e.focus()),Ee(()=>{const a=localStorage.getItem("user");if(a)try{K.set(JSON.parse(a))}catch(i){console.error("Error parsing localStorage user data:",i)}});var ee=cr(),re=r(ee),Q=r(re),te=r(Q),ve=r(te),W=r(ve),I=o(r(W),2),ae=r(I);ae.value=((ae.__value="")==null,"");var pe=o(ae);pe.value=(pe.__value="Espresso")==null?"":"Espresso";var xe=o(pe);xe.value=(xe.__value="Coffee")==null?"":"Coffee",t(I);var ie=o(I,4),se=r(ie);se.value=((se.__value="")==null,"");var we=o(se);Ae(we,17,()=>e(de),Te,(a,i)=>{var v=ar(),ue={},J=r(v,!0);t(v),R(()=>{ue!==(ue=e(i))&&(v.value=(v.__value=e(i))==null?"":e(i)),p(J,e(i))}),y(a,v)}),t(ie),t(W);var he=o(W,2),Y=o(r(he),2),fe=r(Y);fe.value=((fe.__value="")==null,"");var f=o(fe);Ae(f,17,()=>e(ce),Te,(a,i,v,ue)=>{var J=ir(),M={},ge=r(J,!0);t(J),R(()=>{M!==(M=e(i))&&(J.value=(J.__value=e(i))==null?"":e(i)),p(ge,e(i))}),y(a,J)}),t(Y);var u=o(Y,4),s=r(u);Xe(s),Ne(()=>Ze(s,()=>e(C),a=>n(C,a))),Qe(s,a=>me=a,()=>me),Ve(s,a=>je==null?void 0:je(a));var g=o(s,2),E=r(g);t(g),t(u),t(he),t(ve),t(te);var b=o(te,2);{var N=a=>{var i=sr();i.__click=be;var v=r(i);{var ue=M=>{var ge=ze("Submitting...");y(M,ge)},J=M=>{var ge=ze("Submit");y(M,ge)};V(v,M=>{e(L)?M(ue):M(J,!1)})}t(i),R(()=>i.disabled=e(L)),y(a,i)},G=a=>{var i=nr();y(a,i)};V(b,a=>{P()?a(N):a(G,!1)})}t(Q);var A=o(Q,2);{var x=a=>{var i=or(),v=r(i,!0);t(i),R(()=>p(v,e(j))),y(a,i)};V(A,a=>{e(j)&&a(x)})}var T=o(A,2),w=r(T);We(w,{get props(){return e(U)},get value(){return e(Z)},set value(a){n(Z,c(a))}}),t(T),t(re);var O=o(re,2);{var z=a=>{var i=lr(),v=r(i);tr(v,{get props(){return e(U)},get trigger(){return e(Z)}}),t(i),y(a,i)},h=a=>{var i=dr();y(a,i)};V(O,a=>{P()?a(z):a(h,!1)})}t(ee),R(()=>{ie.disabled=!e(_),Y.disabled=!e(_),p(E,`${e(C).length??""}/40`)}),Me("submit",Q,be),Pe(I,()=>e(_),a=>n(_,a)),Pe(ie,()=>e(m),a=>n(m,a)),Pe(Y,()=>e(F),a=>n(F,a)),y(S,ee),Be(),D()}Fe(["click"]);var pr=k("<!> <!>",1);function kr(S){var d=pr(),B=Je(d);Ue(B,{});var D=o(B,2);vr(D,{}),y(S,d)}export{kr as component};
