import{t as E,a as P,d as Ae}from"../chunks/DLZ7H7Fm.js";import"../chunks/BMgznbf7.js";import{G as Ge,T as ye,N as je,U as we,V as r,X as t,W as v,g as e,R as d,Z as s,_ as R,aw as ze,a4 as Ce,Q as Me}from"../chunks/BOw1AeM4.js";import{l as Je,d as Te,s as b}from"../chunks/BReulVDI.js";import{b as Le,a as qe,p as c,i as X,s as Re,c as Ie}from"../chunks/Db0Jo1o8.js";import{e as Oe,i as Fe}from"../chunks/CZS3sv3T.js";import{s as he,a as Ve,r as Xe,A as Ze}from"../chunks/9ngHQM8h.js";import{b as Ue}from"../chunks/QFNNfdoR.js";import{b as He}from"../chunks/Dn1lnk-c.js";import{o as Ee}from"../chunks/BMBHoIzy.js";function Ne(o,a,p){if(o.multiple)return We(o,a);for(var u of o.options){var g=ge(u);if(Le(g,a)){u.selected=!0;return}}(!p||a!==void 0)&&(o.selectedIndex=-1)}function Qe(o,a){Ge(()=>{var p=new MutationObserver(()=>{var u=o.__value;Ne(o,u)});return p.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{p.disconnect()}})}function De(o,a,p=a){var u=!0;Je(o,"change",g=>{var _=g?"[selected]":":checked",m;if(o.multiple)m=[].map.call(o.querySelectorAll(_),ge);else{var G=o.querySelector(_)??o.querySelector("option:not([disabled])");m=G&&ge(G)}p(m)}),Ge(()=>{var g=a();if(Ne(o,g,u),u&&g===void 0){var _=o.querySelector(":checked");_!==null&&(g=ge(_),p(g))}o.__value=g,u=!1}),Qe(o)}function We(o,a){for(var p of o.options)p.selected=~a.indexOf(ge(p))}function ge(o){return"__value"in o?o.__value:o.value}function Pe(o){if(o&&typeof o.select=="function"){const a=()=>o.select();return o.addEventListener("focus",a),{destroy:()=>o.removeEventListener("focus",a)}}}function Ke(o,a){ye(a,!0);let p=qe(a,"value",15);const u=async()=>{try{const g=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.props.drink,brewingDevice:a.props.brewingDevice,grinder:a.props.grinder,grindSetting:a.props.grindSetting,coffeeBeans:a.props.coffeeBeans})});if(g.ok)alert("Setup saved successfully!"),p(p()==="1"?"0":"1");else{const _=await g.json();alert("Failed to save setup: "+_.message)}}catch(g){console.error("Error saving setup:",g),alert("An error occurred while saving the setup.")}};je(()=>{a.props&&a.props.drink&&a.props.brewingDevice&&a.props.grinder&&a.props.grindSetting&&a.props.coffeeBeans&&u()}),we()}var Ye=(o,a)=>a(),$e=E('<div><button type="button" class="btn btn-sm variant-filled">Add to Notes</button></div>');function xe(o,a){ye(a,!0);const p=async()=>{try{const _=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.drink.drink,brewingDevice:a.drink.brewingDevice,grinder:a.drink.grinder,grindSetting:a.drink.grindSetting,coffeeBeans:a.drink.coffeeBeans})});if(_.ok)alert("Setup archived successfully!");else{const m=await _.json();alert("Failed to archive setup: "+m.message)}}catch(_){console.error("Error archiving setup:",_),alert("An error occurred while archiving the setup.")}};var u=$e(),g=r(u);g.__click=[Ye,p],t(u),P(o,u),we()}Te(["click"]);var er=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),rr=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),tr=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),ar=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),ir=E('<div class="flex flex-col w-full items-start p-2.5"><div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div> <div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div></div>');function nr(o,a){ye(a,!0);let p="/images/espresso1.jpg",u=v(""),g=v(""),_=v(""),m=v(""),G=v(""),N=v(""),I=v(""),F=v(""),Z=v(""),C=v(""),T=v(""),O=v(""),K=v(""),ie=v(""),ne=v(""),Y=v(""),se=v(""),oe=v(""),le=v(""),U=v(""),Se=()=>({drink:e(u),grinder:e(g),grindSetting:e(_),coffeeBeans:e(m),brewingDevice:e(G)}),_e=()=>({drink:e(N),grinder:e(I),grindSetting:e(F),coffeeBeans:e(Z),brewingDevice:e(C)}),me=()=>({drink:e(T),grinder:e(O),grindSetting:e(K),coffeeBeans:e(ie),brewingDevice:e(ne)}),de=()=>({drink:e(Y),grinder:e(se),grindSetting:e(oe),coffeeBeans:e(le),brewingDevice:e(U)}),$=v(c({})),ee=v(c({})),re=v(c({})),te=v(c({}));const H=async()=>{try{const f=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const h=await f.json();console.log("Recent setups:",h);const l=h.setups;console.log("Setups:",l),l.length>0&&(s(u,c(l[0].drink)),s(g,c(l[0].grinder)),s(_,c(l[0].grindSetting)),s(m,c(l[0].coffeeBeans)),s(G,c(l[0].brewingDevice)),s($,c(Se()))),l.length>1&&(s(N,c(l[1].drink)),s(I,c(l[1].grinder)),s(F,c(l[1].grindSetting)),s(Z,c(l[1].coffeeBeans)),s(C,c(l[1].brewingDevice)),s(ee,c(_e()))),l.length>2&&(s(T,c(l[2].drink)),s(O,c(l[2].grinder)),s(K,c(l[2].grindSetting)),s(ie,c(l[2].coffeeBeans)),s(ne,c(l[2].brewingDevice)),s(re,c(me()))),l.length>3&&(s(Y,c(l[3].drink)),s(se,c(l[3].grinder)),s(oe,c(l[3].grindSetting)),s(le,c(l[3].coffeeBeans)),s(U,c(l[3].brewingDevice)),s(te,c(de())))}else{const h=await f.json();console.error("Failed to fetch recent setups:",h.message)}}catch(f){console.error("Error fetching recent setups:",f)}};Ee(()=>{H()}),je(()=>{a.trigger&&H()});var Q=ir(),W=r(Q),ve=r(W);{var ae=f=>{var h=er(),l=r(h),x=r(l);he(x,"style",`background-image: url('${p}');`);var j=r(x),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(x);var S=d(x,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),n=r(i),y=r(n);t(n);var B=d(n,2),D=r(B);xe(D,{get drink(){return e($)}}),t(B),t(i),t(l),t(h),R(()=>{b(z,e(m)),b(M,`| ${e(u)??""}`),b(J,`Brewing Device: ${e(G)??""}`),b(L,`Grinder: ${e(g)??""}`),b(y,`Grind Setting: ${e(_)??""}`)}),P(f,h)};X(ve,f=>{e(u)!==""&&f(ae)})}var ce=d(ve,2);{var ke=f=>{var h=rr(),l=r(h),x=r(l);he(x,"style",`background-image: url('${p}');`);var j=r(x),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(x);var S=d(x,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),n=r(i),y=r(n);t(n);var B=d(n,2),D=r(B);xe(D,{get drink(){return e(ee)}}),t(B),t(i),t(l),t(h),R(()=>{b(z,e(Z)),b(M,`| ${e(N)??""}`),b(J,`Brewing Device: ${e(C)??""}`),b(L,`Grinder: ${e(I)??""}`),b(y,`Grind Setting: ${e(F)??""}`)}),P(f,h)};X(ce,f=>{e(N)!==""&&f(ke)})}t(W);var pe=d(W,2),V=r(pe);{var fe=f=>{var h=tr(),l=r(h),x=r(l);he(x,"style",`background-image: url('${p}');`);var j=r(x),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(x);var S=d(x,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),n=r(i),y=r(n);t(n);var B=d(n,2),D=r(B);xe(D,{get drink(){return e(re)}}),t(B),t(i),t(l),t(h),R(()=>{b(z,e(ie)),b(M,`| ${e(T)??""}`),b(J,`Brewing Device: ${e(ne)??""}`),b(L,`Grinder: ${e(O)??""}`),b(y,`Grind Setting: ${e(K)??""}`)}),P(f,h)};X(V,f=>{e(T)!==""&&f(fe)})}var Be=d(V,2);{var be=f=>{var h=ar(),l=r(h),x=r(l);he(x,"style",`background-image: url('${p}');`);var j=r(x),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(x);var S=d(x,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),n=r(i),y=r(n);t(n);var B=d(n,2),D=r(B);xe(D,{get drink(){return e(te)}}),t(B),t(i),t(l),t(h),R(()=>{b(z,e(le)),b(M,`| ${e(Y)??""}`),b(J,`Brewing Device: ${e(U)??""}`),b(L,`Grinder: ${e(se)??""}`),b(y,`Grind Setting: ${e(oe)??""}`)}),P(f,h)};X(Be,f=>{e(Y)!==""&&f(be)})}t(pe),t(Q),P(o,Q),we()}const sr=async(o,a,p,u,g,_,m,G,N,I,F,Z)=>{if(s(a,""),!e(p)){s(a,"Please select a drink type");return}if(!e(u)){s(a,"Please select a brewing device");return}if(!e(g)){s(a,"Please select a grinder");return}if(!e(_)||e(_).trim()===""){s(a,"Please enter coffee bean information");return}s(m,!0);try{const C=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(u),drink:e(p),grinder:e(g),coffee_beans:e(_)})});if(C.ok){const T=await C.json();console.log("Received data:",T);const O=T.advice;console.log("Advice:",O),s(G,c(O.grind_recommendation)),s(N,c(O.bean_segmentation)),console.log("Grind Segment:",e(N)),s(I,c(O.bean_analysis)),console.log("Bean Description:",e(I)),s(F,c(Z()))}else throw new Error("Network response was not ok")}catch(C){console.error("There was a problem with the fetch operation:",C),s(a,"Error submitting data. Please try again.")}finally{s(m,!1)}};var or=E("<option> </option>"),lr=E("<option> </option>"),dr=E('<button type="button" class="btn variant-filled"><!></button>'),vr=E("<div></div>"),cr=E('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),pr=E('<div class="RecentSetups svelte-10u9y5t"><!></div>'),fr=E('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),ur=E('<div class="flex flex-col items-start gap-4 p-4 md:flex-row md:gap-6 md:p-6"><div class="flex flex-col items-start gap-4 p-4"><form class="toDoForm svelte-10u9y5t"><div class="flex flex-row md:flex-col items-start gap-4 p-4"><div class="flex flex-col items-start gap-4 p-4"><h2 class="label-wrapper mb-1 min-w-40 min-h-6 svelte-10u9y5t"><label for="drink" class="label__lg font-semibold">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 border rounded min-h-10 min-w-40"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-10u9y5t"><label for="brewing_device" class="label__lg">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 mb-4 border rounded min-w-40 min-h-10"><option>Select a device</option><!></select></div> <div class="flex flex-col items-start gap-4 p-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-10u9y5t"><label for="grinder" class="label__lg">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 mb-4 border rounded min-w-40 min-h-10"><option>Select a grinder</option><!></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-10u9y5t"><label for="coffeeBeans" class="label__lg">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg min-w-40 min-h-10 svelte-10u9y5t" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div></div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-10u9y5t"><!></div></div> <!></div>');function gr(o,a){ye(a,!0);const[p,u]=Re(),g=()=>Ie(K,"$userStore",p);let _=v(""),m=v(""),G=v(""),N=v(""),I=v(""),F=v(""),Z=v(""),C=v(c({})),T=v(""),O=v(!1);const K=ze(null);let ie=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],ne=["Pour Over","French Press","Drip Machine","Cold Brew"],Y=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],se=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],oe=Ce(()=>e(m)==="Espresso"?ie:e(m)==="Coffee"?ne:[]),le=Ce(()=>e(m)==="Espresso"?se:e(m)==="Coffee"?Y:[]);je(()=>{e(m)&&s(_,"")});let U=v(""),Se=()=>({drink:e(m),brewingDevice:e(_),coffeeBeans:e(F),grinder:e(G),grindSetting:e(N)}),_e,me;Ee(()=>a.autofocus&&_e.focus&&_e.focus()),Ee(()=>{const i=localStorage.getItem("user");if(i)try{K.set(JSON.parse(i))}catch(n){console.error("Error parsing localStorage user data:",n)}});var de=ur(),$=r(de),ee=r($),re=r(ee),te=r(re),H=d(r(te),2),Q=r(H);Q.value=((Q.__value="")==null,"");var W=d(Q);W.value=(W.__value="Espresso")==null?"":"Espresso";var ve=d(W);ve.value=(ve.__value="Coffee")==null?"":"Coffee",t(H);var ae=d(H,4),ce=r(ae);ce.value=((ce.__value="")==null,"");var ke=d(ce);Oe(ke,17,()=>e(oe),Fe,(i,n)=>{var y=or(),B={},D=r(y,!0);t(y),R(()=>{B!==(B=e(n))&&(y.value=(y.__value=e(n))==null?"":e(n)),b(D,e(n))}),P(i,y)}),t(ae),t(te);var pe=d(te,2),V=d(r(pe),2),fe=r(V);fe.value=((fe.__value="")==null,"");var Be=d(fe);Oe(Be,17,()=>e(le),Fe,(i,n,y,B)=>{var D=lr(),q={},ue=r(D,!0);t(D),R(()=>{q!==(q=e(n))&&(D.value=(D.__value=e(n))==null?"":e(n)),b(ue,e(n))}),P(i,D)}),t(V);var be=d(V,4),f=r(be);Xe(f),Ge(()=>Ue(f,()=>e(F),i=>s(F,i))),He(f,i=>me=i,()=>me),Ve(f,i=>Pe==null?void 0:Pe(i));var h=d(f,2),l=r(h);t(h),t(be),t(pe),t(re);var x=d(re,2);{var j=i=>{var n=dr();n.__click=[sr,T,m,_,G,F,O,N,I,Z,C,Se];var y=r(n);{var B=q=>{var ue=Ae("Submitting...");P(q,ue)},D=q=>{var ue=Ae("Submit");P(q,ue)};X(y,q=>{e(O)?q(B):q(D,!1)})}t(n),R(()=>n.disabled=e(O)),P(i,n)},w=i=>{var n=vr();P(i,n)};X(x,i=>{g()?i(j):i(w,!1)})}t(ee);var z=d(ee,2);{var A=i=>{var n=cr(),y=r(n,!0);t(n),R(()=>b(y,e(T))),P(i,n)};X(z,i=>{e(T)&&i(A)})}var M=d(z,2),S=r(M);Ke(S,{get props(){return e(C)},get value(){return e(U)},set value(i){s(U,c(i))}}),t(M),t($);var J=d($,2);{var k=i=>{var n=pr(),y=r(n);nr(y,{get props(){return e(C)},get trigger(){return e(U)}}),t(n),P(i,n)},L=i=>{var n=fr();P(i,n)};X(J,i=>{g()?i(k):i(L,!1)})}t(de),R(()=>{ae.disabled=!e(m),V.disabled=!e(m),b(l,`${e(F).length??""}/40`)}),De(H,()=>e(m),i=>s(m,i)),De(ae,()=>e(_),i=>s(_,i)),De(V,()=>e(G),i=>s(G,i)),P(o,de),we(),u()}Te(["click"]);var _r=E("<!> <!>",1);function Pr(o){var a=_r(),p=Me(a);Ze(p,{});var u=d(p,2);gr(u,{}),P(o,a)}export{Pr as component};
