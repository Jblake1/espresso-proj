import{t as j,a as S,d as Ae}from"../chunks/DLZ7H7Fm.js";import"../chunks/BMgznbf7.js";import{G as Ge,T as xe,N as Ce,U as we,V as r,X as t,W as d,g as e,R as v,Z as n,_ as L,aw as Me,a4 as Oe,Q as Je}from"../chunks/BOw1AeM4.js";import{l as Le,d as Ne,s as x}from"../chunks/BReulVDI.js";import{b as Re,a as Ie,p as c,i as M,s as Ve,c as Xe}from"../chunks/Db0Jo1o8.js";import{e as Fe,i as Te}from"../chunks/CZS3sv3T.js";import{s as me,a as Ze,r as Ue,A as He}from"../chunks/DLEm_2z_.js";import{b as Qe}from"../chunks/QFNNfdoR.js";import{b as We}from"../chunks/Dn1lnk-c.js";import{o as Ee}from"../chunks/BMBHoIzy.js";function ze(s,a,u){if(s.multiple)return Ye(s,a);for(var f of s.options){var _=ue(f);if(Re(_,a)){f.selected=!0;return}}(!u||a!==void 0)&&(s.selectedIndex=-1)}function Ke(s,a){Ge(()=>{var u=new MutationObserver(()=>{var f=s.__value;ze(s,f)});return u.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{u.disconnect()}})}function Pe(s,a,u=a){var f=!0;Le(s,"change",_=>{var b=_?"[selected]":":checked",h;if(s.multiple)h=[].map.call(s.querySelectorAll(b),ue);else{var q=s.querySelector(b)??s.querySelector("option:not([disabled])");h=q&&ue(q)}u(h)}),Ge(()=>{var _=a();if(ze(s,_,f),f&&_===void 0){var b=s.querySelector(":checked");b!==null&&(_=ue(b),u(_))}s.__value=_,f=!1}),Ke(s)}function Ye(s,a){for(var u of s.options)u.selected=~a.indexOf(ue(u))}function ue(s){return"__value"in s?s.__value:s.value}function qe(s){if(s&&typeof s.select=="function"){const a=()=>s.select();return s.addEventListener("focus",a),{destroy:()=>s.removeEventListener("focus",a)}}}function $e(s,a){xe(a,!0);let u=Ie(a,"value",15);const f=async()=>{try{const _=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.props.drink,brewingDevice:a.props.brewingDevice,grinder:a.props.grinder,grindSetting:a.props.grindSetting,coffeeBeans:a.props.coffeeBeans})});if(_.ok)alert("Setup saved successfully!"),u(u()==="1"?"0":"1");else{const b=await _.json();alert("Failed to save setup: "+b.message)}}catch(_){console.error("Error saving setup:",_),alert("An error occurred while saving the setup.")}};Ce(()=>{a.props&&a.props.drink&&a.props.brewingDevice&&a.props.grinder&&a.props.grindSetting&&a.props.coffeeBeans&&f()}),we()}var er=(s,a)=>a(),rr=j('<div><button type="button" class="btn btn-sm variant-filled">Archive</button></div>');function he(s,a){xe(a,!0);const u=async()=>{try{const b=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.drink.drink,brewingDevice:a.drink.brewingDevice,grinder:a.drink.grinder,grindSetting:a.drink.grindSetting,coffeeBeans:a.drink.coffeeBeans})});if(b.ok)alert("Setup archived successfully!");else{const h=await b.json();alert("Failed to archive setup: "+h.message)}}catch(b){console.error("Error archiving setup:",b),alert("An error occurred while archiving the setup.")}};var f=rr(),_=r(f);_.__click=[er,u],t(f),S(s,f),we()}Ne(["click"]);var tr=j('<div class="setup svelte-kvoqij"><div class="card svelte-kvoqij"><header class="card-header py-5 px-3 bg-cover bg-center svelte-kvoqij"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),ar=j('<div class="vertical-divider svelte-kvoqij"></div>'),ir=j('<div class="setup svelte-kvoqij"><div class="card svelte-kvoqij"><header class="card-header py-5 px-3 bg-cover bg-center svelte-kvoqij"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),nr=j('<div class="setup svelte-kvoqij"><div class="card svelte-kvoqij"><header class="card-header py-5 px-3 bg-cover bg-center svelte-kvoqij"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),sr=j('<div class="vertical-divider svelte-kvoqij"></div>'),or=j('<div class="setup svelte-kvoqij"><div class="card svelte-kvoqij"><header class="card-header py-5 px-3 bg-cover bg-center svelte-kvoqij"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),lr=j('<div class="container1 svelte-kvoqij"><div class="container2 svelte-kvoqij"><!> <!> <!></div> <div class="container2 svelte-kvoqij"><!> <!> <!></div></div>');function vr(s,a){xe(a,!0);let u="/images/espresso1.jpg",f=d(""),_=d(""),b=d(""),h=d(""),q=d(""),F=d(""),R=d(""),T=d(""),X=d(""),C=d(""),A=d(""),O=d(""),K=d(""),ie=d(""),ne=d(""),Z=d(""),se=d(""),oe=d(""),le=d(""),U=d(""),ye=()=>({drink:e(f),grinder:e(_),grindSetting:e(b),coffeeBeans:e(h),brewingDevice:e(q)}),fe=()=>({drink:e(F),grinder:e(R),grindSetting:e(T),coffeeBeans:e(X),brewingDevice:e(C)}),ge=()=>({drink:e(A),grinder:e(O),grindSetting:e(K),coffeeBeans:e(ie),brewingDevice:e(ne)}),ve=()=>({drink:e(Z),grinder:e(se),grindSetting:e(oe),coffeeBeans:e(le),brewingDevice:e(U)}),Y=d(c({})),$=d(c({})),H=d(c({})),ee=d(c({}));const re=async()=>{try{const p=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(p.ok){const g=await p.json();console.log("Recent setups:",g);const l=g.setups;console.log("Setups:",l),l.length>0&&(n(f,c(l[0].drink)),n(_,c(l[0].grinder)),n(b,c(l[0].grindSetting)),n(h,c(l[0].coffeeBeans)),n(q,c(l[0].brewingDevice)),n(Y,c(ye()))),l.length>1&&(n(F,c(l[1].drink)),n(R,c(l[1].grinder)),n(T,c(l[1].grindSetting)),n(X,c(l[1].coffeeBeans)),n(C,c(l[1].brewingDevice)),n($,c(fe()))),l.length>2&&(n(A,c(l[2].drink)),n(O,c(l[2].grinder)),n(K,c(l[2].grindSetting)),n(ie,c(l[2].coffeeBeans)),n(ne,c(l[2].brewingDevice)),n(H,c(ge()))),l.length>3&&(n(Z,c(l[3].drink)),n(se,c(l[3].grinder)),n(oe,c(l[3].grindSetting)),n(le,c(l[3].coffeeBeans)),n(U,c(l[3].brewingDevice)),n(ee,c(ve())))}else{const g=await p.json();console.error("Failed to fetch recent setups:",g.message)}}catch(p){console.error("Error fetching recent setups:",p)}};Ee(()=>{re()}),Ce(()=>{a.trigger&&re()});var te=lr(),J=r(te),ae=r(J);{var ke=p=>{var g=tr(),l=r(g),w=r(l);me(w,"style",`background-image: url('${u}');`);var E=r(w),B=r(E),i=r(B,!0);t(B);var o=v(B,2),k=r(o);t(o),t(E),t(w);var y=v(w,2),D=r(y);t(y);var m=v(y,2),G=r(m);t(m);var N=v(m,2),P=r(N),Q=r(P);t(P);var z=v(P,2),W=r(z);he(W,{get drink(){return e(Y)}}),t(z),t(N),t(l),t(g),L(()=>{x(i,e(h)),x(k,`| ${e(f)??""}`),x(D,`Brewing Device: ${e(q)??""}`),x(G,`Grinder: ${e(_)??""}`),x(Q,`Grind Setting: ${e(b)??""}`)}),S(p,g)};M(ae,p=>{e(f)!==""&&p(ke)})}var I=v(ae,2);{var de=p=>{var g=ar();S(p,g)};M(I,p=>{e(f)!==""&&e(F)!==""&&p(de)})}var Se=v(I,2);{var ce=p=>{var g=ir(),l=r(g),w=r(l);me(w,"style",`background-image: url('${u}');`);var E=r(w),B=r(E),i=r(B,!0);t(B);var o=v(B,2),k=r(o);t(o),t(E),t(w);var y=v(w,2),D=r(y);t(y);var m=v(y,2),G=r(m);t(m);var N=v(m,2),P=r(N),Q=r(P);t(P);var z=v(P,2),W=r(z);he(W,{get drink(){return e($)}}),t(z),t(N),t(l),t(g),L(()=>{x(i,e(X)),x(k,`| ${e(F)??""}`),x(D,`Brewing Device: ${e(C)??""}`),x(G,`Grinder: ${e(R)??""}`),x(Q,`Grind Setting: ${e(T)??""}`)}),S(p,g)};M(Se,p=>{e(F)!==""&&p(ce)})}t(J);var V=v(J,2),pe=r(V);{var Be=p=>{var g=nr(),l=r(g),w=r(l);me(w,"style",`background-image: url('${u}');`);var E=r(w),B=r(E),i=r(B,!0);t(B);var o=v(B,2),k=r(o);t(o),t(E),t(w);var y=v(w,2),D=r(y);t(y);var m=v(y,2),G=r(m);t(m);var N=v(m,2),P=r(N),Q=r(P);t(P);var z=v(P,2),W=r(z);he(W,{get drink(){return e(H)}}),t(z),t(N),t(l),t(g),L(()=>{x(i,e(ie)),x(k,`| ${e(A)??""}`),x(D,`Brewing Device: ${e(ne)??""}`),x(G,`Grinder: ${e(O)??""}`),x(Q,`Grind Setting: ${e(K)??""}`)}),S(p,g)};M(pe,p=>{e(A)!==""&&p(Be)})}var _e=v(pe,2);{var De=p=>{var g=sr();S(p,g)};M(_e,p=>{e(A)!==""&&e(Z)!==""&&p(De)})}var je=v(_e,2);{var be=p=>{var g=or(),l=r(g),w=r(l);me(w,"style",`background-image: url('${u}');`);var E=r(w),B=r(E),i=r(B,!0);t(B);var o=v(B,2),k=r(o);t(o),t(E),t(w);var y=v(w,2),D=r(y);t(y);var m=v(y,2),G=r(m);t(m);var N=v(m,2),P=r(N),Q=r(P);t(P);var z=v(P,2),W=r(z);he(W,{get drink(){return e(ee)}}),t(z),t(N),t(l),t(g),L(()=>{x(i,e(le)),x(k,`| ${e(Z)??""}`),x(D,`Brewing Device: ${e(U)??""}`),x(G,`Grinder: ${e(se)??""}`),x(Q,`Grind Setting: ${e(oe)??""}`)}),S(p,g)};M(je,p=>{e(Z)!==""&&p(be)})}t(V),t(te),S(s,te),we()}const dr=async(s,a,u,f,_,b,h,q,F,R,T,X)=>{if(n(a,""),!e(u)){n(a,"Please select a drink type");return}if(!e(f)){n(a,"Please select a brewing device");return}if(!e(_)){n(a,"Please select a grinder");return}if(!e(b)||e(b).trim()===""){n(a,"Please enter coffee bean information");return}n(h,!0);try{const C=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(f),drink:e(u),grinder:e(_),coffee_beans:e(b)})});if(C.ok){const A=await C.json();console.log("Received data:",A);const O=A.advice;console.log("Advice:",O),n(q,c(O.grind_recommendation)),n(F,c(O.bean_segmentation)),console.log("Grind Segment:",e(F)),n(R,c(O.bean_analysis)),console.log("Bean Description:",e(R)),n(T,c(X()))}else throw new Error("Network response was not ok")}catch(C){console.error("There was a problem with the fetch operation:",C),n(a,"Error submitting data. Please try again.")}finally{n(h,!1)}};var cr=j("<option> </option>"),pr=j("<option> </option>"),ur=j('<button type="button" class="btn variant-filled"><!></button>'),fr=j("<div></div>"),gr=j('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),_r=j('<div class="RecentSetups svelte-wx9911"><!></div>'),br=j('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),mr=j('<div class="outerContainer svelte-wx9911"><div class="innerContainer svelte-wx9911"><form class="toDoForm svelte-wx9911"><h2 class="label-wrapper svelte-wx9911"><label for="drink" class="label__lg">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper svelte-wx9911"><label for="brewing_device" class="label__lg">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a device</option><!></select> <h2 class="label-wrapper svelte-wx9911"><label for="grinder" class="label__lg">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a grinder</option><!></select> <h2 class="label-wrapper svelte-wx9911"><label for="coffeeBeans" class="label__lg">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg svelte-wx9911" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-wx9911"><!></div></div> <!></div>');function hr(s,a){xe(a,!0);const[u,f]=Ve(),_=()=>Xe(K,"$userStore",u);let b=d(""),h=d(""),q=d(""),F=d(""),R=d(""),T=d(""),X=d(""),C=d(c({})),A=d(""),O=d(!1);const K=Me(null);let ie=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],ne=["Pour Over","French Press","Drip Machine","Cold Brew"],Z=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],se=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],oe=Oe(()=>e(h)==="Espresso"?ie:e(h)==="Coffee"?ne:[]),le=Oe(()=>e(h)==="Espresso"?se:e(h)==="Coffee"?Z:[]);Ce(()=>{e(h)&&n(b,"")});let U=d(""),ye=()=>({drink:e(h),brewingDevice:e(b),coffeeBeans:e(T),grinder:e(q),grindSetting:e(F)}),fe,ge;Ee(()=>a.autofocus&&fe.focus&&fe.focus()),Ee(()=>{const i=localStorage.getItem("user");if(i)try{K.set(JSON.parse(i))}catch(o){console.error("Error parsing localStorage user data:",o)}});var ve=mr(),Y=r(ve),$=r(Y),H=v(r($),2),ee=r(H);ee.value=((ee.__value="")==null,"");var re=v(ee);re.value=(re.__value="Espresso")==null?"":"Espresso";var te=v(re);te.value=(te.__value="Coffee")==null?"":"Coffee",t(H);var J=v(H,4),ae=r(J);ae.value=((ae.__value="")==null,"");var ke=v(ae);Fe(ke,17,()=>e(oe),Te,(i,o)=>{var k=cr(),y={},D=r(k,!0);t(k),L(()=>{y!==(y=e(o))&&(k.value=(k.__value=e(o))==null?"":e(o)),x(D,e(o))}),S(i,k)}),t(J);var I=v(J,4),de=r(I);de.value=((de.__value="")==null,"");var Se=v(de);Fe(Se,17,()=>e(le),Te,(i,o,k,y)=>{var D=pr(),m={},G=r(D,!0);t(D),L(()=>{m!==(m=e(o))&&(D.value=(D.__value=e(o))==null?"":e(o)),x(G,e(o))}),S(i,D)}),t(I);var ce=v(I,4),V=r(ce);Ue(V),Ge(()=>Qe(V,()=>e(T),i=>n(T,i))),We(V,i=>ge=i,()=>ge),Ze(V,i=>qe==null?void 0:qe(i));var pe=v(V,2),Be=r(pe);t(pe),t(ce);var _e=v(ce,2);{var De=i=>{var o=ur();o.__click=[dr,A,h,b,q,T,O,F,R,X,C,ye];var k=r(o);{var y=m=>{var G=Ae("Submitting...");S(m,G)},D=m=>{var G=Ae("Submit");S(m,G)};M(k,m=>{e(O)?m(y):m(D,!1)})}t(o),L(()=>o.disabled=e(O)),S(i,o)},je=i=>{var o=fr();S(i,o)};M(_e,i=>{_()?i(De):i(je,!1)})}t($);var be=v($,2);{var p=i=>{var o=gr(),k=r(o,!0);t(o),L(()=>x(k,e(A))),S(i,o)};M(be,i=>{e(A)&&i(p)})}var g=v(be,2),l=r(g);$e(l,{get props(){return e(C)},get value(){return e(U)},set value(i){n(U,c(i))}}),t(g),t(Y);var w=v(Y,2);{var E=i=>{var o=_r(),k=r(o);vr(k,{get props(){return e(C)},get trigger(){return e(U)}}),t(o),S(i,o)},B=i=>{var o=br();S(i,o)};M(w,i=>{_()?i(E):i(B,!1)})}t(ve),L(()=>{J.disabled=!e(h),I.disabled=!e(h),x(Be,`${e(T).length??""}/40`)}),Pe(H,()=>e(h),i=>n(h,i)),Pe(J,()=>e(b),i=>n(b,i)),Pe(I,()=>e(q),i=>n(q,i)),S(s,ve),we(),f()}Ne(["click"]);var xr=j("<!> <!>",1);function Gr(s){var a=xr(),u=Je(a);He(u,{});var f=v(u,2);hr(f,{}),S(s,a)}export{Gr as component};
