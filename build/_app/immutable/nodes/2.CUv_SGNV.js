import{t as G,a as E,d as Ge}from"../chunks/DLZ7H7Fm.js";import"../chunks/BMgznbf7.js";import{G as Pe,T as xe,N as Ee,U as he,V as r,X as t,W as v,g as e,R as d,Z as s,_ as q,aw as Te,a4 as je,Q as Ne}from"../chunks/BOw1AeM4.js";import{l as ze,d as Oe,s as m}from"../chunks/BReulVDI.js";import{b as Me,a as Je,p as c,i as I,s as Le,c as qe}from"../chunks/Db0Jo1o8.js";import{e as Ce,i as Ae}from"../chunks/CZS3sv3T.js";import{s as be,a as Re,r as Ie,A as Ve}from"../chunks/CvHAvQ_z.js";import{b as Xe}from"../chunks/QFNNfdoR.js";import{b as Ze}from"../chunks/Dn1lnk-c.js";import{o as De}from"../chunks/BMBHoIzy.js";function Fe(o,a,p){if(o.multiple)return He(o,a);for(var f of o.options){var u=pe(f);if(Me(u,a)){f.selected=!0;return}}(!p||a!==void 0)&&(o.selectedIndex=-1)}function Ue(o,a){Pe(()=>{var p=new MutationObserver(()=>{var f=o.__value;Fe(o,f)});return p.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{p.disconnect()}})}function ke(o,a,p=a){var f=!0;ze(o,"change",u=>{var g=u?"[selected]":":checked",b;if(o.multiple)b=[].map.call(o.querySelectorAll(g),pe);else{var j=o.querySelector(g)??o.querySelector("option:not([disabled])");b=j&&pe(j)}p(b)}),Pe(()=>{var u=a();if(Fe(o,u,f),f&&u===void 0){var g=o.querySelector(":checked");g!==null&&(u=pe(g),p(u))}o.__value=u,f=!1}),Ue(o)}function He(o,a){for(var p of o.options)p.selected=~a.indexOf(pe(p))}function pe(o){return"__value"in o?o.__value:o.value}function Be(o){if(o&&typeof o.select=="function"){const a=()=>o.select();return o.addEventListener("focus",a),{destroy:()=>o.removeEventListener("focus",a)}}}function Qe(o,a){xe(a,!0);let p=Je(a,"value",15);const f=async()=>{try{const u=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.props.drink,brewingDevice:a.props.brewingDevice,grinder:a.props.grinder,grindSetting:a.props.grindSetting,coffeeBeans:a.props.coffeeBeans})});if(u.ok)alert("Setup saved successfully!"),p(p()==="1"?"0":"1");else{const g=await u.json();alert("Failed to save setup: "+g.message)}}catch(u){console.error("Error saving setup:",u),alert("An error occurred while saving the setup.")}};Ee(()=>{a.props&&a.props.drink&&a.props.brewingDevice&&a.props.grinder&&a.props.grindSetting&&a.props.coffeeBeans&&f()}),he()}var We=(o,a)=>a(),Ke=G('<div><button type="button" class="btn btn-sm variant-filled">Add to Notes</button></div>');function me(o,a){xe(a,!0);const p=async()=>{try{const g=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.drink.drink,brewingDevice:a.drink.brewingDevice,grinder:a.drink.grinder,grindSetting:a.drink.grindSetting,coffeeBeans:a.drink.coffeeBeans})});if(g.ok)alert("Setup archived successfully!");else{const b=await g.json();alert("Failed to archive setup: "+b.message)}}catch(g){console.error("Error archiving setup:",g),alert("An error occurred while archiving the setup.")}};var f=Ke(),u=r(f);u.__click=[We,p],t(f),E(o,f),he()}Oe(["click"]);var Ye=G('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),$e=G('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),er=G('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),rr=G('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),tr=G('<div class="flex flex-col w-full items-start p-2.5"><div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div> <div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div></div>');function ar(o,a){xe(a,!0);let p="/images/espresso1.jpg",f=v(""),u=v(""),g=v(""),b=v(""),j=v(""),z=v(""),R=v(""),T=v(""),V=v(""),O=v(""),N=v(""),F=v(""),W=v(""),ne=v(""),se=v(""),K=v(""),oe=v(""),le=v(""),de=v(""),X=v(""),we=()=>({drink:e(f),grinder:e(u),grindSetting:e(g),coffeeBeans:e(b),brewingDevice:e(j)}),fe=()=>({drink:e(z),grinder:e(R),grindSetting:e(T),coffeeBeans:e(V),brewingDevice:e(O)}),ue=()=>({drink:e(N),grinder:e(F),grindSetting:e(W),coffeeBeans:e(ne),brewingDevice:e(se)}),ve=()=>({drink:e(K),grinder:e(oe),grindSetting:e(le),coffeeBeans:e(de),brewingDevice:e(X)}),Y=v(c({})),$=v(c({})),Z=v(c({})),ee=v(c({}));const re=async()=>{try{const x=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(x.ok){const h=await x.json();console.log("Recent setups:",h);const l=h.setups;console.log("Setups:",l),l.length>0&&(s(f,c(l[0].drink)),s(u,c(l[0].grinder)),s(g,c(l[0].grindSetting)),s(b,c(l[0].coffeeBeans)),s(j,c(l[0].brewingDevice)),s(Y,c(we()))),l.length>1&&(s(z,c(l[1].drink)),s(R,c(l[1].grinder)),s(T,c(l[1].grindSetting)),s(V,c(l[1].coffeeBeans)),s(O,c(l[1].brewingDevice)),s($,c(fe()))),l.length>2&&(s(N,c(l[2].drink)),s(F,c(l[2].grinder)),s(W,c(l[2].grindSetting)),s(ne,c(l[2].coffeeBeans)),s(se,c(l[2].brewingDevice)),s(Z,c(ue()))),l.length>3&&(s(K,c(l[3].drink)),s(oe,c(l[3].grinder)),s(le,c(l[3].grindSetting)),s(de,c(l[3].coffeeBeans)),s(X,c(l[3].brewingDevice)),s(ee,c(ve())))}else{const h=await x.json();console.error("Failed to fetch recent setups:",h.message)}}catch(x){console.error("Error fetching recent setups:",x)}};De(()=>{re()}),Ee(()=>{a.trigger&&re()});var te=tr(),M=r(te),ae=r(M);{var ye=x=>{var h=Ye(),l=r(h),w=r(l);be(w,"style",`background-image: url('${p}');`);var C=r(w),S=r(C),J=r(S,!0);t(S);var A=d(S,2),L=r(A);t(A),t(C),t(w);var k=d(w,2),i=r(k);t(k);var n=d(k,2),y=r(n);t(n);var B=d(n,2),_=r(B),D=r(_);t(_);var P=d(_,2),Q=r(P);me(Q,{get drink(){return e(Y)}}),t(P),t(B),t(l),t(h),q(()=>{m(J,e(b)),m(L,`| ${e(f)??""}`),m(i,`Brewing Device: ${e(j)??""}`),m(y,`Grinder: ${e(u)??""}`),m(D,`Grind Setting: ${e(g)??""}`)}),E(x,h)};I(ae,x=>{e(f)!==""&&x(ye)})}var U=d(ae,2);{var ce=x=>{var h=$e(),l=r(h),w=r(l);be(w,"style",`background-image: url('${p}');`);var C=r(w),S=r(C),J=r(S,!0);t(S);var A=d(S,2),L=r(A);t(A),t(C),t(w);var k=d(w,2),i=r(k);t(k);var n=d(k,2),y=r(n);t(n);var B=d(n,2),_=r(B),D=r(_);t(_);var P=d(_,2),Q=r(P);me(Q,{get drink(){return e($)}}),t(P),t(B),t(l),t(h),q(()=>{m(J,e(V)),m(L,`| ${e(z)??""}`),m(i,`Brewing Device: ${e(O)??""}`),m(y,`Grinder: ${e(R)??""}`),m(D,`Grind Setting: ${e(T)??""}`)}),E(x,h)};I(U,x=>{e(z)!==""&&x(ce)})}t(M);var ge=d(M,2),ie=r(ge);{var H=x=>{var h=er(),l=r(h),w=r(l);be(w,"style",`background-image: url('${p}');`);var C=r(w),S=r(C),J=r(S,!0);t(S);var A=d(S,2),L=r(A);t(A),t(C),t(w);var k=d(w,2),i=r(k);t(k);var n=d(k,2),y=r(n);t(n);var B=d(n,2),_=r(B),D=r(_);t(_);var P=d(_,2),Q=r(P);me(Q,{get drink(){return e(Z)}}),t(P),t(B),t(l),t(h),q(()=>{m(J,e(ne)),m(L,`| ${e(N)??""}`),m(i,`Brewing Device: ${e(se)??""}`),m(y,`Grinder: ${e(F)??""}`),m(D,`Grind Setting: ${e(W)??""}`)}),E(x,h)};I(ie,x=>{e(N)!==""&&x(H)})}var _e=d(ie,2);{var Se=x=>{var h=rr(),l=r(h),w=r(l);be(w,"style",`background-image: url('${p}');`);var C=r(w),S=r(C),J=r(S,!0);t(S);var A=d(S,2),L=r(A);t(A),t(C),t(w);var k=d(w,2),i=r(k);t(k);var n=d(k,2),y=r(n);t(n);var B=d(n,2),_=r(B),D=r(_);t(_);var P=d(_,2),Q=r(P);me(Q,{get drink(){return e(ee)}}),t(P),t(B),t(l),t(h),q(()=>{m(J,e(de)),m(L,`| ${e(K)??""}`),m(i,`Brewing Device: ${e(X)??""}`),m(y,`Grinder: ${e(oe)??""}`),m(D,`Grind Setting: ${e(le)??""}`)}),E(x,h)};I(_e,x=>{e(K)!==""&&x(Se)})}t(ge),t(te),E(o,te),he()}const ir=async(o,a,p,f,u,g,b,j,z,R,T,V)=>{if(s(a,""),!e(p)){s(a,"Please select a drink type");return}if(!e(f)){s(a,"Please select a brewing device");return}if(!e(u)){s(a,"Please select a grinder");return}if(!e(g)||e(g).trim()===""){s(a,"Please enter coffee bean information");return}s(b,!0);try{const O=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(f),drink:e(p),grinder:e(u),coffee_beans:e(g)})});if(O.ok){const N=await O.json();console.log("Received data:",N);const F=N.advice;console.log("Advice:",F),s(j,c(F.grind_recommendation)),s(z,c(F.bean_segmentation)),console.log("Grind Segment:",e(z)),s(R,c(F.bean_analysis)),console.log("Bean Description:",e(R)),s(T,c(V()))}else throw new Error("Network response was not ok")}catch(O){console.error("There was a problem with the fetch operation:",O),s(a,"Error submitting data. Please try again.")}finally{s(b,!1)}};var nr=G("<option> </option>"),sr=G("<option> </option>"),or=G('<button type="button" class="btn variant-filled"><!></button>'),lr=G("<div></div>"),dr=G('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),vr=G('<div class="RecentSetups svelte-wx9911"><!></div>'),cr=G('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),pr=G('<div class="flex flex-col items-start gap-4 p-4 md:flex-row md:gap-6 md:p-6"><div class="innerContainer svelte-wx9911"><form class="toDoForm svelte-wx9911"><h2 class="label-wrapper svelte-wx9911"><label for="drink" class="label__lg">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper svelte-wx9911"><label for="brewing_device" class="label__lg">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a device</option><!></select> <h2 class="label-wrapper svelte-wx9911"><label for="grinder" class="label__lg">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a grinder</option><!></select> <h2 class="label-wrapper svelte-wx9911"><label for="coffeeBeans" class="label__lg">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg svelte-wx9911" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-wx9911"><!></div></div> <!></div>');function fr(o,a){xe(a,!0);const[p,f]=Le(),u=()=>qe(W,"$userStore",p);let g=v(""),b=v(""),j=v(""),z=v(""),R=v(""),T=v(""),V=v(""),O=v(c({})),N=v(""),F=v(!1);const W=Te(null);let ne=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],se=["Pour Over","French Press","Drip Machine","Cold Brew"],K=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],oe=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],le=je(()=>e(b)==="Espresso"?ne:e(b)==="Coffee"?se:[]),de=je(()=>e(b)==="Espresso"?oe:e(b)==="Coffee"?K:[]);Ee(()=>{e(b)&&s(g,"")});let X=v(""),we=()=>({drink:e(b),brewingDevice:e(g),coffeeBeans:e(T),grinder:e(j),grindSetting:e(z)}),fe,ue;De(()=>a.autofocus&&fe.focus&&fe.focus()),De(()=>{const i=localStorage.getItem("user");if(i)try{W.set(JSON.parse(i))}catch(n){console.error("Error parsing localStorage user data:",n)}});var ve=pr(),Y=r(ve),$=r(Y),Z=d(r($),2),ee=r(Z);ee.value=((ee.__value="")==null,"");var re=d(ee);re.value=(re.__value="Espresso")==null?"":"Espresso";var te=d(re);te.value=(te.__value="Coffee")==null?"":"Coffee",t(Z);var M=d(Z,4),ae=r(M);ae.value=((ae.__value="")==null,"");var ye=d(ae);Ce(ye,17,()=>e(le),Ae,(i,n)=>{var y=nr(),B={},_=r(y,!0);t(y),q(()=>{B!==(B=e(n))&&(y.value=(y.__value=e(n))==null?"":e(n)),m(_,e(n))}),E(i,y)}),t(M);var U=d(M,4),ce=r(U);ce.value=((ce.__value="")==null,"");var ge=d(ce);Ce(ge,17,()=>e(de),Ae,(i,n,y,B)=>{var _=sr(),D={},P=r(_,!0);t(_),q(()=>{D!==(D=e(n))&&(_.value=(_.__value=e(n))==null?"":e(n)),m(P,e(n))}),E(i,_)}),t(U);var ie=d(U,4),H=r(ie);Ie(H),Pe(()=>Xe(H,()=>e(T),i=>s(T,i))),Ze(H,i=>ue=i,()=>ue),Re(H,i=>Be==null?void 0:Be(i));var _e=d(H,2),Se=r(_e);t(_e),t(ie);var x=d(ie,2);{var h=i=>{var n=or();n.__click=[ir,N,b,g,j,T,F,z,R,V,O,we];var y=r(n);{var B=D=>{var P=Ge("Submitting...");E(D,P)},_=D=>{var P=Ge("Submit");E(D,P)};I(y,D=>{e(F)?D(B):D(_,!1)})}t(n),q(()=>n.disabled=e(F)),E(i,n)},l=i=>{var n=lr();E(i,n)};I(x,i=>{u()?i(h):i(l,!1)})}t($);var w=d($,2);{var C=i=>{var n=dr(),y=r(n,!0);t(n),q(()=>m(y,e(N))),E(i,n)};I(w,i=>{e(N)&&i(C)})}var S=d(w,2),J=r(S);Qe(J,{get props(){return e(O)},get value(){return e(X)},set value(i){s(X,c(i))}}),t(S),t(Y);var A=d(Y,2);{var L=i=>{var n=vr(),y=r(n);ar(y,{get props(){return e(O)},get trigger(){return e(X)}}),t(n),E(i,n)},k=i=>{var n=cr();E(i,n)};I(A,i=>{u()?i(L):i(k,!1)})}t(ve),q(()=>{M.disabled=!e(b),U.disabled=!e(b),m(Se,`${e(T).length??""}/40`)}),ke(Z,()=>e(b),i=>s(b,i)),ke(M,()=>e(g),i=>s(g,i)),ke(U,()=>e(j),i=>s(j,i)),E(o,ve),he(),f()}Oe(["click"]);var ur=G("<!> <!>",1);function Br(o){var a=ur(),p=Ne(a);Ve(p,{});var f=d(p,2);fr(f,{}),E(o,a)}export{Br as component};
