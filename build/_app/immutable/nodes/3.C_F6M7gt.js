import{t as W,a as A,d as ut,c as ke}from"../chunks/BS-RVYRT.js";import{i as Ct}from"../chunks/2C2aqTs0.js";import{h as Ce,M as Gt,L as Vt,g as f,a4 as Ht,O as Wt,P as vt,Q as Qe,R as $e,X as Me,at as Ut,T as kt,V as It,W as Xt,aw as St,d as Yt,$ as Zt,F as ft,aA as et,I as We,aB as ot,aC as pt,aD as Kt,ak as Qt,aE as $t,aF as er,aG as it,aH as tr,ap as rr,ae as ar,ad as nr,aI as Dt,q as jt,aJ as or,N as ir,aK as sr,aL as lr,e as st,u as dr,aM as cr,aN as ur,aO as vr,aP as fr,_ as ze,al as _t,am as mt,an as pr,p as Ue,aQ as G,ai as _r,aR as ve,t as Z,C as he,z as N,aS as Et,k as y,n as _,v as we,j as Xe,aT as V,s as k,f as xe,a as mr,m as Je,A as tt}from"../chunks/DOYWxbE7.js";import{a as gr,w as yr,l as hr,e as X,d as Tt,r as br,s as fe}from"../chunks/DB56v5DY.js";import{b as wr,l as At,a as I,s as Pt,c as Ot,i as Ie,p as Re,r as xr}from"../chunks/uZlAGSQv.js";import{s as Ae,a as H,b as Ge,h as rt,r as at,A as Cr}from"../chunks/CCfb6eiF.js";import{c as kr,o as Ir}from"../chunks/DFfVD7vQ.js";import"../chunks/COc6nbZ1.js";import{a as Pe,p as Sr,b as Dr}from"../chunks/B6E47COT.js";import{b as Ve}from"../chunks/BCXBkeYK.js";function Ft(t,e){return e}function jr(t,e,a,r){for(var s=[],d=e.length,m=0;m<d;m++)Kt(e[m].e,s,!0);var h=d>0&&s.length===0&&a!==null;if(h){var D=a.parentNode;Qt(D),D.append(a),r.clear(),be(t,e[0].prev,e[d-1].next)}$t(s,()=>{for(var x=0;x<d;x++){var g=e[x];h||(r.delete(g.k),be(t,g.prev,g.next)),er(g.e,!h)}})}function Nt(t,e,a,r,s,d=null){var m=t,h={flags:e,items:new Map,first:null},D=(e&Dt)!==0;if(D){var x=t;m=Ce?Qe(ar(x)):x.appendChild(nr())}Ce&&Gt();var g=null,O=!1,c=Ht(()=>{var p=a();return Yt(p)?p:p==null?[]:St(p)});Vt(()=>{var p=f(c),u=p.length;if(O&&u===0)return;O=u===0;let C=!1;if(Ce){var b=m.data===Wt;b!==(u===0)&&(m=vt(),Qe(m),$e(!1),C=!0)}if(Ce){for(var o=null,n,i=0;i<u;i++){if(Me.nodeType===8&&Me.data===Ut){m=Me,C=!0,$e(!1);break}var v=p[i],l=r(v,i);n=Bt(Me,h,o,null,v,l,i,s,e,a),h.items.set(l,n),o=n}u>0&&Qe(vt())}Ce||Er(p,h,m,s,e,r,a),d!==null&&(u===0?g?kt(g):g=It(()=>d(m)):g!==null&&Xt(g,()=>{g=null})),C&&$e(!0),f(c)}),Ce&&(m=Me)}function Er(t,e,a,r,s,d,m){var ee,U,te,Q;var h=(s&or)!==0,D=(s&(it|ot))!==0,x=t.length,g=e.items,O=e.first,c=O,p,u=null,C,b=[],o=[],n,i,v,l;if(h)for(l=0;l<x;l+=1)n=t[l],i=d(n,l),v=g.get(i),v!==void 0&&((ee=v.a)==null||ee.measure(),(C??(C=new Set)).add(v));for(l=0;l<x;l+=1){if(n=t[l],i=d(n,l),v=g.get(i),v===void 0){var E=c?c.e.nodes_start:a;u=Bt(E,e,u,u===null?e.first:u.next,n,i,l,r,s,m),g.set(i,u),b=[],o=[],c=u.next;continue}if(D&&Tr(v,n,l,s),v.e.f&et&&(kt(v.e),h&&((U=v.a)==null||U.unfix(),(C??(C=new Set)).delete(v))),v!==c){if(p!==void 0&&p.has(v)){if(b.length<o.length){var B=o[0],T;u=B.prev;var F=b[0],J=b[b.length-1];for(T=0;T<b.length;T+=1)gt(b[T],B,a);for(T=0;T<o.length;T+=1)p.delete(o[T]);be(e,F.prev,J.next),be(e,u,F),be(e,J,B),c=B,u=J,l-=1,b=[],o=[]}else p.delete(v),gt(v,c,a),be(e,v.prev,v.next),be(e,v,u===null?e.first:u.next),be(e,u,v),u=v;continue}for(b=[],o=[];c!==null&&c.k!==i;)c.e.f&et||(p??(p=new Set)).add(c),o.push(c),c=c.next;if(c===null)continue;v=c}b.push(v),u=v,c=v.next}if(c!==null||p!==void 0){for(var q=p===void 0?[]:St(p);c!==null;)c.e.f&et||q.push(c),c=c.next;var Y=q.length;if(Y>0){var K=s&Dt&&x===0?a:null;if(h){for(l=0;l<Y;l+=1)(te=q[l].a)==null||te.measure();for(l=0;l<Y;l+=1)(Q=q[l].a)==null||Q.fix()}jr(e,q,K,g)}}h&&jt(()=>{var re;if(C!==void 0)for(v of C)(re=v.a)==null||re.apply()}),We.first=e.first&&e.first.e,We.last=u&&u.e}function Tr(t,e,a,r){r&it&&pt(t.v,e),r&ot?pt(t.i,a):t.i=a}function Bt(t,e,a,r,s,d,m,h,D,x){var g=(D&it)!==0,O=(D&tr)===0,c=g?O?Zt(s):ft(s):s,p=D&ot?ft(m):m,u={i:p,v:c,k:d,a:null,e:null,prev:a,next:r};try{return u.e=It(()=>h(t,c,p,x),Ce),u.e.prev=a&&a.e,u.e.next=r&&r.e,a===null?e.first=u:(a.next=u,a.e.next=u.e),r!==null&&(r.prev=u,r.e.prev=u.e),u}finally{}}function gt(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,d=t.e.nodes_start;d!==r;){var m=rr(d);s.before(d),d=m}}function be(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}const Ar=()=>performance.now(),pe={tick:t=>requestAnimationFrame(t),now:()=>Ar(),tasks:new Set};function Mt(){const t=pe.now();pe.tasks.forEach(e=>{e.c(t)||(pe.tasks.delete(e),e.f())}),pe.tasks.size!==0&&pe.tick(Mt)}function Pr(t){let e;return pe.tasks.size===0&&pe.tick(Mt),{promise:new Promise(a=>{pe.tasks.add(e={c:t,f:a})}),abort(){pe.tasks.delete(e)}}}function He(t,e){yr(()=>{t.dispatchEvent(new CustomEvent(e))})}function Or(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function yt(t){const e={},a=t.split(";");for(const r of a){const[s,d]=r.split(":");if(!s||d===void 0)break;const m=Or(s.trim());e[m]=d.trim()}return e}const Fr=t=>t;function ht(t,e,a,r){var s=(t&ur)!==0,d=(t&vr)!==0,m=s&&d,h=(t&cr)!==0,D=m?"both":s?"in":"out",x,g=e.inert,O=e.style.overflow,c,p;function u(){var i=pr,v=We;_t(null),mt(null);try{return x??(x=a()(e,(r==null?void 0:r())??{},{direction:D}))}finally{_t(i),mt(v)}}var C={is_global:h,in(){var i;if(e.inert=g,!s){p==null||p.abort(),(i=p==null?void 0:p.reset)==null||i.call(p);return}d||c==null||c.abort(),He(e,"introstart"),c=nt(e,u(),p,1,()=>{He(e,"introend"),c==null||c.abort(),c=x=void 0,e.style.overflow=O})},out(i){if(!d){i==null||i(),x=void 0;return}e.inert=!0,He(e,"outrostart"),p=nt(e,u(),c,0,()=>{He(e,"outroend"),i==null||i()})},stop:()=>{c==null||c.abort(),p==null||p.abort()}},b=We;if((b.transitions??(b.transitions=[])).push(C),s&&gr){var o=h;if(!o){for(var n=b.parent;n&&n.f&ir;)for(;(n=n.parent)&&!(n.f&sr););o=!n||(n.f&lr)!==0}o&&st(()=>{dr(()=>C.in())})}}function nt(t,e,a,r,s){var d=r===1;if(fr(e)){var m,h=!1;return jt(()=>{if(!h){var b=e({direction:d?"in":"out"});m=nt(t,b,a,r,s)}}),{abort:()=>{h=!0,m==null||m.abort()},deactivate:()=>m.deactivate(),reset:()=>m.reset(),t:()=>m.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return s(),{abort:ze,deactivate:ze,reset:ze,t:()=>r};const{delay:D=0,css:x,tick:g,easing:O=Fr}=e;var c=[];if(d&&a===void 0&&(g&&g(0,1),x)){var p=yt(x(0,1));c.push(p,p)}var u=()=>1-r,C=t.animate(c,{duration:D});return C.onfinish=()=>{var b=(a==null?void 0:a.t())??1-r;a==null||a.abort();var o=r-b,n=e.duration*Math.abs(o),i=[];if(n>0){var v=!1;if(x)for(var l=Math.ceil(n/16.666666666666668),E=0;E<=l;E+=1){var B=b+o*O(E/l),T=yt(x(B,1-B));i.push(T),v||(v=T.overflow==="hidden")}v&&(t.style.overflow="hidden"),u=()=>{var F=C.currentTime;return b+o*O(F/n)},g&&Pr(()=>{if(C.playState!=="running")return!1;var F=u();return g(F,1-F),!0})}C=t.animate(i,{duration:n,fill:"forwards"}),C.onfinish=()=>{u=()=>r,g==null||g(r,1-r),s()}},{abort:()=>{C&&(C.cancel(),C.effect=null,C.onfinish=ze)},deactivate:()=>{s=ze},reset:()=>{r===0&&(g==null||g(1,0))},t:()=>u()}}function zt(t,e,a){if(t.multiple)return Br(t,e);for(var r of t.options){var s=qe(r);if(wr(s,e)){r.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function Nr(t,e){st(()=>{var a=new MutationObserver(()=>{var r=t.__value;zt(t,r)});return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function bt(t,e,a=e){var r=!0;hr(t,"change",s=>{var d=s?"[selected]":":checked",m;if(t.multiple)m=[].map.call(t.querySelectorAll(d),qe);else{var h=t.querySelector(d)??t.querySelector("option:not([disabled])");m=h&&qe(h)}a(m)}),st(()=>{var s=e();if(zt(t,s,r),r&&s===void 0){var d=t.querySelector(":checked");d!==null&&(s=qe(d),a(s))}t.__value=s,r=!1}),Nr(t)}function Br(t,e){for(var a of t.options)a.selected=~e.indexOf(qe(a))}function qe(t){return"__value"in t?t.__value:t.value}function Mr(t){const e=t-1;return e*e*e+1}function wt(t,{delay:e=0,duration:a=400,easing:r=Mr,axis:s="y"}={}){const d=getComputedStyle(t),m=+d.opacity,h=s==="y"?"height":"width",D=parseFloat(d[h]),x=s==="y"?["top","bottom"]:["left","right"],g=x.map(o=>`${o[0].toUpperCase()}${o.slice(1)}`),O=parseFloat(d[`padding${g[0]}`]),c=parseFloat(d[`padding${g[1]}`]),p=parseFloat(d[`margin${g[0]}`]),u=parseFloat(d[`margin${g[1]}`]),C=parseFloat(d[`border${g[0]}Width`]),b=parseFloat(d[`border${g[1]}Width`]);return{delay:e,duration:a,easing:r,css:o=>`overflow: hidden;opacity: ${Math.min(o*20,1)*m};${h}: ${o*D}px;padding-${x[0]}: ${o*O}px;padding-${x[1]}: ${o*c}px;margin-${x[0]}: ${o*p}px;margin-${x[1]}: ${o*u}px;border-${x[0]}-width: ${o*C}px;border-${x[1]}-width: ${o*b}px;min-${h}: 0`}}var zr=W('<div data-testid="accordion"><!></div>');function Jr(t,e){const a=At(e,["children","$$slots","$$events","$$legacy"]);Ue(e,!1);const[r,s]=Ot(),d=()=>Pt(Sr,"$prefersReducedMotionStore",r),m=he();let h=I(e,"autocollapse",8,!1),D=I(e,"width",8,"w-full"),x=I(e,"spacing",8,"space-y-1"),g=I(e,"disabled",8,!1),O=I(e,"padding",8,"py-2 px-4"),c=I(e,"hover",8,"hover:bg-primary-hover-token"),p=I(e,"rounded",8,"rounded-container-token"),u=I(e,"caretOpen",8,"rotate-180"),C=I(e,"caretClosed",8,""),b=I(e,"regionControl",8,""),o=I(e,"regionPanel",8,"space-y-4"),n=I(e,"regionCaret",8,""),i=I(e,"transitions",24,()=>!d()),v=I(e,"transitionIn",8,wt),l=I(e,"transitionInParams",24,()=>({duration:200})),E=I(e,"transitionOut",8,wt),B=I(e,"transitionOutParams",24,()=>({duration:200}));const T=_r(null);G("active",T),G("autocollapse",h()),G("disabled",g()),G("padding",O()),G("hover",c()),G("rounded",p()),G("caretOpen",u()),G("caretClosed",C()),G("regionControl",b()),G("regionPanel",o()),G("regionCaret",n()),G("transitions",i()),G("transitionIn",v()),G("transitionInParams",l()),G("transitionOut",E()),G("transitionOutParams",B()),ve(()=>(N(D()),N(x()),N(a)),()=>{Z(m,`${D()} ${x()} ${a.class??""}`)}),Et(),Ct();var F=zr(),J=y(F);Pe(J,e,"default",{},null),_(F),we(()=>Ae(F,`accordion ${f(m)??""}`)),A(t,F),Xe(),s()}function xt(t,e){const{transition:a,params:r,enabled:s}=e;return s?a(t,r):"duration"in r?a(t,{duration:0}):{duration:0}}var Rr=W('<div class="accordion-lead"><!></div>'),qr=W("<div><!></div>"),Lr=W("<div><!></div>"),Gr=W('<div role="region"><!></div>'),Vr=W('<div data-testid="accordion-item"><button type="button"><!> <div class="accordion-summary flex-1"><!></div> <!></button> <!></div>');function Hr(t,e){const a=Dr(e),r=At(e,["children","$$slots","$$events","$$legacy"]);Ue(e,!1);const[s,d]=Ot(),m=()=>Pt(E(),"$active",s),h=he(),D=he(),x=he(),g=he(),O=he(),c=he(),p=he(),u=kr();let C=I(e,"open",12,!1),b=I(e,"id",24,()=>String(Math.random()));const o="",n="text-start w-full flex items-center space-x-4",i="fill-current w-3 transition-transform duration-[200ms]",v="";let l=I(e,"autocollapse",24,()=>V("autocollapse")),E=I(e,"active",24,()=>V("active")),B=I(e,"disabled",24,()=>V("disabled")),T=I(e,"padding",24,()=>V("padding")),F=I(e,"hover",24,()=>V("hover")),J=I(e,"rounded",24,()=>V("rounded")),q=I(e,"caretOpen",24,()=>V("caretOpen")),Y=I(e,"caretClosed",24,()=>V("caretClosed")),K=I(e,"regionControl",24,()=>V("regionControl")),ee=I(e,"regionPanel",24,()=>V("regionPanel")),U=I(e,"regionCaret",24,()=>V("regionCaret")),te=I(e,"transitions",24,()=>V("transitions")),Q=I(e,"transitionIn",24,()=>V("transitionIn")),re=I(e,"transitionInParams",24,()=>V("transitionInParams")),_e=I(e,"transitionOut",24,()=>V("transitionOut")),ae=I(e,"transitionOutParams",24,()=>V("transitionOutParams"));const ne=`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
			<path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z" />
		</svg>`;function oe(S){l()===!0?E().set(b()):C(!C()),Se(S)}function Se(S){const j=l()?m()===b():C();u("toggle",{event:S,id:b(),panelId:`accordion-panel-${b()}`,open:j,autocollapse:l()})}l()&&C()&&oe(),ve(()=>(N(C()),N(l())),()=>{C()&&l()&&oe()}),ve(()=>(N(l()),m(),N(b()),N(C())),()=>{Z(h,l()?m()===b():C())}),ve(()=>N(r),()=>{Z(D,`${o} ${r.class??""}`)}),ve(()=>(N(T()),N(F()),N(J()),N(K())),()=>{Z(x,`${n} ${T()} ${F()} ${J()} ${K()}`)}),ve(()=>(f(h),N(q()),N(Y())),()=>{Z(g,f(h)?q():Y())}),ve(()=>(N(U()),f(g)),()=>{Z(O,`${i} ${U()} ${f(g)}`)}),ve(()=>N(U()),()=>{Z(c,`${i} ${U()}`)}),ve(()=>(N(T()),N(J()),N(ee())),()=>{Z(p,`${v} ${T()} ${J()} ${ee()}`)}),Et(),Ct();var $=Vr(),M=y($),ie=y(M);{var De=S=>{var j=Rr(),le=y(j);Pe(le,e,"lead",{},null),_(j),A(S,j)};Ie(ie,S=>{a.lead&&S(De)})}var me=k(ie,2),w=y(me);Pe(w,e,"summary",{},S=>{var j=ut("(summary)");A(S,j)}),_(me);var P=k(me,2);{var se=S=>{var j=qr(),le=y(j);{var Oe=R=>{var ge=ke(),Ne=xe(ge);Pe(Ne,e,"iconClosed",{},ce=>{var ye=ke(),L=xe(ye);rt(L,()=>ne),A(ce,ye)}),A(R,ge)},Fe=R=>{var ge=ke(),Ne=xe(ge);Pe(Ne,e,"iconOpen",{},ce=>{var ye=ke(),L=xe(ye);rt(L,()=>ne),A(ce,ye)}),A(R,ge)};Ie(le,R=>{f(h)?R(Oe):R(Fe,!1)})}_(j),we(()=>Ae(j,`accordion-summary-icons ${f(c)??""}`)),A(S,j)},je=S=>{var j=Lr(),le=y(j);rt(le,()=>ne),_(j),we(()=>Ae(j,`accordion-summary-caret ${f(O)??""}`)),A(S,j)};Ie(P,S=>{a.iconClosed||a.iconOpen?S(se):S(je,!1)})}_(M);var de=k(M,2);{var z=S=>{var j=Gr(),le=y(j);Pe(le,e,"content",{},Oe=>{var Fe=ut("(content)");A(Oe,Fe)}),_(j),we(()=>{Ae(j,`accordion-panel ${f(p)??""}`),H(j,"id",`accordion-panel-${b()??""}`),H(j,"aria-hidden",!f(h)),H(j,"aria-labelledby",b())}),ht(1,j,()=>xt,()=>({transition:Q(),params:re(),enabled:te()})),ht(2,j,()=>xt,()=>({transition:_e(),params:ae(),enabled:te()})),A(S,j)};Ie(de,S=>{f(h)&&S(z)})}_($),we(()=>{Ae($,`accordion-item ${f(D)??""}`),Ae(M,`accordion-control ${f(x)??""}`),H(M,"id",b()),H(M,"aria-expanded",f(h)),H(M,"aria-controls",`accordion-panel-${b()??""}`),M.disabled=B()}),X("click",M,oe),X("click",M,function(S){Ge.call(this,e,S)}),X("keydown",M,function(S){Ge.call(this,e,S)}),X("keyup",M,function(S){Ge.call(this,e,S)}),X("keypress",M,function(S){Ge.call(this,e,S)}),A(t,$),Xe(),d()}const Wr=async(t,e,a,r)=>{try{if(!(await fetch("/journeyCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({journeyID:a.journeyData.journeyID})})).ok)throw new Error("Network response of journeyCard not ok");r(a.journeyData.journeyID)}catch(s){console.error("Error getting journey:",s),alert("An error occurred while posting the journey card.")}};var Ur=W('<div class="snap-start shrink-0 relative sm:w-64 md:w-70 lg:w-80"><button type="button" class="absolute -top-1 right-0 px-1.5 py-0.5 bg-red-500 hover:bg-red-600 text-white rounded-tl-md rounded-tr-lg rounded-bl-md flex items-center justify-center shadow-md z-10" title="Delete card"><span class="text-xs font-bold">×</span></button> <form class="border border-primary-400 rounded-lg shadow-sm bg-tertiary-900 p-4 w-full"><div class="mb-4"><div class="flex items-center justify-between"><p class="text-sm font-medium text-tertiary-500"> </p> <p class="text-sm font-medium text-tertiary-500"> </p></div></div> <div class="mb-3"><label class="block text-sm font-medium text-tertiary-200 mb-1">Grind Setting</label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <input type="text" required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500"></div></div> <div class="mb-3"><label class="block text-sm font-medium text-tertiary-200 mb-1">Grind Amount</label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <input type="text" required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500"></div></div> <div class="mb-3"><label class="block text-sm font-medium text-tertiary-200 mb-1"> </label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <input type="text" required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500"></div></div> <div class="mb-4 relative"><label class="block text-sm font-medium text-tertiary-200 mb-1">Notes</label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <textarea required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500 min-h-[80px]"></textarea></div></div></form></div>'),Xr=W('<div class="flex flex-row gap-2 w-full"><div class="flex items-center self-stretch"><button class="rounded-full h-12 w-12 flex items-center justify-center bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold shadow"><span class="text-xl">+</span></button></div> <div class="flex overflow-x-auto snap-x snap-mandatory pb-4 gap-4 w-full"></div></div>');function Yr(t,e){Ue(e,!0);let a=xr(e,["$$slots","$$events","$$legacy"]),r=Re([{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:"",grindAmount:""},{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:"",grindAmount:""},{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:"",grindAmount:""},{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:"",grindAmount:""}]),s=Re({}),d=Re({});const m=async(o,n)=>{s[o]||(s[o]=!0),await O(o)},h=(o,n)=>{d[o]||(d[o]={}),d[o][n]=r[o][n],r[o][n]=""},D=(o,n)=>{var l;const i=r[o][n],v=(l=d[o])==null?void 0:l[n];(i===""||i===null)&&v!==void 0&&(r[o][n]=v),m(o),d[o]&&(delete d[o][n],Object.keys(d[o]).length===0&&delete d[o])},x=async(o,n)=>{try{if(!(await fetch("/journeyCardDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o})})).ok)throw new Error("Network response of journeyCard delete not ok");r[n].cardID="",r[n].datePosted="",r[n].iteration="",r[n].notes="",r[n].grindSetting="",r[n].shotTime="",r[n].journeyID="",r[n].grindAmount="",e.journeyData.journeyID&&g(e.journeyData.journeyID)}catch(i){console.error("Error getting journey:",i),alert("An error occurred while deleting the journey card.")}},g=async o=>{try{console.log(`Sending journeyID: ${o}`);const n=await fetch(`/journeyCard?journeyID=${o}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(n.ok){const i=await n.json();console.log("JourneyCards:",i);const v=i.journeyCards;console.log("JourneyCardsData:",v);for(let l=0;l<r.length;l++)r[l]={datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:"",grindAmount:""};v.forEach((l,E)=>{E<r.length&&(r[E].cardID=l.id,r[E].datePosted=l.datePosted,r[E].iteration=l.iteration,r[E].notes=l.notes,r[E].grindSetting=l.grindSetting,r[E].shotTime=l.shotTime,r[E].journeyID=e.journeyData.journeyID,r[E].grindAmount=l.grindAmount)})}}catch(n){console.error("Error getting journey:",n),alert("An error occurred while getting the journey.")}},O=async o=>{try{if(!(await fetch("/journeyCardEdit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r[o].cardID,grindSetting:r[o].grindSetting,shotTime:r[o].shotTime,notes:r[o].notes,grindAmount:r[o].grindAmount})})).ok)throw new Error("Network response of journeyCard update not ok");s[o]=!1}catch(n){console.error("Error getting journey:",n),alert("An error occurred while updating card.")}};function c(o){if(!o)return"";const n=new Date(o);if(isNaN(n.getTime()))return o;const i=(n.getMonth()+1).toString().padStart(2,"0"),v=n.getDate().toString().padStart(2,"0"),l=n.getFullYear().toString().slice(-2);return`${i}/${v}/${l}`}mr(()=>{console.log("running"),console.log(e.journeyData.journeyID),e.journeyData.journeyID&&g(e.journeyData.journeyID)});var p=Xr(),u=y(p),C=y(u);C.__click=[Wr,a,e,g],_(u);var b=k(u,2);Nt(b,21,()=>r,Ft,(o,n,i)=>{var v=ke(),l=xe(v);{var E=B=>{var T=Ur(),F=y(T);F.__click=()=>x(f(n).cardID,i);var J=k(F,2),q=y(J),Y=y(q),K=y(Y),ee=y(K);_(K);var U=k(K,2),te=y(U,!0);_(U),_(Y),_(q);var Q=k(q,2),re=y(Q);H(re,"for",`grindSetting${i+1}`);var _e=k(re,2),ae=k(y(_e),2);at(ae),H(ae,"id",`grindSetting${i+1}`),_(_e),_(Q);var ne=k(Q,2),oe=y(ne);H(oe,"for",`grindAmount${i+1}`);var Se=k(oe,2),$=k(y(Se),2);at($),H($,"id",`grindAmount${i+1}`),_(Se),_(ne);var M=k(ne,2),ie=y(M);H(ie,"for",`shotTime${i+1}`);var De=y(ie,!0);_(ie);var me=k(ie,2),w=k(y(me),2);at(w),H(w,"id",`shotTime${i+1}`),_(me),_(M);var P=k(M,2),se=y(P);H(se,"for",`notes${i+1}`);var je=k(se,2),de=k(y(je),2);br(de),H(de,"id",`notes${i+1}`),_(je),_(P),_(J),_(T),we((z,S)=>{fe(ee,`Iteration #${f(n).iteration??""}`),fe(te,z),fe(De,S)},[()=>c(f(n).datePosted),()=>e.drink&&e.drink.toLowerCase()==="coffee"?"Brew Time":"Shot Time"]),X("focus",ae,()=>h(i,"grindSetting")),X("blur",ae,()=>D(i,"grindSetting")),Ve(ae,()=>f(n).grindSetting,z=>f(n).grindSetting=z),X("focus",$,()=>h(i,"grindAmount")),X("blur",$,()=>D(i,"grindAmount")),Ve($,()=>f(n).grindAmount,z=>f(n).grindAmount=z),X("focus",w,()=>h(i,"shotTime")),X("blur",w,()=>D(i,"shotTime")),Ve(w,()=>f(n).shotTime,z=>f(n).shotTime=z),X("focus",de,()=>h(i,"notes")),X("blur",de,()=>D(i,"notes")),Ve(de,()=>f(n).notes,z=>f(n).notes=z),A(B,T)};Ie(l,B=>{f(n).cardID!==""&&B(E)})}A(o,v)}),_(b),_(p),A(t,p),Xe()}Tt(["click"]);var Zr=W('<div class="w-full flex justify-center items-center p-10"><div class="border-4 border-transparent border-t-primary-500 rounded-full w-10 h-10 animate-spin"></div></div>'),Kr=(t,e,a)=>{t.stopPropagation(),e(f(a).id)},Qr=(t,e,a)=>{t.key==="Enter"&&(t.stopPropagation(),e(f(a).id))},$r=W('<div class="flex-shrink-0"><span class="btn-icon variant-filled-primary cursor-pointer" tabindex="0" role="button" aria-label="Delete journey">delete</span></div>'),ea=W('<div class="py-0 px-3 rounded-md flex items-center justify-between w-full h-10"><div class="flex items-center space-x-3 overflow-hidden max-w-[calc(100%-4rem)]"><p class="whitespace-nowrap bg-primary-500/80 px-2 py-0.5 rounded text-white text-sm flex-shrink-0"> </p> <div class="h-3 border-r border-slate-300 flex-shrink-0"></div> <p class="overflow-hidden text-ellipsis whitespace-nowrap bg-primary-500/80 px-2 py-0.5 rounded text-white text-sm flex-1 min-w-0"> </p></div></div>'),ta=W('<div class="w-full"><div class="w-full rounded-md"><div class="flex items-center justify-center"><div class="flex items-center space-x-3 flex-wrap"><p class="whitespace-nowrap"> </p> <div class="h-4 border-r border-slate-300"></div> <p class="whitespace-nowrap"> </p> <div class="h-4 border-r border-slate-300"></div> <p class="whitespace-nowrap"> </p> <div class="h-4 border-r border-slate-300"></div> <p class="whitespace-nowrap"> </p></div></div></div> <div class="flex justify-center w-full"><div class="w-full md:w-3/4"><!></div></div></div>'),ra=W('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">No Notes</p> <p class="mt-2 text-tertiary-400">No coffee records have been created yet!?</p> <a href="/" class="btn variant-filled-primary mt-6">Get a setting recommendation</a></div>'),aa=W('<div class="flex-col w-full"><div class="flex justify-center items-center w-full p-0"><form class="toDoForm"><div class="flex gap-4 py-4"><p class="label-wrapper">Filter by:</p> <select id="drink" class="select w-full px-3 py-2 border rounded min-h-10 min-w-30"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <select id="grinder" class="select w-full px-3 py-2 border rounded min-h-10 min-w-30"><option>Select a grinder</option><option>DF 54</option><option>DF 64</option><option>Baratza Encore</option><option>Baratza Encore ESP</option><option>Baratza Sette 270</option><option>Baratza Virtuoso</option><option>Breville Smart Grinder Pro</option><option>Eureka Mignon Specialita</option><option>1Zpresso JX Pro</option></select></div></form></div> <div class="flex flex-row w-full justify-start overflow-hidden"><div class="flex flex-col items-start w-full overflow-hidden mx-auto md:w-3/4 md:mx-0"><!></div> <div class="hidden md:block w-1/4 relative"><div class="p-4"><img alt="Espresso Machine" class="w-full max-w-xs mx-auto drop-shadow-xl svelte-tk50mu"></div></div></div></div>');function na(t,e){Ue(e,!0);let a=Je(!0),r=Je(""),s=Je(""),d=!1;typeof window<"u"&&(d=window.innerWidth<768,window.addEventListener("resize",()=>{d=window.innerWidth<768}));let m=Je(Re([])),h=tt(()=>f(m).filter(w=>(f(r)?w.drink===f(r):!0)&&(f(s)?w.grinder===f(s):!0)));const D=["/images/espresso1.jpg","/images/espresso2.jpg","/images/espresso3.jpg"],x="/images/espresso_machine.png";let g=Je(-1);function O(w){return D[w%D.length]}function c(w){return{journeyID:w.id}}function p(w,P){return w?w.length>P?w.substring(0,P)+"...":w:""}function u(w){return d?p(w,16):p(w,40)}const C=async w=>{try{const P=await fetch("/journeyDelete",{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:w})});if(P.ok){const se=await P.json();console.log("Journey deleted:",se),b()}else{const se=await P.json();console.error("Failed to delete journey:",se.message)}}catch(P){console.error("Error deleting journey:",P)}},b=async()=>{Z(a,!0);try{const w=await fetch("/archiveSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(w.ok){const P=await w.json();console.log("Archive:",P),Z(m,Re(P.journeys||[])),console.log("journeys:",f(m))}else{const P=await w.json();console.error("Failed to fetch journeys:",P.message)}}catch(w){console.error("Error fetching journeys:",w)}finally{Z(a,!1)}},o=w=>{w.preventDefault()};Ir(()=>{b()});var n=aa(),i=y(n),v=y(i),l=y(v),E=k(y(l),2),B=y(E);B.value=((B.__value="")==null,"");var T=k(B);T.value=(T.__value="Espresso")==null?"":"Espresso";var F=k(T);F.value=(F.__value="Coffee")==null?"":"Coffee",_(E);var J=k(E,2),q=y(J);q.value=((q.__value="")==null,"");var Y=k(q);Y.value=(Y.__value="DF 54")==null?"":"DF 54";var K=k(Y);K.value=(K.__value="DF 64")==null?"":"DF 64";var ee=k(K);ee.value=(ee.__value="Baratza Encore")==null?"":"Baratza Encore";var U=k(ee);U.value=(U.__value="Baratza Encore ESP")==null?"":"Baratza Encore ESP";var te=k(U);te.value=(te.__value="Baratza Sette 270")==null?"":"Baratza Sette 270";var Q=k(te);Q.value=(Q.__value="Baratza Virtuoso")==null?"":"Baratza Virtuoso";var re=k(Q);re.value=(re.__value="Breville Smart Grinder Pro")==null?"":"Breville Smart Grinder Pro";var _e=k(re);_e.value=(_e.__value="Eureka Mignon Specialita")==null?"":"Eureka Mignon Specialita";var ae=k(_e);ae.value=(ae.__value="1Zpresso JX Pro")==null?"":"1Zpresso JX Pro",_(J),_(l),_(v),_(i);var ne=k(i,2),oe=y(ne),Se=y(oe);{var $=w=>{var P=Zr();A(w,P)},M=w=>{var P=ke(),se=xe(P);{var je=z=>{Jr(z,{class:"w-full overflow-hidden",children:(S,j)=>{var le=ke(),Oe=xe(le);Nt(Oe,17,()=>f(h),Ft,(Fe,R,ge)=>{const Ne=tt(()=>f(g)===ge);Hr(Fe,{get open(){return f(Ne)},class:"mb-0",children:(ce,ye)=>{var L=$r(),ue=y(L);ue.__click=[Kr,C,R],ue.__keydown=[Qr,C,R],_(L),A(ce,L)},$$slots:{default:!0,summary:(ce,ye)=>{var L=ea(),ue=y(L),Ee=y(ue),Le=y(Ee,!0);_(Ee);var Te=k(Ee,4),Ye=y(Te,!0);_(Te),_(ue),_(L),we((Be,Ze)=>{H(L,"style",`background-image: url(${Be??""}); background-size: cover; background-position: center;`),fe(Le,f(R).drink),fe(Ye,Ze)},[()=>O(ge),()=>u(f(R).coffeeBeans)]),A(ce,L)},content:(ce,ye)=>{var L=ta(),ue=y(L),Ee=y(ue),Le=y(Ee),Te=y(Le),Ye=y(Te,!0);_(Te);var Be=k(Te,4),Ze=y(Be,!0);_(Be);var Ke=k(Be,4),Jt=y(Ke,!0);_(Ke);var lt=k(Ke,4),Rt=y(lt,!0);_(lt),_(Le),_(Ee),_(ue);var dt=k(ue,2),ct=y(dt),qt=y(ct);const Lt=tt(()=>c(f(R)));Yr(qt,{get journeyData(){return f(Lt)},get drink(){return f(R).drink}}),_(ct),_(dt),_(L),we(()=>{fe(Ye,f(R).drink),fe(Ze,f(R).coffeeBeans),fe(Jt,f(R).grinder),fe(Rt,f(R).brewingDevice)}),A(ce,L)}}})}),A(S,le)},$$slots:{default:!0}})},de=z=>{var S=ra();A(z,S)};Ie(se,z=>{f(h).length>0?z(je):z(de,!1)},!0)}A(w,P)};Ie(Se,w=>{f(a)?w($):w(M,!1)})}_(oe);var ie=k(oe,2),De=y(ie),me=y(De);H(me,"src",x),_(De),_(ie),_(ne),_(n),X("submit",v,o),bt(E,()=>f(r),w=>Z(r,w)),bt(J,()=>f(s),w=>Z(s,w)),A(t,n),Xe()}Tt(["click","keydown"]);var oa=W("<!> <!>",1);function ma(t){var e=oa(),a=xe(e);Cr(a,{});var r=k(a,2);na(r,{}),A(t,e)}export{ma as component};
