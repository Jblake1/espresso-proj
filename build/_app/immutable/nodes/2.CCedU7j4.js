import{t as P,a as D,d as Ce}from"../chunks/DLZ7H7Fm.js";import"../chunks/BMgznbf7.js";import{G as ze,T as Be,N as Ae,U as De,V as r,X as t,W as v,g as e,R as d,Z as o,_ as L,aw as Me,a4 as Oe,Q as Le}from"../chunks/BOw1AeM4.js";import{l as qe,d as Ne,s as p,e as Re}from"../chunks/BReulVDI.js";import{b as Ie,a as Ve,p as c,i as I,s as Xe,c as Ze}from"../chunks/Db0Jo1o8.js";import{e as Fe,i as Te}from"../chunks/CZS3sv3T.js";import{s as Se,a as Ue,r as He,A as Qe}from"../chunks/DhzlJMNR.js";import{b as We}from"../chunks/QFNNfdoR.js";import{b as Ke}from"../chunks/Dn1lnk-c.js";import{o as Ge}from"../chunks/BMBHoIzy.js";function Je(l,i,u){if(l.multiple)return $e(l,i);for(var g of l.options){var _=_e(g);if(Ie(_,i)){g.selected=!0;return}}(!u||i!==void 0)&&(l.selectedIndex=-1)}function Ye(l,i){ze(()=>{var u=new MutationObserver(()=>{var g=l.__value;Je(l,g)});return u.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{u.disconnect()}})}function je(l,i,u=i){var g=!0;qe(l,"change",_=>{var m=_?"[selected]":":checked",w;if(l.multiple)w=[].map.call(l.querySelectorAll(m),_e);else{var A=l.querySelector(m)??l.querySelector("option:not([disabled])");w=A&&_e(A)}u(w)}),ze(()=>{var _=i();if(Je(l,_,g),g&&_===void 0){var m=l.querySelector(":checked");m!==null&&(_=_e(m),u(_))}l.__value=_,g=!1}),Ye(l)}function $e(l,i){for(var u of l.options)u.selected=~i.indexOf(_e(u))}function _e(l){return"__value"in l?l.__value:l.value}function Ee(l){if(l&&typeof l.select=="function"){const i=()=>l.select();return l.addEventListener("focus",i),{destroy:()=>l.removeEventListener("focus",i)}}}function er(l,i){Be(i,!0);let u=Ve(i,"value",15);const g=async()=>{try{const _=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:i.props.drink,brewingDevice:i.props.brewingDevice,grinder:i.props.grinder,grindSetting:i.props.grindSetting,coffeeBeans:i.props.coffeeBeans})});if(_.ok)alert("Setup saved successfully!"),u(u()==="1"?"0":"1");else{const m=await _.json();alert("Failed to save setup: "+m.message)}}catch(_){console.error("Error saving setup:",_),alert("An error occurred while saving the setup.")}};Ae(()=>{i.props&&i.props.drink&&i.props.brewingDevice&&i.props.grinder&&i.props.grindSetting&&i.props.coffeeBeans&&g()}),De()}var rr=(l,i)=>i(),tr=P('<div><button type="button" class="btn btn-sm variant-filled">Add to Notes</button></div>');function ke(l,i){Be(i,!0);const u=async()=>{try{const m=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:i.drink.drink,brewingDevice:i.drink.brewingDevice,grinder:i.drink.grinder,grindSetting:i.drink.grindSetting,coffeeBeans:i.drink.coffeeBeans})});if(m.ok)alert("Java setup sent to notes!");else{const w=await m.json();alert("Failed to archive setup: "+w.message)}}catch(m){console.error("Error archiving setup:",m),alert("An error occurred while archiving the setup.")}};var g=tr(),_=r(g);_.__click=[rr,u],t(g),D(l,g),De()}Ne(["click"]);var ar=P('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),ir=P('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),nr=P('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),sr=P('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),or=P('<div class="flex flex-col w-full items-start"><div class="flex flex-col sm:flex-row w-full items-start gap-4 mb-4"><!> <!></div> <div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div></div>');function lr(l,i){Be(i,!0);let u="/images/espresso1.jpg",g=v(""),_=v(""),m=v(""),w=v(""),A=v(""),V=v(""),W=v(""),C=v(""),K=v(""),X=v(""),j=v(""),q=v(""),Y=v(""),se=v(""),oe=v(""),$=v(""),le=v(""),de=v(""),ve=v(""),Z=v(""),Pe=()=>({drink:e(g),grinder:e(_),grindSetting:e(m),coffeeBeans:e(w),brewingDevice:e(A)}),me=()=>({drink:e(V),grinder:e(W),grindSetting:e(C),coffeeBeans:e(K),brewingDevice:e(X)}),be=()=>({drink:e(j),grinder:e(q),grindSetting:e(Y),coffeeBeans:e(se),brewingDevice:e(oe)}),xe=()=>({drink:e($),grinder:e(le),grindSetting:e(de),coffeeBeans:e(ve),brewingDevice:e(Z)}),ee=v(c({})),re=v(c({})),U=v(c({})),te=v(c({}));const ce=async()=>{try{const b=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(b.ok){const x=await b.json();console.log("Recent setups:",x);const s=x.setups;console.log("Setups:",s),s.length>0&&(o(g,c(s[0].drink)),o(_,c(s[0].grinder)),o(m,c(s[0].grindSetting)),o(w,c(s[0].coffeeBeans)),o(A,c(s[0].brewingDevice)),o(ee,c(Pe()))),s.length>1&&(o(V,c(s[1].drink)),o(W,c(s[1].grinder)),o(C,c(s[1].grindSetting)),o(K,c(s[1].coffeeBeans)),o(X,c(s[1].brewingDevice)),o(re,c(me()))),s.length>2&&(o(j,c(s[2].drink)),o(q,c(s[2].grinder)),o(Y,c(s[2].grindSetting)),o(se,c(s[2].coffeeBeans)),o(oe,c(s[2].brewingDevice)),o(U,c(be()))),s.length>3&&(o($,c(s[3].drink)),o(le,c(s[3].grinder)),o(de,c(s[3].grindSetting)),o(ve,c(s[3].coffeeBeans)),o(Z,c(s[3].brewingDevice)),o(te,c(xe())))}else{const x=await b.json();console.error("Failed to fetch recent setups:",x.message)}}catch(b){console.error("Error fetching recent setups:",b)}};Ge(()=>{ce()}),Ae(()=>{i.trigger&&ce()});var H=or(),R=r(H),ae=r(R);{var ue=b=>{var x=ar(),s=r(x),h=r(s);Se(h,"style",`background-image: url('${u}');`);var E=r(h),y=r(E),T=r(y,!0);t(y);var G=d(y,2),O=r(G);t(G),t(E),t(h);var S=d(h,2),F=r(S);t(S);var k=d(S,2),N=r(k);t(k);var z=d(k,2),B=r(z),a=r(B);t(B);var n=d(B,2),f=r(n);ke(f,{get drink(){return e(ee)}}),t(n),t(z),t(s),t(x),L(()=>{p(T,e(w)),p(O,`| ${e(g)??""}`),p(F,`Brewing Device: ${e(A)??""}`),p(N,`Grinder: ${e(_)??""}`),p(a,`Grind Setting: ${e(m)??""}`)}),D(b,x)};I(ae,b=>{e(g)!==""&&b(ue)})}var we=d(ae,2);{var ie=b=>{var x=ir(),s=r(x),h=r(s);Se(h,"style",`background-image: url('${u}');`);var E=r(h),y=r(E),T=r(y,!0);t(y);var G=d(y,2),O=r(G);t(G),t(E),t(h);var S=d(h,2),F=r(S);t(S);var k=d(S,2),N=r(k);t(k);var z=d(k,2),B=r(z),a=r(B);t(B);var n=d(B,2),f=r(n);ke(f,{get drink(){return e(re)}}),t(n),t(z),t(s),t(x),L(()=>{p(T,e(K)),p(O,`| ${e(V)??""}`),p(F,`Brewing Device: ${e(X)??""}`),p(N,`Grinder: ${e(W)??""}`),p(a,`Grind Setting: ${e(C)??""}`)}),D(b,x)};I(we,b=>{e(V)!==""&&b(ie)})}t(R);var ne=d(R,2),he=r(ne);{var ye=b=>{var x=nr(),s=r(x),h=r(s);Se(h,"style",`background-image: url('${u}');`);var E=r(h),y=r(E),T=r(y,!0);t(y);var G=d(y,2),O=r(G);t(G),t(E),t(h);var S=d(h,2),F=r(S);t(S);var k=d(S,2),N=r(k);t(k);var z=d(k,2),B=r(z),a=r(B);t(B);var n=d(B,2),f=r(n);ke(f,{get drink(){return e(U)}}),t(n),t(z),t(s),t(x),L(()=>{p(T,e(se)),p(O,`| ${e(j)??""}`),p(F,`Brewing Device: ${e(oe)??""}`),p(N,`Grinder: ${e(q)??""}`),p(a,`Grind Setting: ${e(Y)??""}`)}),D(b,x)};I(he,b=>{e(j)!==""&&b(ye)})}var Q=d(he,2);{var fe=b=>{var x=sr(),s=r(x),h=r(s);Se(h,"style",`background-image: url('${u}');`);var E=r(h),y=r(E),T=r(y,!0);t(y);var G=d(y,2),O=r(G);t(G),t(E),t(h);var S=d(h,2),F=r(S);t(S);var k=d(S,2),N=r(k);t(k);var z=d(k,2),B=r(z),a=r(B);t(B);var n=d(B,2),f=r(n);ke(f,{get drink(){return e(te)}}),t(n),t(z),t(s),t(x),L(()=>{p(T,e(ve)),p(O,`| ${e($)??""}`),p(F,`Brewing Device: ${e(Z)??""}`),p(N,`Grinder: ${e(le)??""}`),p(a,`Grind Setting: ${e(de)??""}`)}),D(b,x)};I(Q,b=>{e($)!==""&&b(fe)})}t(ne),t(H),D(l,H),De()}var dr=P("<option> </option>"),vr=P("<option> </option>"),cr=P('<button type="button" class="btn variant-filled"><!></button>'),ur=P("<div></div>"),fr=P('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),pr=P('<div class="RecentSetups svelte-lbz1xu"><!></div>'),gr=P('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),_r=P('<div class="flex flex-col items-start gap-4 p-4 md:flex-row md:gap-6 md:p-6"><div class="flex flex-col items-start gap-4"><form class="toDoForm svelte-lbz1xu"><div class="flex justify-center w-full"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col items-start gap-4 px-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="drink" class="label__lg font-semibold">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 border rounded min-h-10 min-w-30"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="brewing_device" class="label__lg font-semibold">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 border rounded min-w-30 min-h-10"><option>Select a device</option><!></select></div> <div class="flex flex-col items-start gap-4 px-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="grinder" class="label__lg font-semibold">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 border rounded min-w-30 min-h-10"><option>Select a grinder</option><!></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="coffeeBeans" class="label__lg font-semibold">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg min-w-30 min-h-10 svelte-lbz1xu" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div></div></div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-lbz1xu"><!></div></div> <!></div>');function mr(l,i){Be(i,!0);const[u,g]=Xe(),_=()=>Ze(Y,"$userStore",u);let m=v(""),w=v(""),A=v(""),V=v(""),W=v(""),C=v(""),K=v(""),X=v(c({})),j=v(""),q=v(!1);const Y=Me(null);let se=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],oe=["Pour Over","French Press","Drip Machine","Cold Brew"],$=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],le=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],de=Oe(()=>e(w)==="Espresso"?se:e(w)==="Coffee"?oe:[]),ve=Oe(()=>e(w)==="Espresso"?le:e(w)==="Coffee"?$:[]);Ae(()=>{e(w)&&o(m,"")});let Z=v(""),Pe=()=>({drink:e(w),brewingDevice:e(m),coffeeBeans:e(C),grinder:e(A),grindSetting:e(V)}),me,be;const xe=async()=>{if(o(j,""),!e(w)){o(j,"Please select a drink type");return}if(!e(m)){o(j,"Please select a brewing device");return}if(!e(A)){o(j,"Please select a grinder");return}if(!e(C)||e(C).trim()===""){o(j,"Please enter coffee bean information");return}o(q,!0);try{const a=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(m),drink:e(w),grinder:e(A),coffee_beans:e(C)})});if(a.ok){const n=await a.json();console.log("Received data:",n);const f=n.advice;console.log("Advice:",f),o(V,c(f.grind_recommendation)),o(W,c(f.bean_segmentation)),console.log("Grind Segment:",e(W)),o(K,c(f.bean_analysis)),console.log("Bean Description:",e(K)),o(X,c(Pe()))}else throw new Error("Network response was not ok")}catch(a){console.error("There was a problem with the fetch operation:",a),o(j,"Error submitting data. Please try again.")}finally{o(q,!1)}};Ge(()=>i.autofocus&&me.focus&&me.focus()),Ge(()=>{const a=localStorage.getItem("user");if(a)try{Y.set(JSON.parse(a))}catch(n){console.error("Error parsing localStorage user data:",n)}});var ee=_r(),re=r(ee),U=r(re),te=r(U),ce=r(te),H=r(ce),R=d(r(H),2),ae=r(R);ae.value=((ae.__value="")==null,"");var ue=d(ae);ue.value=(ue.__value="Espresso")==null?"":"Espresso";var we=d(ue);we.value=(we.__value="Coffee")==null?"":"Coffee",t(R);var ie=d(R,4),ne=r(ie);ne.value=((ne.__value="")==null,"");var he=d(ne);Fe(he,17,()=>e(de),Te,(a,n)=>{var f=dr(),pe={},J=r(f,!0);t(f),L(()=>{pe!==(pe=e(n))&&(f.value=(f.__value=e(n))==null?"":e(n)),p(J,e(n))}),D(a,f)}),t(ie),t(H);var ye=d(H,2),Q=d(r(ye),2),fe=r(Q);fe.value=((fe.__value="")==null,"");var b=d(fe);Fe(b,17,()=>e(ve),Te,(a,n,f,pe)=>{var J=vr(),M={},ge=r(J,!0);t(J),L(()=>{M!==(M=e(n))&&(J.value=(J.__value=e(n))==null?"":e(n)),p(ge,e(n))}),D(a,J)}),t(Q);var x=d(Q,4),s=r(x);He(s),ze(()=>We(s,()=>e(C),a=>o(C,a))),Ke(s,a=>be=a,()=>be),Ue(s,a=>Ee==null?void 0:Ee(a));var h=d(s,2),E=r(h);t(h),t(x),t(ye),t(ce),t(te);var y=d(te,2);{var T=a=>{var n=cr();n.__click=xe;var f=r(n);{var pe=M=>{var ge=Ce("Submitting...");D(M,ge)},J=M=>{var ge=Ce("Submit");D(M,ge)};I(f,M=>{e(q)?M(pe):M(J,!1)})}t(n),L(()=>n.disabled=e(q)),D(a,n)},G=a=>{var n=ur();D(a,n)};I(y,a=>{_()?a(T):a(G,!1)})}t(U);var O=d(U,2);{var S=a=>{var n=fr(),f=r(n,!0);t(n),L(()=>p(f,e(j))),D(a,n)};I(O,a=>{e(j)&&a(S)})}var F=d(O,2),k=r(F);er(k,{get props(){return e(X)},get value(){return e(Z)},set value(a){o(Z,c(a))}}),t(F),t(re);var N=d(re,2);{var z=a=>{var n=pr(),f=r(n);lr(f,{get props(){return e(X)},get trigger(){return e(Z)}}),t(n),D(a,n)},B=a=>{var n=gr();D(a,n)};I(N,a=>{_()?a(z):a(B,!1)})}t(ee),L(()=>{ie.disabled=!e(w),Q.disabled=!e(w),p(E,`${e(C).length??""}/40`)}),Re("submit",U,xe),je(R,()=>e(w),a=>o(w,a)),je(ie,()=>e(m),a=>o(m,a)),je(Q,()=>e(A),a=>o(A,a)),D(l,ee),De(),g()}Ne(["click"]);var br=P("<!> <!>",1);function Er(l){var i=br(),u=Le(i);Qe(u,{});var g=d(u,2);mr(g,{}),D(l,i)}export{Er as component};
