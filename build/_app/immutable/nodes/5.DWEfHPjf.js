import{t as k,a as y,d as ze}from"../chunks/C3hLw0IL.js";import"../chunks/DNeJU8Y2.js";import{Y as ke,a3 as Ge,_ as Be,T as r,V as t,W as l,Z as Ee,g as e,U as o,Q as n,a0 as L,G as Oe,aK as Ne,a7 as Ce,X as Je}from"../chunks/CnD81IVH.js";import{d as Fe,s as p,e as Me}from"../chunks/BZ88qr3N.js";import{b as Le,p as v,a as V}from"../chunks/CEGQyTs3.js";import{e as Ae,i as Te}from"../chunks/B1lN9cLK.js";import{s as ye,a as Re,r as Ie,A as Ve}from"../chunks/DuC99OB8.js";import{b as Xe}from"../chunks/CoylPWrs.js";import{b as Pe}from"../chunks/DAFnirU5.js";import{b as Ze}from"../chunks/Dr9tYfIG.js";import{s as Ue,a as Ke}from"../chunks/C42sHZ21.js";function je(S){if(S&&typeof S.select=="function"){const d=()=>S.select();return S.addEventListener("focus",d),{destroy:()=>S.removeEventListener("focus",d)}}}function Qe(S,d){ke(d,!0);let B=Le(d,"value",15);const D=async()=>{try{const P=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:d.props.drink,brewingDevice:d.props.brewingDevice,grinder:d.props.grinder,grindSetting:d.props.grindSetting,coffeeBeans:d.props.coffeeBeans})});if(P.ok)alert("Setup saved successfully!"),B(B()==="1"?"0":"1");else{const m=await P.json();alert("Failed to save setup: "+m.message)}}catch(P){console.error("Error saving setup:",P),alert("An error occurred while saving the setup.")}};Ge(()=>{d.props&&d.props.drink&&d.props.brewingDevice&&d.props.grinder&&d.props.grindSetting&&d.props.coffeeBeans&&D()}),Be()}var We=(S,d)=>d(),Ye=k('<div><button type="button" class="btn btn-sm variant-filled">Add to Notes</button></div>');function Se(S,d){ke(d,!0);const B=async()=>{try{const m=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:d.drink.drink,brewingDevice:d.drink.brewingDevice,grinder:d.drink.grinder,grindSetting:d.drink.grindSetting,coffeeBeans:d.drink.coffeeBeans})});if(m.ok)alert("Java setup sent to notes!");else{const _=await m.json();alert("Failed to archive setup: "+_.message)}}catch(m){console.error("Error archiving setup:",m),alert("An error occurred while archiving the setup.")}};var D=Ye(),P=r(D);P.__click=[We,B],t(D),y(S,D),Be()}Fe(["click"]);var qe=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),He=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),$e=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),er=k('<div class="setup svelte-1jiuw5u"><div class="card svelte-1jiuw5u"><header class="card-header py-5 px-3 bg-cover bg-center svelte-1jiuw5u"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),rr=k('<div class="flex flex-col w-full items-start"><div class="flex flex-col sm:flex-row w-full items-start gap-4 mb-4"><!> <!></div> <div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div></div>');function tr(S,d){ke(d,!0);let B="/images/espresso1.jpg",D=l(""),P=l(""),m=l(""),_=l(""),F=l(""),X=l(""),Y=l(""),C=l(""),q=l(""),Z=l(""),j=l(""),R=l(""),H=l(""),ne=l(""),oe=l(""),$=l(""),le=l(""),de=l(""),ve=l(""),U=l(""),De=()=>({drink:e(D),grinder:e(P),grindSetting:e(m),coffeeBeans:e(_),brewingDevice:e(F)}),_e=()=>({drink:e(X),grinder:e(Y),grindSetting:e(C),coffeeBeans:e(q),brewingDevice:e(Z)}),me=()=>({drink:e(j),grinder:e(R),grindSetting:e(H),coffeeBeans:e(ne),brewingDevice:e(oe)}),be=()=>({drink:e($),grinder:e(le),grindSetting:e(de),coffeeBeans:e(ve),brewingDevice:e(U)}),ee=l(v({})),re=l(v({})),K=l(v({})),te=l(v({}));const ce=async()=>{try{const f=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const u=await f.json();console.log("Recent setups:",u);const s=u.setups;console.log("Setups:",s),s.length>0&&(n(D,v(s[0].drink)),n(P,v(s[0].grinder)),n(m,v(s[0].grindSetting)),n(_,v(s[0].coffeeBeans)),n(F,v(s[0].brewingDevice)),n(ee,v(De()))),s.length>1&&(n(X,v(s[1].drink)),n(Y,v(s[1].grinder)),n(C,v(s[1].grindSetting)),n(q,v(s[1].coffeeBeans)),n(Z,v(s[1].brewingDevice)),n(re,v(_e()))),s.length>2&&(n(j,v(s[2].drink)),n(R,v(s[2].grinder)),n(H,v(s[2].grindSetting)),n(ne,v(s[2].coffeeBeans)),n(oe,v(s[2].brewingDevice)),n(K,v(me()))),s.length>3&&(n($,v(s[3].drink)),n(le,v(s[3].grinder)),n(de,v(s[3].grindSetting)),n(ve,v(s[3].coffeeBeans)),n(U,v(s[3].brewingDevice)),n(te,v(be())))}else{const u=await f.json();console.error("Failed to fetch recent setups:",u.message)}}catch(f){console.error("Error fetching recent setups:",f)}};Ee(()=>{ce()}),Ge(()=>{d.trigger&&ce()});var Q=rr(),I=r(Q),ae=r(I);{var pe=f=>{var u=qe(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),O=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),N=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),c=r(i);Se(c,{get drink(){return e(ee)}}),t(i),t(z),t(s),t(u),L(()=>{p(O,e(_)),p(A,`| ${e(D)??""}`),p(T,`Brewing Device: ${e(F)??""}`),p(N,`Grinder: ${e(P)??""}`),p(a,`Grind Setting: ${e(m)??""}`)}),y(f,u)};V(ae,f=>{e(D)!==""&&f(pe)})}var xe=o(ae,2);{var ie=f=>{var u=He(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),O=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),N=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),c=r(i);Se(c,{get drink(){return e(re)}}),t(i),t(z),t(s),t(u),L(()=>{p(O,e(q)),p(A,`| ${e(X)??""}`),p(T,`Brewing Device: ${e(Z)??""}`),p(N,`Grinder: ${e(Y)??""}`),p(a,`Grind Setting: ${e(C)??""}`)}),y(f,u)};V(xe,f=>{e(X)!==""&&f(ie)})}t(I);var se=o(I,2),we=r(se);{var he=f=>{var u=$e(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),O=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),N=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),c=r(i);Se(c,{get drink(){return e(K)}}),t(i),t(z),t(s),t(u),L(()=>{p(O,e(ne)),p(A,`| ${e(j)??""}`),p(T,`Brewing Device: ${e(oe)??""}`),p(N,`Grinder: ${e(R)??""}`),p(a,`Grind Setting: ${e(H)??""}`)}),y(f,u)};V(we,f=>{e(j)!==""&&f(he)})}var W=o(we,2);{var fe=f=>{var u=er(),s=r(u),g=r(s);ye(g,"style",`background-image: url('${B}');`);var E=r(g),b=r(E),O=r(b,!0);t(b);var G=o(b,2),A=r(G);t(G),t(E),t(g);var x=o(g,2),T=r(x);t(x);var w=o(x,2),N=r(w);t(w);var z=o(w,2),h=r(z),a=r(h);t(h);var i=o(h,2),c=r(i);Se(c,{get drink(){return e(te)}}),t(i),t(z),t(s),t(u),L(()=>{p(O,e(ve)),p(A,`| ${e($)??""}`),p(T,`Brewing Device: ${e(U)??""}`),p(N,`Grinder: ${e(le)??""}`),p(a,`Grind Setting: ${e(de)??""}`)}),y(f,u)};V(W,f=>{e($)!==""&&f(fe)})}t(se),t(Q),y(S,Q),Be()}var ar=k("<option> </option>"),ir=k("<option> </option>"),sr=k('<button type="button" class="btn variant-filled"><!></button>'),nr=k("<div></div>"),or=k('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),lr=k('<div class="RecentSetups svelte-lbz1xu"><!></div>'),dr=k('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),vr=k('<div class="flex flex-col items-start gap-4 p-4 md:flex-row md:gap-6 md:p-6"><div class="flex flex-col items-start gap-4"><form class="toDoForm svelte-lbz1xu"><div class="flex justify-center w-full"><div class="grid grid-cols-2 gap-4"><div class="flex flex-col items-start gap-4 px-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="drink" class="label__lg font-semibold">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 border rounded min-h-10 min-w-30"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="brewing_device" class="label__lg font-semibold">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 border rounded min-w-30 min-h-10"><option>Select a device</option><!></select></div> <div class="flex flex-col items-start gap-4 px-4"><h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="grinder" class="label__lg font-semibold">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 border rounded min-w-30 min-h-10"><option>Select a grinder</option><!></select> <h2 class="label-wrapper min-w-40 min-h-6 svelte-lbz1xu"><label for="coffeeBeans" class="label__lg font-semibold">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg min-w-30 min-h-10 svelte-lbz1xu" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div></div></div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-lbz1xu"><!></div></div> <!></div>');function cr(S,d){ke(d,!0);const[B,D]=Ue(),P=()=>Ke(H,"$userStore",B);let m=l(""),_=l(""),F=l(""),X=l(""),Y=l(""),C=l(""),q=l(""),Z=l(v({})),j=l(""),R=l(!1);const H=Ne(null);let ne=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],oe=["Pour Over","French Press","Drip Machine","Cold Brew"],$=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],le=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],de=Ce(()=>e(_)==="Espresso"?ne:e(_)==="Coffee"?oe:[]),ve=Ce(()=>e(_)==="Espresso"?le:e(_)==="Coffee"?$:[]);Ge(()=>{e(_)&&n(m,"")});let U=l(""),De=()=>({drink:e(_),brewingDevice:e(m),coffeeBeans:e(C),grinder:e(F),grindSetting:e(X)}),_e,me;const be=async()=>{if(n(j,""),!e(_)){n(j,"Please select a drink type");return}if(!e(m)){n(j,"Please select a brewing device");return}if(!e(F)){n(j,"Please select a grinder");return}if(!e(C)||e(C).trim()===""){n(j,"Please enter coffee bean information");return}n(R,!0);try{const a=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(m),drink:e(_),grinder:e(F),coffee_beans:e(C)})});if(a.ok){const i=await a.json();console.log("Received data:",i);const c=i.advice;console.log("Advice:",c),n(X,v(c.grind_recommendation)),n(Y,v(c.bean_segmentation)),console.log("Grind Segment:",e(Y)),n(q,v(c.bean_analysis)),console.log("Bean Description:",e(q)),n(Z,v(De()))}else throw new Error("Network response was not ok")}catch(a){console.error("There was a problem with the fetch operation:",a),n(j,"Error submitting data. Please try again.")}finally{n(R,!1)}};Ee(()=>d.autofocus&&_e.focus&&_e.focus()),Ee(()=>{const a=localStorage.getItem("user");if(a)try{H.set(JSON.parse(a))}catch(i){console.error("Error parsing localStorage user data:",i)}});var ee=vr(),re=r(ee),K=r(re),te=r(K),ce=r(te),Q=r(ce),I=o(r(Q),2),ae=r(I);ae.value=((ae.__value="")==null,"");var pe=o(ae);pe.value=(pe.__value="Espresso")==null?"":"Espresso";var xe=o(pe);xe.value=(xe.__value="Coffee")==null?"":"Coffee",t(I);var ie=o(I,4),se=r(ie);se.value=((se.__value="")==null,"");var we=o(se);Ae(we,17,()=>e(de),Te,(a,i)=>{var c=ar(),ue={},J=r(c,!0);t(c),L(()=>{ue!==(ue=e(i))&&(c.value=(c.__value=e(i))==null?"":e(i)),p(J,e(i))}),y(a,c)}),t(ie),t(Q);var he=o(Q,2),W=o(r(he),2),fe=r(W);fe.value=((fe.__value="")==null,"");var f=o(fe);Ae(f,17,()=>e(ve),Te,(a,i,c,ue)=>{var J=ir(),M={},ge=r(J,!0);t(J),L(()=>{M!==(M=e(i))&&(J.value=(J.__value=e(i))==null?"":e(i)),p(ge,e(i))}),y(a,J)}),t(W);var u=o(W,4),s=r(u);Ie(s),Oe(()=>Xe(s,()=>e(C),a=>n(C,a))),Ze(s,a=>me=a,()=>me),Re(s,a=>je==null?void 0:je(a));var g=o(s,2),E=r(g);t(g),t(u),t(he),t(ce),t(te);var b=o(te,2);{var O=a=>{var i=sr();i.__click=be;var c=r(i);{var ue=M=>{var ge=ze("Submitting...");y(M,ge)},J=M=>{var ge=ze("Submit");y(M,ge)};V(c,M=>{e(R)?M(ue):M(J,!1)})}t(i),L(()=>i.disabled=e(R)),y(a,i)},G=a=>{var i=nr();y(a,i)};V(b,a=>{P()?a(O):a(G,!1)})}t(K);var A=o(K,2);{var x=a=>{var i=or(),c=r(i,!0);t(i),L(()=>p(c,e(j))),y(a,i)};V(A,a=>{e(j)&&a(x)})}var T=o(A,2),w=r(T);Qe(w,{get props(){return e(Z)},get value(){return e(U)},set value(a){n(U,v(a))}}),t(T),t(re);var N=o(re,2);{var z=a=>{var i=lr(),c=r(i);tr(c,{get props(){return e(Z)},get trigger(){return e(U)}}),t(i),y(a,i)},h=a=>{var i=dr();y(a,i)};V(N,a=>{P()?a(z):a(h,!1)})}t(ee),L(()=>{ie.disabled=!e(_),W.disabled=!e(_),p(E,`${e(C).length??""}/40`)}),Me("submit",K,be),Pe(I,()=>e(_),a=>n(_,a)),Pe(ie,()=>e(m),a=>n(m,a)),Pe(W,()=>e(F),a=>n(F,a)),y(S,ee),Be(),D()}Fe(["click"]);var pr=k("<!> <!>",1);function kr(S){var d=pr(),B=Je(d);Ve(B,{});var D=o(B,2);cr(D,{}),y(S,d)}export{kr as component};
