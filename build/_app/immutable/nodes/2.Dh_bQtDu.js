import{t as E,a as P,d as Ae}from"../chunks/DLZ7H7Fm.js";import"../chunks/BMgznbf7.js";import{G as Ge,T as he,N as je,U as we,V as r,X as t,W as v,g as e,R as d,Z as n,_ as R,aw as ze,a4 as Ce,Q as Me}from"../chunks/BOw1AeM4.js";import{l as Je,d as Te,s as m}from"../chunks/BReulVDI.js";import{b as Le,a as qe,p as c,i as X,s as Re,c as Ie}from"../chunks/Db0Jo1o8.js";import{e as Oe,i as Fe}from"../chunks/CZS3sv3T.js";import{s as xe,a as Ve,r as Xe,A as Ze}from"../chunks/DiGUTfIR.js";import{b as Ue}from"../chunks/QFNNfdoR.js";import{b as He}from"../chunks/Dn1lnk-c.js";import{o as Ee}from"../chunks/BMBHoIzy.js";function Ne(o,a,p){if(o.multiple)return We(o,a);for(var u of o.options){var g=ge(u);if(Le(g,a)){u.selected=!0;return}}(!p||a!==void 0)&&(o.selectedIndex=-1)}function Qe(o,a){Ge(()=>{var p=new MutationObserver(()=>{var u=o.__value;Ne(o,u)});return p.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{p.disconnect()}})}function De(o,a,p=a){var u=!0;Je(o,"change",g=>{var _=g?"[selected]":":checked",b;if(o.multiple)b=[].map.call(o.querySelectorAll(_),ge);else{var G=o.querySelector(_)??o.querySelector("option:not([disabled])");b=G&&ge(G)}p(b)}),Ge(()=>{var g=a();if(Ne(o,g,u),u&&g===void 0){var _=o.querySelector(":checked");_!==null&&(g=ge(_),p(g))}o.__value=g,u=!1}),Qe(o)}function We(o,a){for(var p of o.options)p.selected=~a.indexOf(ge(p))}function ge(o){return"__value"in o?o.__value:o.value}function Pe(o){if(o&&typeof o.select=="function"){const a=()=>o.select();return o.addEventListener("focus",a),{destroy:()=>o.removeEventListener("focus",a)}}}function Ke(o,a){he(a,!0);let p=qe(a,"value",15);const u=async()=>{try{const g=await fetch("/saveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.props.drink,brewingDevice:a.props.brewingDevice,grinder:a.props.grinder,grindSetting:a.props.grindSetting,coffeeBeans:a.props.coffeeBeans})});if(g.ok)alert("Setup saved successfully!"),p(p()==="1"?"0":"1");else{const _=await g.json();alert("Failed to save setup: "+_.message)}}catch(g){console.error("Error saving setup:",g),alert("An error occurred while saving the setup.")}};je(()=>{a.props&&a.props.drink&&a.props.brewingDevice&&a.props.grinder&&a.props.grindSetting&&a.props.coffeeBeans&&u()}),we()}var Ye=(o,a)=>a(),$e=E('<div><button type="button" class="btn btn-sm variant-filled">Add to Notes</button></div>');function ye(o,a){he(a,!0);const p=async()=>{try{const _=await fetch("/archiveSetup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({drink:a.drink.drink,brewingDevice:a.drink.brewingDevice,grinder:a.drink.grinder,grindSetting:a.drink.grindSetting,coffeeBeans:a.drink.coffeeBeans})});if(_.ok)alert("Setup archived successfully!");else{const b=await _.json();alert("Failed to archive setup: "+b.message)}}catch(_){console.error("Error archiving setup:",_),alert("An error occurred while archiving the setup.")}};var u=$e(),g=r(u);g.__click=[Ye,p],t(u),P(o,u),we()}Te(["click"]);var er=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),rr=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),tr=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),ar=E('<div class="setup svelte-oad38y"><div class="card svelte-oad38y"><header class="card-header py-5 px-3 bg-cover bg-center svelte-oad38y"><div class="font-medium text-white drop-shadow-md bg-primary-500/80 rounded px-2 py-1 w-auto inline-block"><span class="truncate inline-block max-w-[150px] align-middle"> </span> <span class="align-middle"> </span></div></header> <section class="py-1 px-3"> </section> <section class="py-1 px-3"> </section> <div class="flex flex-row items-center justify-between py-2 px-3 cardfooter"><footer class="card-footer py-2"> </footer> <div class="ArchiveButton"><!></div></div></div></div>'),ir=E('<div class="flex flex-col w-full items-start p-2.5"><div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div> <div class="flex flex-col sm:flex-row w-full items-start p-2.5 gap-4 mb-4"><!> <!></div></div>');function sr(o,a){he(a,!0);let p="/images/espresso1.jpg",u=v(""),g=v(""),_=v(""),b=v(""),G=v(""),N=v(""),I=v(""),F=v(""),Z=v(""),C=v(""),T=v(""),O=v(""),K=v(""),ie=v(""),se=v(""),Y=v(""),ne=v(""),oe=v(""),le=v(""),U=v(""),Se=()=>({drink:e(u),grinder:e(g),grindSetting:e(_),coffeeBeans:e(b),brewingDevice:e(G)}),_e=()=>({drink:e(N),grinder:e(I),grindSetting:e(F),coffeeBeans:e(Z),brewingDevice:e(C)}),be=()=>({drink:e(T),grinder:e(O),grindSetting:e(K),coffeeBeans:e(ie),brewingDevice:e(se)}),de=()=>({drink:e(Y),grinder:e(ne),grindSetting:e(oe),coffeeBeans:e(le),brewingDevice:e(U)}),$=v(c({})),ee=v(c({})),re=v(c({})),te=v(c({}));const H=async()=>{try{const f=await fetch("/getSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const x=await f.json();console.log("Recent setups:",x);const l=x.setups;console.log("Setups:",l),l.length>0&&(n(u,c(l[0].drink)),n(g,c(l[0].grinder)),n(_,c(l[0].grindSetting)),n(b,c(l[0].coffeeBeans)),n(G,c(l[0].brewingDevice)),n($,c(Se()))),l.length>1&&(n(N,c(l[1].drink)),n(I,c(l[1].grinder)),n(F,c(l[1].grindSetting)),n(Z,c(l[1].coffeeBeans)),n(C,c(l[1].brewingDevice)),n(ee,c(_e()))),l.length>2&&(n(T,c(l[2].drink)),n(O,c(l[2].grinder)),n(K,c(l[2].grindSetting)),n(ie,c(l[2].coffeeBeans)),n(se,c(l[2].brewingDevice)),n(re,c(be()))),l.length>3&&(n(Y,c(l[3].drink)),n(ne,c(l[3].grinder)),n(oe,c(l[3].grindSetting)),n(le,c(l[3].coffeeBeans)),n(U,c(l[3].brewingDevice)),n(te,c(de())))}else{const x=await f.json();console.error("Failed to fetch recent setups:",x.message)}}catch(f){console.error("Error fetching recent setups:",f)}};Ee(()=>{H()}),je(()=>{a.trigger&&H()});var Q=ir(),W=r(Q),ve=r(W);{var ae=f=>{var x=er(),l=r(x),y=r(l);xe(y,"style",`background-image: url('${p}');`);var j=r(y),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(y);var S=d(y,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),s=r(i),h=r(s);t(s);var B=d(s,2),D=r(B);ye(D,{get drink(){return e($)}}),t(B),t(i),t(l),t(x),R(()=>{m(z,e(b)),m(M,`| ${e(u)??""}`),m(J,`Brewing Device: ${e(G)??""}`),m(L,`Grinder: ${e(g)??""}`),m(h,`Grind Setting: ${e(_)??""}`)}),P(f,x)};X(ve,f=>{e(u)!==""&&f(ae)})}var ce=d(ve,2);{var ke=f=>{var x=rr(),l=r(x),y=r(l);xe(y,"style",`background-image: url('${p}');`);var j=r(y),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(y);var S=d(y,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),s=r(i),h=r(s);t(s);var B=d(s,2),D=r(B);ye(D,{get drink(){return e(ee)}}),t(B),t(i),t(l),t(x),R(()=>{m(z,e(Z)),m(M,`| ${e(N)??""}`),m(J,`Brewing Device: ${e(C)??""}`),m(L,`Grinder: ${e(I)??""}`),m(h,`Grind Setting: ${e(F)??""}`)}),P(f,x)};X(ce,f=>{e(N)!==""&&f(ke)})}t(W);var pe=d(W,2),V=r(pe);{var fe=f=>{var x=tr(),l=r(x),y=r(l);xe(y,"style",`background-image: url('${p}');`);var j=r(y),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(y);var S=d(y,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),s=r(i),h=r(s);t(s);var B=d(s,2),D=r(B);ye(D,{get drink(){return e(re)}}),t(B),t(i),t(l),t(x),R(()=>{m(z,e(ie)),m(M,`| ${e(T)??""}`),m(J,`Brewing Device: ${e(se)??""}`),m(L,`Grinder: ${e(O)??""}`),m(h,`Grind Setting: ${e(K)??""}`)}),P(f,x)};X(V,f=>{e(T)!==""&&f(fe)})}var Be=d(V,2);{var me=f=>{var x=ar(),l=r(x),y=r(l);xe(y,"style",`background-image: url('${p}');`);var j=r(y),w=r(j),z=r(w,!0);t(w);var A=d(w,2),M=r(A);t(A),t(j),t(y);var S=d(y,2),J=r(S);t(S);var k=d(S,2),L=r(k);t(k);var i=d(k,2),s=r(i),h=r(s);t(s);var B=d(s,2),D=r(B);ye(D,{get drink(){return e(te)}}),t(B),t(i),t(l),t(x),R(()=>{m(z,e(le)),m(M,`| ${e(Y)??""}`),m(J,`Brewing Device: ${e(U)??""}`),m(L,`Grinder: ${e(ne)??""}`),m(h,`Grind Setting: ${e(oe)??""}`)}),P(f,x)};X(Be,f=>{e(Y)!==""&&f(me)})}t(pe),t(Q),P(o,Q),we()}const nr=async(o,a,p,u,g,_,b,G,N,I,F,Z)=>{if(n(a,""),!e(p)){n(a,"Please select a drink type");return}if(!e(u)){n(a,"Please select a brewing device");return}if(!e(g)){n(a,"Please select a grinder");return}if(!e(_)||e(_).trim()===""){n(a,"Please enter coffee bean information");return}n(b,!0);try{const C=await fetch("/recommendation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({brewing_device:e(u),drink:e(p),grinder:e(g),coffee_beans:e(_)})});if(C.ok){const T=await C.json();console.log("Received data:",T);const O=T.advice;console.log("Advice:",O),n(G,c(O.grind_recommendation)),n(N,c(O.bean_segmentation)),console.log("Grind Segment:",e(N)),n(I,c(O.bean_analysis)),console.log("Bean Description:",e(I)),n(F,c(Z()))}else throw new Error("Network response was not ok")}catch(C){console.error("There was a problem with the fetch operation:",C),n(a,"Error submitting data. Please try again.")}finally{n(b,!1)}};var or=E("<option> </option>"),lr=E("<option> </option>"),dr=E('<button type="button" class="btn variant-filled"><!></button>'),vr=E("<div></div>"),cr=E('<div class="text-red-500 mb-4 p-2 bg-red-100 border border-red-300 rounded"> </div>'),pr=E('<div class="RecentSetups svelte-10u9y5t"><!></div>'),fr=E('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">Not Logged In</p> <p class="mt-2 text-tertiary-400">No coffee records can be displayed</p> <a href="/login" class="btn variant-filled-primary mt-6">Login to view</a></div>'),ur=E('<div class="flex flex-col items-start gap-4 p-4 md:flex-row md:gap-6 md:p-6"><div class="flex flex-col items-start gap-4 w-1/5 p-4"><form class="toDoForm svelte-10u9y5t"><div class="flex flex-col md:flex-row items-start gap-4 w-1/5 p-4"><div class="flex flex-col items-start gap-4 w-1/5 p-4"><h2 class="label-wrapper svelte-10u9y5t"><label for="drink" class="label__lg">Drink</label></h2> <select id="drink" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a drink</option><option>Espresso</option><option>Coffee</option></select> <h2 class="label-wrapper svelte-10u9y5t"><label for="brewing_device" class="label__lg">Brewing Device</label></h2> <select id="brewingDevice" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a device</option><!></select></div> <div class="flex flex-col items-start gap-4 w-1/5 p-4"><h2 class="label-wrapper svelte-10u9y5t"><label for="grinder" class="label__lg">Grinder</label></h2> <select id="grinder" class="select w-full px-3 py-2 mb-4 border rounded"><option>Select a grinder</option><!></select> <h2 class="label-wrapper svelte-10u9y5t"><label for="coffeeBeans" class="label__lg">Bean</label></h2> <div class="relative w-full"><input type="text" id="coffeeBeans" autoComplete="off" class="input input__lg svelte-10u9y5t" maxlength="40" placeholder="Enter coffee bean"> <div class="text-xs text-gray-500 absolute right-2 bottom-6"> </div></div></div></div> <!></form> <!> <div class="CoffeeSetupSave svelte-10u9y5t"><!></div></div> <!></div>');function gr(o,a){he(a,!0);const[p,u]=Re(),g=()=>Ie(K,"$userStore",p);let _=v(""),b=v(""),G=v(""),N=v(""),I=v(""),F=v(""),Z=v(""),C=v(c({})),T=v(""),O=v(!1);const K=ze(null);let ie=["Espresso Machine","AeroPress","Moka Pot","Lever Machine"],se=["Pour Over","French Press","Drip Machine","Cold Brew"],Y=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Virtuoso","Breville Smart Grinder Pro","1Zpresso JX Pro"],ne=["DF 54","DF 64","Baratza Encore","Baratza Encore ESP","Baratza Sette 270","Baratza Virtuoso","Breville Smart Grinder Pro","Eureka Mignon Specialita","1Zpresso JX Pro"],oe=Ce(()=>e(b)==="Espresso"?ie:e(b)==="Coffee"?se:[]),le=Ce(()=>e(b)==="Espresso"?ne:e(b)==="Coffee"?Y:[]);je(()=>{e(b)&&n(_,"")});let U=v(""),Se=()=>({drink:e(b),brewingDevice:e(_),coffeeBeans:e(F),grinder:e(G),grindSetting:e(N)}),_e,be;Ee(()=>a.autofocus&&_e.focus&&_e.focus()),Ee(()=>{const i=localStorage.getItem("user");if(i)try{K.set(JSON.parse(i))}catch(s){console.error("Error parsing localStorage user data:",s)}});var de=ur(),$=r(de),ee=r($),re=r(ee),te=r(re),H=d(r(te),2),Q=r(H);Q.value=((Q.__value="")==null,"");var W=d(Q);W.value=(W.__value="Espresso")==null?"":"Espresso";var ve=d(W);ve.value=(ve.__value="Coffee")==null?"":"Coffee",t(H);var ae=d(H,4),ce=r(ae);ce.value=((ce.__value="")==null,"");var ke=d(ce);Oe(ke,17,()=>e(oe),Fe,(i,s)=>{var h=or(),B={},D=r(h,!0);t(h),R(()=>{B!==(B=e(s))&&(h.value=(h.__value=e(s))==null?"":e(s)),m(D,e(s))}),P(i,h)}),t(ae),t(te);var pe=d(te,2),V=d(r(pe),2),fe=r(V);fe.value=((fe.__value="")==null,"");var Be=d(fe);Oe(Be,17,()=>e(le),Fe,(i,s,h,B)=>{var D=lr(),q={},ue=r(D,!0);t(D),R(()=>{q!==(q=e(s))&&(D.value=(D.__value=e(s))==null?"":e(s)),m(ue,e(s))}),P(i,D)}),t(V);var me=d(V,4),f=r(me);Xe(f),Ge(()=>Ue(f,()=>e(F),i=>n(F,i))),He(f,i=>be=i,()=>be),Ve(f,i=>Pe==null?void 0:Pe(i));var x=d(f,2),l=r(x);t(x),t(me),t(pe),t(re);var y=d(re,2);{var j=i=>{var s=dr();s.__click=[nr,T,b,_,G,F,O,N,I,Z,C,Se];var h=r(s);{var B=q=>{var ue=Ae("Submitting...");P(q,ue)},D=q=>{var ue=Ae("Submit");P(q,ue)};X(h,q=>{e(O)?q(B):q(D,!1)})}t(s),R(()=>s.disabled=e(O)),P(i,s)},w=i=>{var s=vr();P(i,s)};X(y,i=>{g()?i(j):i(w,!1)})}t(ee);var z=d(ee,2);{var A=i=>{var s=cr(),h=r(s,!0);t(s),R(()=>m(h,e(T))),P(i,s)};X(z,i=>{e(T)&&i(A)})}var M=d(z,2),S=r(M);Ke(S,{get props(){return e(C)},get value(){return e(U)},set value(i){n(U,c(i))}}),t(M),t($);var J=d($,2);{var k=i=>{var s=pr(),h=r(s);sr(h,{get props(){return e(C)},get trigger(){return e(U)}}),t(s),P(i,s)},L=i=>{var s=fr();P(i,s)};X(J,i=>{g()?i(k):i(L,!1)})}t(de),R(()=>{ae.disabled=!e(b),V.disabled=!e(b),m(l,`${e(F).length??""}/40`)}),De(H,()=>e(b),i=>n(b,i)),De(ae,()=>e(_),i=>n(_,i)),De(V,()=>e(G),i=>n(G,i)),P(o,de),we(),u()}Te(["click"]);var _r=E("<!> <!>",1);function Pr(o){var a=_r(),p=Me(a);Ze(p,{});var u=d(p,2);gr(u,{}),P(o,a)}export{Pr as component};
