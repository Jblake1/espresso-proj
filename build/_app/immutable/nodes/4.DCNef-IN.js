import{t as Q,a as D,d as qe,c as ve}from"../chunks/DLZ7H7Fm.js";import{i as Le}from"../chunks/BMgznbf7.js";import{l as Ge,ad as nt,aK as st,aL as it,G as lt,K as dt,aM as ct,aN as vt,aO as ut,aP as ft,D as mt,ag as we,ay as Ue,az as Ke,aA as gt,T as De,aQ as A,aw as pt,aR as te,Z as Y,$ as Z,a3 as O,aS as He,V as l,X as i,_ as le,g as s,U as Te,aT as F,R as k,Q as de,N as yt,d as Be,Y as _t}from"../chunks/BOw1AeM4.js";import{a as ht,w as bt,e as V,d as wt,r as xt,s as re}from"../chunks/BReulVDI.js";import{l as $e,a as c,c as et,s as tt,i as ue,p as We,r as jt}from"../chunks/Db0Jo1o8.js";import{e as rt,i as at}from"../chunks/CZS3sv3T.js";import{b as ge,s as W,c as Ie,h as Je,r as Qe,A as Ct}from"../chunks/BjZZ5VSP.js";import{s as Me}from"../chunks/Bfc47y5P.js";import{c as It,o as kt}from"../chunks/BMBHoIzy.js";import"../chunks/D7dikrVv.js";import{a as pe,p as Dt,b as Tt}from"../chunks/DMKw4_NB.js";import{b as Re}from"../chunks/QFNNfdoR.js";const St=()=>performance.now(),ae={tick:o=>requestAnimationFrame(o),now:()=>St(),tasks:new Set};function ot(){const o=ae.now();ae.tasks.forEach(e=>{e.c(o)||(ae.tasks.delete(e),e.f())}),ae.tasks.size!==0&&ae.tick(ot)}function Pt(o){let e;return ae.tasks.size===0&&ae.tick(ot),{promise:new Promise(n=>{ae.tasks.add(e={c:o,f:n})}),abort(){ae.tasks.delete(e)}}}function ke(o,e){bt(()=>{o.dispatchEvent(new CustomEvent(e))})}function Ot(o){if(o==="float")return"cssFloat";if(o==="offset")return"cssOffset";if(o.startsWith("--"))return o;const e=o.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Ye(o){const e={},n=o.split(";");for(const r of n){const[y,b]=r.split(":");if(!y||b===void 0)break;const j=Ot(y.trim());e[j]=b.trim()}return e}const Et=o=>o;function Ve(o,e,n,r){var y=(o&vt)!==0,b=(o&ut)!==0,j=y&&b,C=(o&ct)!==0,B=j?"both":y?"in":"out",I,g=e.inert,E=e.style.overflow,w,_;function d(){var p=gt,f=Ge;Ue(null),Ke(null);try{return I??(I=n()(e,(r==null?void 0:r())??{},{direction:B}))}finally{Ue(p),Ke(f)}}var t={is_global:C,in(){var p;if(e.inert=g,!y){_==null||_.abort(),(p=_==null?void 0:_.reset)==null||p.call(_);return}b||w==null||w.abort(),ke(e,"introstart"),w=ze(e,d(),_,1,()=>{ke(e,"introend"),w==null||w.abort(),w=I=void 0,e.style.overflow=E})},out(p){if(!b){p==null||p(),I=void 0;return}e.inert=!0,ke(e,"outrostart"),_=ze(e,d(),w,0,()=>{ke(e,"outroend"),p==null||p()})},stop:()=>{w==null||w.abort(),_==null||_.abort()}},a=Ge;if((a.transitions??(a.transitions=[])).push(t),y&&ht){var v=C;if(!v){for(var u=a.parent;u&&u.f&nt;)for(;(u=u.parent)&&!(u.f&st););v=!u||(u.f&it)!==0}v&&lt(()=>{dt(()=>t.in())})}}function ze(o,e,n,r,y){var b=r===1;if(ft(e)){var j,C=!1;return mt(()=>{if(!C){var a=e({direction:b?"in":"out"});j=ze(o,a,n,r,y)}}),{abort:()=>{C=!0,j==null||j.abort()},deactivate:()=>j.deactivate(),reset:()=>j.reset(),t:()=>j.t()}}if(n==null||n.deactivate(),!(e!=null&&e.duration))return y(),{abort:we,deactivate:we,reset:we,t:()=>r};const{delay:B=0,css:I,tick:g,easing:E=Et}=e;var w=[];if(b&&n===void 0&&(g&&g(0,1),I)){var _=Ye(I(0,1));w.push(_,_)}var d=()=>1-r,t=o.animate(w,{duration:B});return t.onfinish=()=>{var a=(n==null?void 0:n.t())??1-r;n==null||n.abort();var v=r-a,u=e.duration*Math.abs(v),p=[];if(u>0){var f=!1;if(I)for(var m=Math.ceil(u/16.666666666666668),N=0;N<=m;N+=1){var X=a+v*E(N/m),J=Ye(I(X,1-X));p.push(J),f||(f=J.overflow==="hidden")}f&&(o.style.overflow="hidden"),d=()=>{var T=t.currentTime;return a+v*E(T/u)},g&&Pt(()=>{if(t.playState!=="running")return!1;var T=d();return g(T,1-T),!0})}t=o.animate(p,{duration:u,fill:"forwards"}),t.onfinish=()=>{d=()=>r,g==null||g(r,1-r),y()}},{abort:()=>{t&&(t.cancel(),t.effect=null,t.onfinish=we)},deactivate:()=>{y=we},reset:()=>{r===0&&(g==null||g(1,0))},t:()=>d()}}function Nt(o){const e=o-1;return e*e*e+1}function Xe(o,{delay:e=0,duration:n=400,easing:r=Nt,axis:y="y"}={}){const b=getComputedStyle(o),j=+b.opacity,C=y==="y"?"height":"width",B=parseFloat(b[C]),I=y==="y"?["top","bottom"]:["left","right"],g=I.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),E=parseFloat(b[`padding${g[0]}`]),w=parseFloat(b[`padding${g[1]}`]),_=parseFloat(b[`margin${g[0]}`]),d=parseFloat(b[`margin${g[1]}`]),t=parseFloat(b[`border${g[0]}Width`]),a=parseFloat(b[`border${g[1]}Width`]);return{delay:e,duration:n,easing:r,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*j};${C}: ${v*B}px;padding-${I[0]}: ${v*E}px;padding-${I[1]}: ${v*w}px;margin-${I[0]}: ${v*_}px;margin-${I[1]}: ${v*d}px;border-${I[0]}-width: ${v*t}px;border-${I[1]}-width: ${v*a}px;min-${C}: 0`}}var At=Q('<div data-testid="accordion"><!></div>');function Ft(o,e){const n=$e(e,["children","$$slots","$$events","$$legacy"]);De(e,!1);const[r,y]=tt(),b=()=>et(Dt,"$prefersReducedMotionStore",r),j=Z();let C=c(e,"autocollapse",8,!1),B=c(e,"width",8,"w-full"),I=c(e,"spacing",8,"space-y-1"),g=c(e,"disabled",8,!1),E=c(e,"padding",8,"py-2 px-4"),w=c(e,"hover",8,"hover:bg-primary-hover-token"),_=c(e,"rounded",8,"rounded-container-token"),d=c(e,"caretOpen",8,"rotate-180"),t=c(e,"caretClosed",8,""),a=c(e,"regionControl",8,""),v=c(e,"regionPanel",8,"space-y-4"),u=c(e,"regionCaret",8,""),p=c(e,"transitions",24,()=>!b()),f=c(e,"transitionIn",8,Xe),m=c(e,"transitionInParams",24,()=>({duration:200})),N=c(e,"transitionOut",8,Xe),X=c(e,"transitionOutParams",24,()=>({duration:200}));const J=pt(null);A("active",J),A("autocollapse",C()),A("disabled",g()),A("padding",E()),A("hover",w()),A("rounded",_()),A("caretOpen",d()),A("caretClosed",t()),A("regionControl",a()),A("regionPanel",v()),A("regionCaret",u()),A("transitions",p()),A("transitionIn",f()),A("transitionInParams",m()),A("transitionOut",N()),A("transitionOutParams",X()),te(()=>(O(B()),O(I()),O(n)),()=>{Y(j,`${B()} ${I()} ${n.class??""}`)}),He(),Le();var T=At(),z=l(T);pe(z,e,"default",{},null),i(T),le(()=>ge(T,`accordion ${s(j)??""}`)),D(o,T),Te(),y()}function Ze(o,e){const{transition:n,params:r,enabled:y}=e;return y?n(o,r):"duration"in r?n(o,{duration:0}):{duration:0}}var Bt=Q('<div class="accordion-lead"><!></div>'),Jt=Q("<div><!></div>"),Mt=Q("<div><!></div>"),Rt=Q('<div role="region"><!></div>'),zt=Q('<div data-testid="accordion-item"><button type="button"><!> <div class="accordion-summary flex-1"><!></div> <!></button> <!></div>');function Lt(o,e){const n=Tt(e),r=$e(e,["children","$$slots","$$events","$$legacy"]);De(e,!1);const[y,b]=tt(),j=()=>et(N(),"$active",y),C=Z(),B=Z(),I=Z(),g=Z(),E=Z(),w=Z(),_=Z(),d=It();let t=c(e,"open",12,!1),a=c(e,"id",24,()=>String(Math.random()));const v="",u="text-start w-full flex items-center space-x-4",p="fill-current w-3 transition-transform duration-[200ms]",f="";let m=c(e,"autocollapse",24,()=>F("autocollapse")),N=c(e,"active",24,()=>F("active")),X=c(e,"disabled",24,()=>F("disabled")),J=c(e,"padding",24,()=>F("padding")),T=c(e,"hover",24,()=>F("hover")),z=c(e,"rounded",24,()=>F("rounded")),ye=c(e,"caretOpen",24,()=>F("caretOpen")),oe=c(e,"caretClosed",24,()=>F("caretClosed")),fe=c(e,"regionControl",24,()=>F("regionControl")),ne=c(e,"regionPanel",24,()=>F("regionPanel")),S=c(e,"regionCaret",24,()=>F("regionCaret")),H=c(e,"transitions",24,()=>F("transitions")),se=c(e,"transitionIn",24,()=>F("transitionIn")),$=c(e,"transitionInParams",24,()=>F("transitionInParams")),ie=c(e,"transitionOut",24,()=>F("transitionOut")),L=c(e,"transitionOutParams",24,()=>F("transitionOutParams"));const q=`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
			<path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z" />
		</svg>`;function M(h){m()===!0?N().set(a()):t(!t()),ee(h)}function ee(h){const x=m()?j()===a():t();d("toggle",{event:h,id:a(),panelId:`accordion-panel-${a()}`,open:x,autocollapse:m()})}m()&&t()&&M(),te(()=>(O(t()),O(m())),()=>{t()&&m()&&M()}),te(()=>(O(m()),j(),O(a()),O(t())),()=>{Y(C,m()?j()===a():t())}),te(()=>O(r),()=>{Y(B,`${v} ${r.class??""}`)}),te(()=>(O(J()),O(T()),O(z()),O(fe())),()=>{Y(I,`${u} ${J()} ${T()} ${z()} ${fe()}`)}),te(()=>(s(C),O(ye()),O(oe())),()=>{Y(g,s(C)?ye():oe())}),te(()=>(O(S()),s(g)),()=>{Y(E,`${p} ${S()} ${s(g)}`)}),te(()=>O(S()),()=>{Y(w,`${p} ${S()}`)}),te(()=>(O(J()),O(z()),O(ne())),()=>{Y(_,`${f} ${J()} ${z()} ${ne()}`)}),He(),Le();var G=zt(),P=l(G),U=l(P);{var K=h=>{var x=Bt(),ce=l(x);pe(ce,e,"lead",{},null),i(x),D(h,x)};ue(U,h=>{n.lead&&h(K)})}var R=k(U,2),_e=l(R);pe(_e,e,"summary",{},h=>{var x=qe("(summary)");D(h,x)}),i(R);var xe=k(R,2);{var Se=h=>{var x=Jt(),ce=l(x);{var Oe=me=>{var he=ve(),Ne=de(he);pe(Ne,e,"iconClosed",{},Ae=>{var be=ve(),Fe=de(be);Je(Fe,()=>q),D(Ae,be)}),D(me,he)},Ee=me=>{var he=ve(),Ne=de(he);pe(Ne,e,"iconOpen",{},Ae=>{var be=ve(),Fe=de(be);Je(Fe,()=>q),D(Ae,be)}),D(me,he)};ue(ce,me=>{s(C)?me(Oe):me(Ee,!1)})}i(x),le(()=>ge(x,`accordion-summary-icons ${s(w)??""}`)),D(h,x)},je=h=>{var x=Mt(),ce=l(x);Je(ce,()=>q),i(x),le(()=>ge(x,`accordion-summary-caret ${s(E)??""}`)),D(h,x)};ue(xe,h=>{n.iconClosed||n.iconOpen?h(Se):h(je,!1)})}i(P);var Ce=k(P,2);{var Pe=h=>{var x=Rt(),ce=l(x);pe(ce,e,"content",{},Oe=>{var Ee=qe("(content)");D(Oe,Ee)}),i(x),le(()=>{ge(x,`accordion-panel ${s(_)??""}`),W(x,"id",`accordion-panel-${a()??""}`),W(x,"aria-hidden",!s(C)),W(x,"aria-labelledby",a())}),Ve(1,x,()=>Ze,()=>({transition:se(),params:$(),enabled:H()})),Ve(2,x,()=>Ze,()=>({transition:ie(),params:L(),enabled:H()})),D(h,x)};ue(Ce,h=>{s(C)&&h(Pe)})}i(G),le(()=>{ge(G,`accordion-item ${s(B)??""}`),ge(P,`accordion-control ${s(I)??""}`),W(P,"id",a()),W(P,"aria-expanded",s(C)),W(P,"aria-controls",`accordion-panel-${a()??""}`),P.disabled=X()}),V("click",P,M),V("click",P,function(h){Ie.call(this,e,h)}),V("keydown",P,function(h){Ie.call(this,e,h)}),V("keyup",P,function(h){Ie.call(this,e,h)}),V("keypress",P,function(h){Ie.call(this,e,h)}),D(o,G),Te(),b()}const qt=async(o,e,n,r)=>{try{if(!(await fetch("/journeyCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({journeyID:n.journeyData.journeyID})})).ok)throw new Error("Network response of journeyCard not ok");r(n.journeyData.journeyID)}catch(y){console.error("Error getting journey:",y),alert("An error occurred while posting the journey card.")}};var Gt=Q('<div class="snap-start shrink-0 w-80 relative"><button type="button" class="absolute -top-1 right-0 px-1.5 py-0.5 bg-red-500 hover:bg-red-600 text-white rounded-tl-md rounded-tr-lg rounded-bl-md flex items-center justify-center shadow-md z-10" title="Delete card"><span class="text-xs font-bold">Ã—</span></button> <form class="border border-primary-400 rounded-lg shadow-sm bg-tertiary-900 p-4 w-full"><div class="mb-4"><div class="flex items-center justify-between"><p class="text-sm font-medium text-tertiary-500"> </p> <p class="text-sm font-medium text-tertiary-500"> </p></div></div> <div class="mb-3"><label class="block text-sm font-medium text-tertiary-200 mb-1">Grind Setting</label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <input type="text" required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500"></div></div> <div class="mb-3"><label class="block text-sm font-medium text-tertiary-200 mb-1"> </label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <input type="text" required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500"></div></div> <div class="mb-4 relative"><label class="block text-sm font-medium text-tertiary-200 mb-1">Notes</label> <div class="relative"><div class="absolute top-0 left-0 h-[1px] w-1/3 bg-primary-200"></div> <textarea required class="w-full p-2 border-0 rounded-md text-tertiary-500 bg-tertiary-900 focus:ring-primary-500 focus:border-primary-500 min-h-[80px]"></textarea></div></div></form></div>'),Ut=Q('<div class="flex flex-row gap-2 w-full"><div class="flex items-center self-stretch"><button class="rounded-full h-12 w-12 flex items-center justify-center bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold shadow"><span class="text-xl">+</span></button></div> <div class="flex overflow-x-auto snap-x snap-mandatory pb-4 gap-4 w-full"></div></div>');function Kt(o,e){De(e,!0);let n=jt(e,["$$slots","$$events","$$legacy"]),r=We([{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:""},{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:""},{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:""},{datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:""}]),y=We({});const b=async(d,t)=>{y[d]||(y[d]=!0),await B(d)},j=async(d,t)=>{try{if(!(await fetch("/journeyCardDelete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d})})).ok)throw new Error("Network response of journeyCard delete not ok");r[t].cardID="",r[t].datePosted="",r[t].iteration="",r[t].notes="",r[t].grindSetting="",r[t].shotTime="",r[t].journeyID="",e.journeyData.journeyID&&C(e.journeyData.journeyID)}catch(a){console.error("Error getting journey:",a),alert("An error occurred while deleting the journey card.")}},C=async d=>{try{console.log(`Sending journeyID: ${d}`);const t=await fetch(`/journeyCard?journeyID=${d}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const a=await t.json();console.log("JourneyCards:",a);const v=a.journeyCards;console.log("JourneyCardsData:",v);for(let u=0;u<r.length;u++)r[u]={datePosted:"",notes:"",grindSetting:"",shotTime:"",cardID:"",journeyID:"",iteration:""};v.forEach((u,p)=>{p<r.length&&(r[p].cardID=u.id,r[p].datePosted=u.datePosted,r[p].iteration=u.iteration,r[p].notes=u.notes,r[p].grindSetting=u.grindSetting,r[p].shotTime=u.shotTime,r[p].journeyID=e.journeyData.journeyID)})}}catch(t){console.error("Error getting journey:",t),alert("An error occurred while getting the journey.")}},B=async d=>{try{if(!(await fetch("/journeyCardEdit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r[d].cardID,grindSetting:r[d].grindSetting,shotTime:r[d].shotTime,notes:r[d].notes})})).ok)throw new Error("Network response of journeyCard update not ok");y[d]=!1}catch(t){console.error("Error getting journey:",t),alert("An error occurred while updating card.")}};function I(d){if(!d)return"";const t=new Date(d);if(isNaN(t.getTime()))return d;const a=(t.getMonth()+1).toString().padStart(2,"0"),v=t.getDate().toString().padStart(2,"0"),u=t.getFullYear().toString().slice(-2);return`${a}/${v}/${u}`}yt(()=>{console.log("running"),console.log(e.journeyData.journeyID),e.journeyData.journeyID&&C(e.journeyData.journeyID)});var g=Ut(),E=l(g),w=l(E);w.__click=[qt,n,e,C],i(E);var _=k(E,2);rt(_,21,()=>r,at,(d,t,a)=>{var v=ve(),u=de(v);{var p=f=>{var m=Gt(),N=l(m);N.__click=()=>j(s(t).cardID,a);var X=k(N,2),J=l(X),T=l(J),z=l(T),ye=l(z);i(z);var oe=k(z,2),fe=l(oe,!0);i(oe),i(T),i(J);var ne=k(J,2),S=l(ne);W(S,"for",`grindSetting${a+1}`);var H=k(S,2),se=k(l(H),2);Qe(se),W(se,"id",`grindSetting${a+1}`),i(H),i(ne);var $=k(ne,2),ie=l($);W(ie,"for",`shotTime${a+1}`);var L=l(ie,!0);i(ie);var q=k(ie,2),M=k(l(q),2);Qe(M),W(M,"id",`shotTime${a+1}`),i(q),i($);var ee=k($,2),G=l(ee);W(G,"for",`notes${a+1}`);var P=k(G,2),U=k(l(P),2);xt(U),W(U,"id",`notes${a+1}`),i(P),i(ee),i(X),i(m),le((K,R)=>{re(ye,`Iteration #${s(t).iteration??""}`),re(fe,K),re(L,R)},[()=>I(s(t).datePosted),()=>e.drink&&e.drink.toLowerCase()==="coffee"?"Brew Time":"Shot Time"]),V("blur",se,()=>b(a)),Re(se,()=>s(t).grindSetting,K=>s(t).grindSetting=K),V("blur",M,()=>b(a)),Re(M,()=>s(t).shotTime,K=>s(t).shotTime=K),V("blur",U,()=>b(a)),Re(U,()=>s(t).notes,K=>s(t).notes=K),D(f,m)};ue(u,f=>{s(t).cardID!==""&&f(p)})}D(d,v)}),i(_),i(g),D(o,g),Te()}wt(["click"]);var Wt=Q('<div class="w-full flex justify-center items-center p-10"><div class="border-4 border-transparent border-t-primary-500 rounded-full w-10 h-10 animate-spin"></div></div>'),Qt=Q('<button type="button" class="flex items-center space-x-3 w-full text-left h-10 p-0"><div class="py-0 px-3 rounded-md flex items-center space-x-3 flex-grow"><p class="whitespace-nowrap bg-primary-500/80 px-2 py-0.5 rounded text-white text-sm"> </p> <div class="h-3 border-r border-slate-300"></div> <p class="whitespace-nowrap truncate max-w-xs min-w-0 bg-primary-500/80 px-2 py-0.5 rounded text-white text-sm"> </p></div> <div><span class="btn-icon variant-filled-primary cursor-pointer" tabindex="0" role="button" aria-label="Delete journey">delete</span></div> <div class="h-full w-12 max-w-[48px] flex-shrink-0"></div></button>'),Yt=Q('<div class="w-full"><div class="w-full rounded-md"><div class="flex items-center justify-center"><div class="flex items-center space-x-3 flex-wrap"><p class="whitespace-nowrap"> </p> <div class="h-4 border-r border-slate-300"></div> <p class="whitespace-nowrap"> </p> <div class="h-4 border-r border-slate-300"></div> <p class="whitespace-nowrap"> </p> <div class="h-4 border-r border-slate-300"></div> <p class="whitespace-nowrap"> </p></div></div></div> <div class="flex justify-center w-full"><div class="w-full md:w-3/4"><!></div></div></div>'),Vt=Q('<div class="w-full text-center p-10 border border-primary-200 rounded-lg bg-tertiary-900/50"><p class="text-xl font-semibold text-tertiary-200">No Notes</p> <p class="mt-2 text-tertiary-400">No coffee records have been created yet!?</p> <a href="/" class="btn variant-filled-primary mt-6">Get a setting recommendation</a></div>'),Xt=Q('<div class="flex flex-row w-full justify-start"><div class="flex flex-col items-start w-full md:w-3/4"><!></div> <div class="hidden md:block w-1/4 relative"><div class="p-4"><img alt="Espresso Machine" class="w-full max-w-xs mx-auto drop-shadow-xl svelte-9gsuif"></div></div></div>');function Zt(o,e){De(e,!1);let n=Z(!0),r=Z([]);const y=["/images/espresso1.jpg","/images/espresso2.jpg","/images/espresso3.jpg"],b="/images/espresso_machine.png";let j=Z(-1);function C(f){Y(j,s(j)===f?-1:f)}function B(f){return y[f%y.length]}function I(f){return{journeyID:f.id}}const g=async f=>{try{const m=await fetch("/journeyDelete",{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:f})});if(m.ok){const N=await m.json();console.log("Journey deleted:",N),E()}else{const N=await m.json();console.error("Failed to delete journey:",N.message)}}catch(m){console.error("Error deleting journey:",m)}},E=async()=>{Y(n,!0);try{const f=await fetch("/archiveSetup",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(f.ok){const m=await f.json();console.log("Archive:",m),Y(r,m.journeys||[]),console.log("journeys:",s(r))}else{const m=await f.json();console.error("Failed to fetch journeys:",m.message)}}catch(f){console.error("Error fetching journeys:",f)}finally{Y(n,!1)}};kt(()=>{E()}),Le();var w=Xt(),_=l(w),d=l(_);{var t=f=>{var m=Wt();D(f,m)},a=f=>{var m=ve(),N=de(m);{var X=T=>{Ft(T,{class:"w-full",children:(z,ye)=>{var oe=ve(),fe=de(oe);rt(fe,1,()=>s(r),at,(ne,S,H)=>{const se=Be(()=>s(j)===H);Lt(ne,{get open(){return s(se)},class:"mb-0",$$slots:{summary:($,ie)=>{var L=Qt(),q=l(L),M=l(q),ee=l(M,!0);i(M);var G=k(M,4),P=l(G,!0);i(G),i(q);var U=k(q,2),K=l(U);i(U),_t(2),i(L),le((R,_e)=>{W(L,"style",`background-image: url(${R??""}); background-size: cover; background-position: center;`),re(ee,s(S).drink),re(P,_e)},[()=>B(H),()=>s(S).coffeeBeans.length>20?s(S).coffeeBeans.slice(0,15)+"...":s(S).coffeeBeans],Be),V("click",K,Me(()=>g(s(S).id))),V("keydown",K,Me(R=>R.key==="Enter"&&g(s(S).id))),V("click",L,Me(()=>C(H))),V("keydown",L,R=>R.key==="Enter"&&C(H)),D($,L)},content:($,ie)=>{var L=Yt(),q=l(L),M=l(q),ee=l(M),G=l(ee),P=l(G,!0);i(G);var U=k(G,4),K=l(U,!0);i(U);var R=k(U,4),_e=l(R,!0);i(R);var xe=k(R,4),Se=l(xe,!0);i(xe),i(ee),i(M),i(q);var je=k(q,2),Ce=l(je),Pe=l(Ce);const h=Be(()=>I(s(S)));Kt(Pe,{get journeyData(){return s(h)},get drink(){return s(S).drink}}),i(Ce),i(je),i(L),le(()=>{re(P,s(S).drink),re(K,s(S).coffeeBeans),re(_e,s(S).grinder),re(Se,s(S).brewingDevice)}),D($,L)}}})}),D(z,oe)},$$slots:{default:!0}})},J=T=>{var z=Vt();D(T,z)};ue(N,T=>{s(r).length>0?T(X):T(J,!1)},!0)}D(f,m)};ue(d,f=>{s(n)?f(t):f(a,!1)})}i(_);var v=k(_,2),u=l(v),p=l(u);W(p,"src",b),i(u),i(v),i(w),D(o,w),Te()}var Ht=Q("<!> <!>",1);function vr(o){var e=Ht(),n=de(e);Ct(n,{});var r=k(n,2);Zt(r,{}),D(o,e)}export{vr as component};
