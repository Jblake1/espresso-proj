import{b as Ae,e as Je,t as E,a as P,c as ye,n as Ve,d as Le}from"./CBSBxhCm.js";import{i as _e}from"./DbMJBHzy.js";import{b as Ke,h as re,a as Pe,j as Ye,e as Te,z as Fe,aF as Qe,aE as We,s as Xe,A as Ze,w as et,G as Me,K as tt,J as at,a2 as o,aU as st,c as Ie,ac as rt,aV as lt,aW as it,aX as nt,q as ot,X as he,aR as D,aS as be,_ as Z,Y as me,Q as m,U as k,a5 as z,R as W,T as y,g,d as ge,W as ie,aQ as fe,aT as ve,Z as Ne,aw as ct}from"./C8TPyCW6.js";import{i as dt,c as ut,d as ft,b as vt,n as gt,f as _t,g as ht,e as $,j as bt,s as mt,k as yt}from"./CQOudoi1.js";import{l as ue,b as r,a as te,c as xe,s as je,d as de}from"./8hPzZ8EO.js";import{b as pe,a as se,c as Ce,g as kt,m as ze,d as wt,e as xt,f as St}from"./C87CxSex.js";import{o as Se}from"./9HFh9aQn.js";import{s as pt,g as we}from"./TLtQzZOU.js";function At(t,e,a,s,l){var i=t,b="",L;Ke(()=>{if(b===(b=e()??"")){re&&Pe();return}L!==void 0&&(et(L),L=void 0),b!==""&&(L=Ye(()=>{if(re){Te.data;for(var d=Pe(),A=d;d!==null&&(d.nodeType!==8||d.data!=="");)A=d,d=Fe(d);if(d===null)throw Qe(),We;Ae(Te,A),i=Xe(d);return}var I=b+"",M=Je(I);Ae(Ze(M),M.lastChild),i.before(M)}))})}function Oe(t,e,a){Me(()=>{var s=tt(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var l=!1,i={};at(()=>{var b=a();o(b),l&&st(i,b)&&(i=b,s.update(b))}),l=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function Ge(t){var e,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=Ge(t[e]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function Lt(){for(var t,e,a=0,s="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=Ge(t))&&(s&&(s+=" "),s+=e);return s}function Pt(t){return typeof t=="object"?Lt(t):t??""}function oa(t){if(re){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var s=t.value;K(t,"value",null),t.value=s}if(t.hasAttribute("checked")){var l=t.checked;K(t,"checked",null),t.checked=l}}};t.__on_r=a,lt(a),_t()}}function Tt(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function K(t,e,a,s){var l=t.__attributes??(t.__attributes={});re&&(l[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||l[e]!==(l[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[it]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ee(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function $e(t,e,a,s,l=!1,i=!1,b=!1){let L=re&&i;L&&Ie(!1);var d=e||{},A=t.tagName==="OPTION";for(var I in e)I in a||(a[I]=null);a.class&&(a.class=Pt(a.class));var M=Ee(t),G=t.__attributes??(t.__attributes={});for(const _ in a){let c=a[_];if(A&&_==="value"&&c==null){t.value=t.__value="",d[_]=c;continue}var j=d[_];if(c!==j){d[_]=c;var N=_[0]+_[1];if(N!=="$$"){if(N==="on"){const S={},p="$$"+_;let h=_.slice(2);var B=ht(h);if(dt(h)&&(h=h.slice(0,-7),S.capture=!0),!B&&j){if(c!=null)continue;t.removeEventListener(h,d[p],S),d[p]=null}if(c!=null)if(B)t[`__${h}`]=c,ft([h]);else{let U=function(V){d[_].call(this,V)};d[p]=ut(h,t,U,S)}else B&&(t[`__${h}`]=void 0)}else if(_==="style"&&c!=null)t.style.cssText=c+"";else if(_==="autofocus")vt(t,!!c);else if(!i&&(_==="__value"||_==="value"&&c!=null))t.value=t.__value=c;else if(_==="selected"&&A)Tt(t,c);else{var x=_;l||(x=gt(x));var H=x==="defaultValue"||x==="defaultChecked";if(c==null&&!i&&!H)if(G[_]=null,x==="value"||x==="checked"){let S=t;const p=e===void 0;if(x==="value"){let h=S.defaultValue;S.removeAttribute(x),S.defaultValue=h,S.value=S.__value=p?h:null}else{let h=S.defaultChecked;S.removeAttribute(x),S.defaultChecked=h,S.checked=p?h:!1}}else t.removeAttribute(_);else H||M.includes(x)&&(i||typeof c!="string")?t[x]=c:typeof c!="function"&&K(t,x,c)}_==="style"&&"__styles"in t&&(t.__styles={})}}}return L&&Ie(!0),d}var Be=new Map;function Ee(t){var e=Be.get(t.nodeName);if(e)return e;Be.set(t.nodeName,e=[]);for(var a,s=t,l=Element.prototype;l!==s;){a=nt(s);for(var i in a)a[i].set&&e.push(i);s=rt(s)}return e}function He(t,e,a){var s=t.__className,l=Ue(e);re&&t.getAttribute("class")===l?t.__className=l:(s!==l||re&&t.getAttribute("class")!==l)&&(l===""?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)}function F(t,e,a){var s=t.__className,l=Ue(e);re&&t.className===l?t.__className=l:(s!==l||re&&t.className!==l)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function Ue(t,e){return(t??"")+""}function Q(t,e){var i;var a=(i=t.$$events)==null?void 0:i[e.type],s=ot(a)?a.slice():a==null?[]:[a];for(var l of s)l.call(this,e)}var It=E("<div><!></div>"),Nt=E("<div><!></div>"),Ct=E("<div><!></div>"),zt=E('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function Bt(t,e){const a=pe(e),s=ue(e,["children","$$slots","$$events","$$legacy"]);he(e,!1);const l=z(),i=z(),b=z(),L=z(),d=z(),A=z();let I=r(e,"background",8,"bg-surface-100-800-token"),M=r(e,"border",8,""),G=r(e,"padding",8,"p-4"),j=r(e,"shadow",8,""),N=r(e,"spacing",8,"space-y-4"),B=r(e,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),x=r(e,"gap",8,"gap-4"),H=r(e,"regionRowMain",8,""),_=r(e,"regionRowHeadline",8,""),c=r(e,"slotLead",8,""),S=r(e,"slotDefault",8,""),p=r(e,"slotTrail",8,""),h=r(e,"label",8,""),U=r(e,"labelledby",8,"");const V="flex flex-col",X="grid items-center",v="",n="flex-none flex justify-between items-center",u="flex-auto",f="flex-none flex items-center space-x-4";D(()=>(o(I()),o(M()),o(N()),o(G()),o(j()),o(s)),()=>{k(l,`${V} ${I()} ${M()} ${N()} ${G()} ${j()} ${s.class??""}`)}),D(()=>(o(B()),o(x()),o(H())),()=>{k(i,`${X} ${B()} ${x()} ${H()}`)}),D(()=>o(_()),()=>{k(b,`${v} ${_()}`)}),D(()=>o(c()),()=>{k(L,`${n} ${c()}`)}),D(()=>o(S()),()=>{k(d,`${u} ${S()}`)}),D(()=>o(p()),()=>{k(A,`${f} ${p()}`)}),be(),_e();var C=zt(),R=m(C),T=m(R);{var w=J=>{var O=It(),oe=m(O);se(oe,e,"lead",{},null),y(O),Z(()=>F(O,`app-bar-slot-lead ${g(L)??""}`)),P(J,O)};te(T,J=>{a.lead&&J(w)})}var q=W(T,2),ae=m(q);se(ae,e,"default",{},null),y(q);var Y=W(q,2);{var le=J=>{var O=Nt(),oe=m(O);se(oe,e,"trail",{},null),y(O),Z(()=>F(O,`app-bar-slot-trail ${g(A)??""}`)),P(J,O)};te(Y,J=>{a.trail&&J(le)})}y(R);var ee=W(R,2);{var ne=J=>{var O=Ct(),oe=m(O);se(oe,e,"headline",{},null),y(O),Z(()=>F(O,`app-bar-row-headline ${g(b)??""}`)),P(J,O)};te(ee,J=>{a.headline&&J(ne)})}y(C),Z(()=>{F(C,`app-bar ${g(l)??""}`),K(C,"aria-label",h()),K(C,"aria-labelledby",U()),F(R,`app-bar-row-main ${g(i)??""}`),F(q,`app-bar-slot-default ${g(d)??""}`)}),P(t,C),me()}var Rt=E("<img>"),Dt=Ve('<svg class="avatar-initials w-full h-full" viewBox="0 0 512 512"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-weight="bold"> </text></svg>'),Mt=E("<figure><!></figure>");function jt(t,e){const a=ue(e,["children","$$slots","$$events","$$legacy"]),s=ue(a,["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"]);he(e,!1);const l=z();let i=r(e,"initials",8,""),b=r(e,"fill",8,"fill-token"),L=r(e,"fontSize",8,150),d=r(e,"src",12,""),A=r(e,"fallback",8,""),I=r(e,"action",8,()=>{}),M=r(e,"actionParams",8,""),G=r(e,"background",8,"bg-surface-400-500-token"),j=r(e,"width",8,"w-16"),N=r(e,"border",8,""),B=r(e,"rounded",8,"rounded-full"),x=r(e,"shadow",8,""),H=r(e,"cursor",8,""),_="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",c="w-full object-cover";function S(){return delete s.class,s}D(()=>(o(G()),o(j()),o(N()),o(B()),o(x()),o(H()),o(a)),()=>{k(l,`${_} ${G()} ${j()} ${N()} ${B()} ${x()} ${H()} ${a.class??""}`)}),be(),_e();var p=Mt();let h;var U=m(p);{var V=v=>{var n=Rt();F(n,`avatar-image ${c}`),Oe(n,(u,f)=>{var C;return(C=I())==null?void 0:C(u,f)},M),Me(()=>$("error",n,()=>d(A()))),Z(()=>{K(n,"style",a.style??""),K(n,"src",d()),K(n,"alt",a.alt||"")}),bt(n),P(v,n)},X=v=>{var n=ye(),u=ie(n);{var f=R=>{var T=Dt(),w=m(T),q=m(w,!0);y(w),y(T),Z(ae=>{K(w,"font-size",L()),He(w,`avatar-text ${b()??""}`),mt(q,ae)},[()=>String(i()).substring(0,2).toUpperCase()],ge),P(R,T)},C=R=>{var T=ye(),w=ie(T);se(w,e,"default",{},null),P(R,T)};te(u,R=>{i()?R(f):R(C,!1)},!0)}P(v,n)};te(U,v=>{d()||A()?v(V):v(X,!1)})}y(p),Z(v=>h=$e(p,h,{class:`avatar ${g(l)??""}`,"data-testid":"avatar",...v}),[S],ge),P(t,p),me()}var Ot=E('<div role="tabpanel" tabindex="0"><!></div>'),Gt=E('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function $t(t,e){const a=pe(e),s=ue(e,["children","$$slots","$$events","$$legacy"]);he(e,!1);const l=z(),i=z(),b=z();let L=r(e,"justify",8,"justify-start"),d=r(e,"border",8,"border-b border-surface-400-500-token"),A=r(e,"active",8,"border-b-2 border-surface-900-50-token"),I=r(e,"hover",8,"hover:variant-soft"),M=r(e,"flex",8,"flex-none"),G=r(e,"padding",8,"px-4 py-2"),j=r(e,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),N=r(e,"spacing",8,"space-y-1"),B=r(e,"regionList",8,""),x=r(e,"regionPanel",8,""),H=r(e,"labelledby",8,""),_=r(e,"panel",8,"");fe("active",A()),fe("hover",I()),fe("flex",M()),fe("padding",G()),fe("rounded",j()),fe("spacing",N());const c="space-y-4",S="flex overflow-x-auto hide-scrollbar",p="";D(()=>o(s),()=>{k(l,`${c} ${s.class??""}`)}),D(()=>(o(L()),o(d()),o(B())),()=>{k(i,`${S} ${L()} ${d()} ${B()}`)}),D(()=>o(x()),()=>{k(b,`${p} ${x()}`)}),be(),_e();var h=Gt(),U=m(h),V=m(U);se(V,e,"default",{},null),y(U);var X=W(U,2);{var v=n=>{var u=Ot(),f=m(u);se(f,e,"panel",{},null),y(u),Z(()=>{F(u,`tab-panel ${g(b)??""}`),K(u,"aria-labelledby",_())}),P(n,u)};te(X,n=>{a.panel&&n(v)})}y(h),Z(()=>{F(h,`tab-group ${g(l)??""}`),F(U,`tab-list ${g(i)??""}`),K(U,"aria-labelledby",H())}),P(t,h),me()}var Et=E('<div class="tab-lead"><!></div>'),Ht=E('<a><div><!> <div class="tab-label"><!></div></div></a>');function Re(t,e){const a=pe(e),s=ue(e,["children","$$slots","$$events","$$legacy"]),l=ue(s,["selected","controls","active","hover","flex","padding","rounded","spacing"]);he(e,!1);const i=z(),b=z(),L=z();let d=r(e,"selected",8,!1),A=r(e,"controls",8,""),I=r(e,"active",24,()=>ve("active")),M=r(e,"hover",24,()=>ve("hover")),G=r(e,"flex",24,()=>ve("flex")),j=r(e,"padding",24,()=>ve("padding")),N=r(e,"rounded",24,()=>ve("rounded")),B=r(e,"spacing",24,()=>ve("spacing"));const x="text-center cursor-pointer transition-colors duration-100",H="";function _(){return delete l.class,l}D(()=>(o(d()),o(I()),o(M())),()=>{k(i,d()?I():M())}),D(()=>(o(G()),o(j()),o(N()),g(i),o(s)),()=>{k(b,`${x} ${G()} ${j()} ${N()} ${g(i)} ${s.class??""}`)}),D(()=>o(B()),()=>{k(L,`${H} ${B()}`)}),be(),_e();var c=Ht();let S;var p=m(c),h=m(p);{var U=v=>{var n=Et(),u=m(n);se(u,e,"lead",{},null),y(n),P(v,n)};te(h,v=>{a.lead&&v(U)})}var V=W(h,2),X=m(V);se(X,e,"default",{},null),y(V),y(p),y(c),Z(v=>{S=$e(c,S,{class:`tab-anchor ${g(b)??""}`,href:s.href,...v,"aria-controls":A(),role:"button","data-testid":"tab-anchor"}),F(p,`tab-interface ${g(L)??""}`)},[_],ge),$("click",c,function(v){Q.call(this,e,v)}),$("keydown",c,function(v){Q.call(this,e,v)}),$("keyup",c,function(v){Q.call(this,e,v)}),$("keypress",c,function(v){Q.call(this,e,v)}),$("mouseover",c,function(v){Q.call(this,e,v)}),$("mouseleave",c,function(v){Q.call(this,e,v)}),$("focus",c,function(v){Q.call(this,e,v)}),$("blur",c,function(v){Q.call(this,e,v)}),P(t,c),me()}var Ut=E('<div role="switch" aria-label="Light Switch" tabindex="0"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path></path></svg></div></div>');function De(t,e){const a=ue(e,["children","$$slots","$$events","$$legacy"]);he(e,!1);const[s,l]=je(),i=()=>xe(ze,"$modeCurrent",s),b=z(),L=z(),d=z(),A=z(),I=z(),M=z(),G=z();let j=r(e,"title",8,"Toggle light or dark mode."),N=r(e,"bgLight",8,"bg-surface-50"),B=r(e,"bgDark",8,"bg-surface-900"),x=r(e,"fillLight",8,"fill-surface-50"),H=r(e,"fillDark",8,"fill-surface-900"),_=r(e,"width",8,"w-12"),c=r(e,"height",8,"h-6"),S=r(e,"ring",8,"ring-[1px] ring-surface-500/30"),p=r(e,"rounded",8,"rounded-token");const h="transition-all duration-[200ms]",U="cursor-pointer",V="aspect-square scale-[0.8] flex justify-center items-center",X="w-[70%] aspect-square",v={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function n(){de(ze,!i()),wt(i()),Ce(i())}function u(w){["Enter","Space"].includes(w.code)&&(w.preventDefault(),w.currentTarget.click())}Se(()=>{"modeCurrent"in localStorage||Ce(kt())}),D(()=>(i(),o(N()),o(B())),()=>{k(b,i()===!0?N():B())}),D(()=>(i(),o(B()),o(N())),()=>{k(L,i()===!0?B():N())}),D(()=>i(),()=>{k(d,i()===!0?"translate-x-[100%]":"")}),D(()=>(i(),o(x()),o(H())),()=>{k(A,i()===!0?x():H())}),D(()=>(o(_()),o(c()),o(S()),o(p()),g(b),o(a)),()=>{k(I,`${U} ${h} ${_()} ${c()} ${S()} ${p()} ${g(b)} ${a.class??""}`)}),D(()=>(o(c()),o(p()),g(L),g(d)),()=>{k(M,`${V} ${h} ${c()} ${p()} ${g(L)} ${g(d)}`)}),D(()=>g(A),()=>{k(G,`${X} ${g(A)}`)}),be(),_e();var f=Ut();yt(w=>{var q=ye(),ae=ie(q);At(ae,()=>`<script nonce="%sveltekit.nonce%">(${xt.toString()})();<\/script>`),P(w,q)});var C=m(f),R=m(C),T=m(R);y(R),y(C),y(f),Z(()=>{F(f,`lightswitch-track ${g(I)??""}`),K(f,"aria-checked",i()),K(f,"title",j()),F(C,`lightswitch-thumb ${g(M)??""}`),He(R,`lightswitch-icon ${g(G)??""}`),K(T,"d",i()?v.sun:v.moon)}),$("click",f,n),$("click",f,function(w){Q.call(this,e,w)}),$("keydown",f,u),$("keydown",f,function(w){Q.call(this,e,w)}),$("keyup",f,function(w){Q.call(this,e,w)}),$("keypress",f,function(w){Q.call(this,e,w)}),P(t,f),me(),l()}const qt=()=>{const t=pt;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},Jt={subscribe(t){return qt().page.subscribe(t)}};var Vt=E('<a href="/"><strong class="text-xl uppercase">Java Booklet</strong></a>'),Kt=E("<!> <!>",1),Yt=E('<span class="badge-icon variant-filled-primary absolute -top-1 -right-1 z-10">✓</span>'),Ft=E('<div class="flex items-center space-x-2 sm:space-x-4 flex-wrap justify-end"><!> <div class="relative"><button class="btn-icon variant-ghost-surface"><!> <!></button></div></div>'),Qt=E('<li><button class="w-full text-left p-2 hover:bg-primary-500/10 rounded">Logout</button></li> <li><div class="flex items-center"><!></div></li>',1),Wt=E('<li><a href="/login" class="w-full block p-2 hover:bg-primary-500/10 rounded">Login</a></li> <li><a href="/register" class="w-full block p-2 hover:bg-primary-500/10 rounded">Register</a></li> <li><div class="flex items-center"><!></div></li>',1),Xt=E('<li><div class="p-2 text-center text-sm opacity-75">Loading...</div></li>'),Zt=E('<div><!></div> <div class="card p-4 w-60 shadow-xl fixed z-[1000]" data-popup="userMenu"><nav class="list-nav"><ul><!></ul></nav></div>',1);function ca(t,e){he(e,!1);const[a,s]=je(),l=()=>xe(Jt,"$page",a),i=()=>xe(d,"$userStore",a),b=z(),L=z(),d=ct(null);let A=z("G"),I=z(!1);const M={event:"click",target:"userMenu",placement:"bottom-end"};function G(n){if(!n)return"G";const u=n.split(/[\s-]+/);return u.length===1?n.substring(0,2).toUpperCase():(u[0][0]+u[u.length-1][0]).toUpperCase()}async function j(){try{const n=localStorage.getItem("user");if(n)try{const u=JSON.parse(n);de(d,u),k(A,G(u.username))}catch(u){console.error("Error parsing localStorage data:",u),localStorage.removeItem("user")}if(typeof window<"u")try{const u=await fetch("/verify-auth",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(console.log("Server response status:",u.status),u.ok){const f=await u.json();console.log("Server auth response:",f),k(I,!0),f.is_authenticated?(de(d,{id:f.user_id,username:f.username}),k(A,G(f.username)),localStorage.setItem("user",JSON.stringify(i()))):(console.log("Server says: not authenticated"),localStorage.removeItem("user"),de(d,null),k(A,"G"))}else if(u.status===401){console.log("Auth token expired, attempting refresh...");const f=!1;k(I,!0),f||(console.log("Token refresh failed, logging out..."),localStorage.removeItem("user"),de(d,null),k(A,"G"))}else console.warn(`Auth check failed with status: ${u.status}`),k(I,!0)}catch(u){console.error("Auth check error:",u)}}catch(n){console.error("Auth check error:",n),k(I,!0)}}Se(()=>{console.log("Current Path:",g(b)),console.log("isHomePage:",g(L)),j(),window.addEventListener("storage",n=>{n.key==="user"&&(console.log("LocalStorage 'user' changed in another tab, updating..."),j())})});function N(n,u){n.preventDefault(),we(u),console.log("Navigated to:",g(b)),setTimeout(j,100)}let B;Se(()=>(B=setInterval(j,3e5),()=>clearInterval(B)));async function x(){try{const n=await fetch("/logout",{method:"POST",credentials:"include"});localStorage.removeItem("user"),de(d,null),k(A,"G"),k(I,!0),we("/login")}catch(n){console.error("Logout error:",n),localStorage.removeItem("user"),de(d,null),we("/login")}}D(()=>l(),()=>{k(b,l().url.pathname)}),D(()=>g(b),()=>{k(L,g(b)==="/")}),D(()=>i(),()=>{i()!==null&&(console.log("UserStore changed:",i()),k(A,G(i().username)))}),be(),_e();var H=Zt(),_=ie(H),c=m(_);const S=ge(()=>`grid-cols-3 ${g(L)?"bg-white/80 backdrop-blur bg-transparent":"bg-primary"}`);Bt(c,{get class(){return g(S)},slotDefault:"place-self-center",slotTrail:"place-content-end",$$slots:{lead:(n,u)=>{var f=Vt();$("click",f,C=>N(C,"/")),P(n,f)},trail:(n,u)=>{var f=Ft(),C=m(f);$t(C,{regionList:"flex space-x-1 sm:space-x-2",children:(Y,le)=>{var ee=Kt(),ne=ie(ee);const J=ge(()=>g(b)==="/recommendation");Re(ne,{href:"/recommendation",get selected(){return g(J)},$$events:{click:ce=>N(ce,"/recommendation")},children:(ce,qe)=>{Ne();var ke=Le("Brew");P(ce,ke)},$$slots:{default:!0}});var O=W(ne,2);const oe=ge(()=>g(b)==="/archive");Re(O,{href:"/archive",get selected(){return g(oe)},$$events:{click:ce=>N(ce,"/archive")},children:(ce,qe)=>{Ne();var ke=Le("Notes");P(ce,ke)},$$slots:{default:!0}}),P(Y,ee)},$$slots:{default:!0}});var R=W(C,2),T=m(R),w=m(T);jt(w,{get initials(){return g(A)}});var q=W(w,2);{var ae=Y=>{var le=Yt();P(Y,le)};te(q,Y=>{i()&&Y(ae)})}y(T),Oe(T,(Y,le)=>{var ee;return(ee=St)==null?void 0:ee(Y,le)},()=>M),y(R),y(f),P(n,f)}}}),y(_);var p=W(_,2),h=m(p),U=m(h),V=m(U);{var X=n=>{var u=Qt(),f=ie(u),C=m(f);y(f);var R=W(f,2),T=m(R),w=m(T);De(w,{}),y(T),y(R),$("click",C,x),P(n,u)},v=n=>{var u=ye(),f=ie(u);{var C=T=>{var w=Wt(),q=ie(w),ae=m(q);y(q);var Y=W(q,2),le=m(Y);y(Y);var ee=W(Y,2),ne=m(ee),J=m(ne);De(J,{}),y(ne),y(ee),$("click",ae,O=>N(O,"/login")),$("click",le,O=>N(O,"/register")),P(T,w)},R=T=>{var w=Xt();P(T,w)};te(f,T=>{g(I)?T(C):T(R,!1)},!0)}P(n,u)};te(V,n=>{i()?n(X):n(v,!1)})}y(U),y(h),y(p),P(t,H),me(),s()}export{ca as A,Oe as a,F as b,Q as c,At as h,oa as r,K as s};
