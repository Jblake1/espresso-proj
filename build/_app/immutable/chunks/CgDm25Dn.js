import{b as Pe,e as Ve,t as E,a as T,c as ye,n as Fe,d as we}from"./W4TM1z4w.js";import{i as ve}from"./CzBPpHCt.js";import{w as Je,h as se,x as Ie,F as Ke,C as Ce,W as We,aF as Xe,aE as Ye,A as Qe,X as Ze,T as et,e as De,u as tt,r as at,a2 as o,aU as st,B as Ne,ac as rt,aV as lt,aW as it,aX as nt,d as ot,p as ge,aR as j,aS as _e,v as ee,j as he,k as w,t as _,a5 as B,s as Q,n as x,g as h,y as fe,f as ne,aQ as de,aT as ue,o as xe,aw as ct}from"./CZLb4j7O.js";import{i as dt,c as ut,d as ft,b as vt,n as gt,f as _t,g as ht,e as O,j as bt,s as mt,k as yt}from"./DdtZw0U8.js";import{l as oe,b as i,i as te,c as Me,s as je,d as ie}from"./B0R6SzIc.js";import{b as pe,a as ae,c as Be,g as kt,m as Re,d as wt,e as xt,f as St}from"./TVdZ1f0f.js";import{o as Le}from"./B49uhO74.js";import{g as Se}from"./DNRzb7KC.js";function At(t,e,a,s,r){var n=t,b="",m;Je(()=>{if(b===(b=e()??"")){se&&Ie();return}m!==void 0&&(et(m),m=void 0),b!==""&&(m=Ke(()=>{if(se){Ce.data;for(var d=Ie(),z=d;d!==null&&(d.nodeType!==8||d.data!=="");)z=d,d=We(d);if(d===null)throw Xe(),Ye;Pe(Ce,z),n=Qe(d);return}var D=b+"",P=Ve(D);Pe(Ze(P),P.lastChild),n.before(P)}))})}function $e(t,e,a){De(()=>{var s=tt(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var r=!1,n={};at(()=>{var b=a();o(b),r&&st(n,b)&&(n=b,s.update(b))}),r=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function Oe(t){var e,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(a=Oe(t[e]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function Lt(){for(var t,e,a=0,s="",r=arguments.length;a<r;a++)(t=arguments[a])&&(e=Oe(t))&&(s&&(s+=" "),s+=e);return s}function pt(t){return typeof t=="object"?Lt(t):t??""}function ia(t){if(se){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var s=t.value;K(t,"value",null),t.value=s}if(t.hasAttribute("checked")){var r=t.checked;K(t,"checked",null),t.checked=r}}};t.__on_r=a,lt(a),_t()}}function Tt(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function K(t,e,a,s){var r=t.__attributes??(t.__attributes={});se&&(r[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||r[e]!==(r[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[it]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ge(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Ee(t,e,a,s,r=!1,n=!1,b=!1){let m=se&&n;m&&Ne(!1);var d=e||{},z=t.tagName==="OPTION";for(var D in e)D in a||(a[D]=null);a.class&&(a.class=pt(a.class));var P=Ge(t),R=t.__attributes??(t.__attributes={});for(const v in a){let c=a[v];if(z&&v==="value"&&c==null){t.value=t.__value="",d[v]=c;continue}var G=d[v];if(c!==G){d[v]=c;var $=v[0]+v[1];if($!=="$$"){if($==="on"){const S={},L="$$"+v;let g=v.slice(2);var I=ht(g);if(dt(g)&&(g=g.slice(0,-7),S.capture=!0),!I&&G){if(c!=null)continue;t.removeEventListener(g,d[L],S),d[L]=null}if(c!=null)if(I)t[`__${g}`]=c,ft([g]);else{let U=function(u){d[v].call(this,u)};d[L]=ut(g,t,U,S)}else I&&(t[`__${g}`]=void 0)}else if(v==="style"&&c!=null)t.style.cssText=c+"";else if(v==="autofocus")vt(t,!!c);else if(!n&&(v==="__value"||v==="value"&&c!=null))t.value=t.__value=c;else if(v==="selected"&&z)Tt(t,c);else{var y=v;r||(y=gt(y));var H=y==="defaultValue"||y==="defaultChecked";if(c==null&&!n&&!H)if(R[v]=null,y==="value"||y==="checked"){let S=t;const L=e===void 0;if(y==="value"){let g=S.defaultValue;S.removeAttribute(y),S.defaultValue=g,S.value=S.__value=L?g:null}else{let g=S.defaultChecked;S.removeAttribute(y),S.defaultChecked=g,S.checked=L?g:!1}}else t.removeAttribute(v);else H||P.includes(y)&&(n||typeof c!="string")?t[y]=c:typeof c!="function"&&K(t,y,c)}v==="style"&&"__styles"in t&&(t.__styles={})}}}return m&&Ne(!0),d}var ze=new Map;function Ge(t){var e=ze.get(t.nodeName);if(e)return e;ze.set(t.nodeName,e=[]);for(var a,s=t,r=Element.prototype;r!==s;){a=nt(s);for(var n in a)a[n].set&&e.push(n);s=rt(s)}return e}function He(t,e,a){var s=t.__className,r=Ue(e);se&&t.getAttribute("class")===r?t.__className=r:(s!==r||se&&t.getAttribute("class")!==r)&&(r===""?t.removeAttribute("class"):t.setAttribute("class",r),t.__className=r)}function X(t,e,a){var s=t.__className,r=Ue(e);se&&t.className===r?t.__className=r:(s!==r||se&&t.className!==r)&&(e==null?t.removeAttribute("class"):t.className=r,t.__className=r)}function Ue(t,e){return(t??"")+""}function Y(t,e){var n;var a=(n=t.$$events)==null?void 0:n[e.type],s=ot(a)?a.slice():a==null?[]:[a];for(var r of s)r.call(this,e)}var Pt=E("<div><!></div>"),It=E("<div><!></div>"),Ct=E("<div><!></div>"),Nt=E('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function Bt(t,e){const a=pe(e),s=oe(e,["children","$$slots","$$events","$$legacy"]);ge(e,!1);const r=B(),n=B(),b=B(),m=B(),d=B(),z=B();let D=i(e,"background",8,"bg-surface-100-800-token"),P=i(e,"border",8,""),R=i(e,"padding",8,"p-4"),G=i(e,"shadow",8,""),$=i(e,"spacing",8,"space-y-4"),I=i(e,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),y=i(e,"gap",8,"gap-4"),H=i(e,"regionRowMain",8,""),v=i(e,"regionRowHeadline",8,""),c=i(e,"slotLead",8,""),S=i(e,"slotDefault",8,""),L=i(e,"slotTrail",8,""),g=i(e,"label",8,""),U=i(e,"labelledby",8,"");const u="flex flex-col",f="grid items-center",l="",k="flex-none flex justify-between items-center",M="flex-auto",A="flex-none flex items-center space-x-4";j(()=>(o(D()),o(P()),o($()),o(R()),o(G()),o(s)),()=>{_(r,`${u} ${D()} ${P()} ${$()} ${R()} ${G()} ${s.class??""}`)}),j(()=>(o(I()),o(y()),o(H())),()=>{_(n,`${f} ${I()} ${y()} ${H()}`)}),j(()=>o(v()),()=>{_(b,`${l} ${v()}`)}),j(()=>o(c()),()=>{_(m,`${k} ${c()}`)}),j(()=>o(S()),()=>{_(d,`${M} ${S()}`)}),j(()=>o(L()),()=>{_(z,`${A} ${L()}`)}),_e(),ve();var C=Nt(),N=w(C),V=w(N);{var p=J=>{var F=Pt(),le=w(F);ae(le,e,"lead",{},null),x(F),ee(()=>X(F,`app-bar-slot-lead ${h(m)??""}`)),T(J,F)};te(V,J=>{a.lead&&J(p)})}var W=Q(V,2),q=w(W);ae(q,e,"default",{},null),x(W);var ce=Q(W,2);{var re=J=>{var F=It(),le=w(F);ae(le,e,"trail",{},null),x(F),ee(()=>X(F,`app-bar-slot-trail ${h(z)??""}`)),T(J,F)};te(ce,J=>{a.trail&&J(re)})}x(N);var me=Q(N,2);{var ke=J=>{var F=Ct(),le=w(F);ae(le,e,"headline",{},null),x(F),ee(()=>X(F,`app-bar-row-headline ${h(b)??""}`)),T(J,F)};te(me,J=>{a.headline&&J(ke)})}x(C),ee(()=>{X(C,`app-bar ${h(r)??""}`),K(C,"aria-label",g()),K(C,"aria-labelledby",U()),X(N,`app-bar-row-main ${h(n)??""}`),X(W,`app-bar-slot-default ${h(d)??""}`)}),T(t,C),he()}var Rt=E("<img>"),zt=Fe('<svg class="avatar-initials w-full h-full" viewBox="0 0 512 512"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-weight="bold"> </text></svg>'),Dt=E("<figure><!></figure>");function Mt(t,e){const a=oe(e,["children","$$slots","$$events","$$legacy"]),s=oe(a,["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"]);ge(e,!1);const r=B();let n=i(e,"initials",8,""),b=i(e,"fill",8,"fill-token"),m=i(e,"fontSize",8,150),d=i(e,"src",12,""),z=i(e,"fallback",8,""),D=i(e,"action",8,()=>{}),P=i(e,"actionParams",8,""),R=i(e,"background",8,"bg-surface-400-500-token"),G=i(e,"width",8,"w-16"),$=i(e,"border",8,""),I=i(e,"rounded",8,"rounded-full"),y=i(e,"shadow",8,""),H=i(e,"cursor",8,""),v="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",c="w-full object-cover";function S(){return delete s.class,s}j(()=>(o(R()),o(G()),o($()),o(I()),o(y()),o(H()),o(a)),()=>{_(r,`${v} ${R()} ${G()} ${$()} ${I()} ${y()} ${H()} ${a.class??""}`)}),_e(),ve();var L=Dt();let g;var U=w(L);{var u=l=>{var k=Rt();X(k,`avatar-image ${c}`),$e(k,(M,A)=>{var C;return(C=D())==null?void 0:C(M,A)},P),De(()=>O("error",k,()=>d(z()))),ee(()=>{K(k,"style",a.style??""),K(k,"src",d()),K(k,"alt",a.alt||"")}),bt(k),T(l,k)},f=l=>{var k=ye(),M=ne(k);{var A=N=>{var V=zt(),p=w(V),W=w(p,!0);x(p),x(V),ee(q=>{K(p,"font-size",m()),He(p,`avatar-text ${b()??""}`),mt(W,q)},[()=>String(n()).substring(0,2).toUpperCase()],fe),T(N,V)},C=N=>{var V=ye(),p=ne(V);ae(p,e,"default",{},null),T(N,V)};te(M,N=>{n()?N(A):N(C,!1)},!0)}T(l,k)};te(U,l=>{d()||z()?l(u):l(f,!1)})}x(L),ee(l=>g=Ee(L,g,{class:`avatar ${h(r)??""}`,"data-testid":"avatar",...l}),[S],fe),T(t,L),he()}var jt=E('<div role="tabpanel" tabindex="0"><!></div>'),$t=E('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function Ot(t,e){const a=pe(e),s=oe(e,["children","$$slots","$$events","$$legacy"]);ge(e,!1);const r=B(),n=B(),b=B();let m=i(e,"justify",8,"justify-start"),d=i(e,"border",8,"border-b border-surface-400-500-token"),z=i(e,"active",8,"border-b-2 border-surface-900-50-token"),D=i(e,"hover",8,"hover:variant-soft"),P=i(e,"flex",8,"flex-none"),R=i(e,"padding",8,"px-4 py-2"),G=i(e,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),$=i(e,"spacing",8,"space-y-1"),I=i(e,"regionList",8,""),y=i(e,"regionPanel",8,""),H=i(e,"labelledby",8,""),v=i(e,"panel",8,"");de("active",z()),de("hover",D()),de("flex",P()),de("padding",R()),de("rounded",G()),de("spacing",$());const c="space-y-4",S="flex overflow-x-auto hide-scrollbar",L="";j(()=>o(s),()=>{_(r,`${c} ${s.class??""}`)}),j(()=>(o(m()),o(d()),o(I())),()=>{_(n,`${S} ${m()} ${d()} ${I()}`)}),j(()=>o(y()),()=>{_(b,`${L} ${y()}`)}),_e(),ve();var g=$t(),U=w(g),u=w(U);ae(u,e,"default",{},null),x(U);var f=Q(U,2);{var l=k=>{var M=jt(),A=w(M);ae(A,e,"panel",{},null),x(M),ee(()=>{X(M,`tab-panel ${h(b)??""}`),K(M,"aria-labelledby",v())}),T(k,M)};te(f,k=>{a.panel&&k(l)})}x(g),ee(()=>{X(g,`tab-group ${h(r)??""}`),X(U,`tab-list ${h(n)??""}`),K(U,"aria-labelledby",H())}),T(t,g),he()}var Et=E('<div class="tab-lead"><!></div>'),Gt=E('<a><div><!> <div class="tab-label"><!></div></div></a>');function Ae(t,e){const a=pe(e),s=oe(e,["children","$$slots","$$events","$$legacy"]),r=oe(s,["selected","controls","active","hover","flex","padding","rounded","spacing"]);ge(e,!1);const n=B(),b=B(),m=B();let d=i(e,"selected",8,!1),z=i(e,"controls",8,""),D=i(e,"active",24,()=>ue("active")),P=i(e,"hover",24,()=>ue("hover")),R=i(e,"flex",24,()=>ue("flex")),G=i(e,"padding",24,()=>ue("padding")),$=i(e,"rounded",24,()=>ue("rounded")),I=i(e,"spacing",24,()=>ue("spacing"));const y="text-center cursor-pointer transition-colors duration-100",H="";function v(){return delete r.class,r}j(()=>(o(d()),o(D()),o(P())),()=>{_(n,d()?D():P())}),j(()=>(o(R()),o(G()),o($()),h(n),o(s)),()=>{_(b,`${y} ${R()} ${G()} ${$()} ${h(n)} ${s.class??""}`)}),j(()=>o(I()),()=>{_(m,`${H} ${I()}`)}),_e(),ve();var c=Gt();let S;var L=w(c),g=w(L);{var U=l=>{var k=Et(),M=w(k);ae(M,e,"lead",{},null),x(k),T(l,k)};te(g,l=>{a.lead&&l(U)})}var u=Q(g,2),f=w(u);ae(f,e,"default",{},null),x(u),x(L),x(c),ee(l=>{S=Ee(c,S,{class:`tab-anchor ${h(b)??""}`,href:s.href,...l,"aria-controls":z(),role:"button","data-testid":"tab-anchor"}),X(L,`tab-interface ${h(m)??""}`)},[v],fe),O("click",c,function(l){Y.call(this,e,l)}),O("keydown",c,function(l){Y.call(this,e,l)}),O("keyup",c,function(l){Y.call(this,e,l)}),O("keypress",c,function(l){Y.call(this,e,l)}),O("mouseover",c,function(l){Y.call(this,e,l)}),O("mouseleave",c,function(l){Y.call(this,e,l)}),O("focus",c,function(l){Y.call(this,e,l)}),O("blur",c,function(l){Y.call(this,e,l)}),T(t,c),he()}var Ht=E('<div role="switch" aria-label="Light Switch" tabindex="0"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path></path></svg></div></div>');function Ut(t,e){const a=oe(e,["children","$$slots","$$events","$$legacy"]);ge(e,!1);const[s,r]=je(),n=()=>Me(Re,"$modeCurrent",s),b=B(),m=B(),d=B(),z=B(),D=B(),P=B(),R=B();let G=i(e,"title",8,"Toggle light or dark mode."),$=i(e,"bgLight",8,"bg-surface-50"),I=i(e,"bgDark",8,"bg-surface-900"),y=i(e,"fillLight",8,"fill-surface-50"),H=i(e,"fillDark",8,"fill-surface-900"),v=i(e,"width",8,"w-12"),c=i(e,"height",8,"h-6"),S=i(e,"ring",8,"ring-[1px] ring-surface-500/30"),L=i(e,"rounded",8,"rounded-token");const g="transition-all duration-[200ms]",U="cursor-pointer",u="aspect-square scale-[0.8] flex justify-center items-center",f="w-[70%] aspect-square",l={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function k(){ie(Re,!n()),wt(n()),Be(n())}function M(p){["Enter","Space"].includes(p.code)&&(p.preventDefault(),p.currentTarget.click())}Le(()=>{"modeCurrent"in localStorage||Be(kt())}),j(()=>(n(),o($()),o(I())),()=>{_(b,n()===!0?$():I())}),j(()=>(n(),o(I()),o($())),()=>{_(m,n()===!0?I():$())}),j(()=>n(),()=>{_(d,n()===!0?"translate-x-[100%]":"")}),j(()=>(n(),o(y()),o(H())),()=>{_(z,n()===!0?y():H())}),j(()=>(o(v()),o(c()),o(S()),o(L()),h(b),o(a)),()=>{_(D,`${U} ${g} ${v()} ${c()} ${S()} ${L()} ${h(b)} ${a.class??""}`)}),j(()=>(o(c()),o(L()),h(m),h(d)),()=>{_(P,`${u} ${g} ${c()} ${L()} ${h(m)} ${h(d)}`)}),j(()=>h(z),()=>{_(R,`${f} ${h(z)}`)}),_e(),ve();var A=Ht();yt(p=>{var W=ye(),q=ne(W);At(q,()=>`<script nonce="%sveltekit.nonce%">(${xt.toString()})();<\/script>`),T(p,W)});var C=w(A),N=w(C),V=w(N);x(N),x(C),x(A),ee(()=>{X(A,`lightswitch-track ${h(D)??""}`),K(A,"aria-checked",n()),K(A,"title",G()),X(C,`lightswitch-thumb ${h(P)??""}`),He(N,`lightswitch-icon ${h(R)??""}`),K(V,"d",n()?l.sun:l.moon)}),O("click",A,k),O("click",A,function(p){Y.call(this,e,p)}),O("keydown",A,M),O("keydown",A,function(p){Y.call(this,e,p)}),O("keyup",A,function(p){Y.call(this,e,p)}),O("keypress",A,function(p){Y.call(this,e,p)}),T(t,A),he(),r()}var qt=E('<a href="/"><strong class="text-xl uppercase">Java Booklet</strong></a>'),Vt=E("<!> <!> <!>",1),Ft=E('<span class="badge-icon variant-filled-primary absolute -top-1 -right-1 z-10">âœ“</span>'),Jt=E('<div class="flex items-center space-x-2 sm:space-x-4 flex-wrap justify-end"><!> <div class="flex items-center"><!></div> <div class="relative"><button class="btn-icon variant-ghost-surface"><!> <!></button></div></div>'),Kt=E('<li><button class="w-full text-left p-2 hover:bg-primary-500/10 rounded">Logout</button></li>'),Wt=E('<li><a href="/login" class="w-full block p-2 hover:bg-primary-500/10 rounded">Login</a></li> <li><a href="/register" class="w-full block p-2 hover:bg-primary-500/10 rounded">Register</a></li>',1),Xt=E('<li><div class="p-2 text-center text-sm opacity-75">Loading...</div></li>'),Yt=E('<div><!></div> <div class="card p-4 w-60 shadow-xl fixed z-[1000]" data-popup="userMenu"><nav class="list-nav"><ul><!></ul></nav></div>',1);function na(t,e){ge(e,!1);const[a,s]=je(),r=()=>Me(n,"$userStore",a),n=ct(null);let b=B(""),m=B("G"),d=B(!1);const z={event:"click",target:"userMenu",placement:"bottom-end"};function D(u){if(!u)return"G";const f=u.split(/[\s-]+/);return f.length===1?u.substring(0,2).toUpperCase():(f[0][0]+f[f.length-1][0]).toUpperCase()}async function P(){try{const u=localStorage.getItem("user");if(u)try{const f=JSON.parse(u);ie(n,f),_(m,D(f.username))}catch(f){console.error("Error parsing localStorage data:",f),localStorage.removeItem("user")}if(typeof window<"u")try{const f=await fetch("/verify-auth",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(console.log("Server response status:",f.status),f.ok){const l=await f.json();console.log("Server auth response:",l),_(d,!0),l.is_authenticated?(ie(n,{id:l.user_id,username:l.username}),_(m,D(l.username)),localStorage.setItem("user",JSON.stringify(r()))):(console.log("Server says: not authenticated"),localStorage.removeItem("user"),ie(n,null),_(m,"G"))}else if(f.status===401){console.log("Auth token expired, attempting refresh...");const l=!1;_(d,!0),l||(console.log("Token refresh failed, logging out..."),localStorage.removeItem("user"),ie(n,null),_(m,"G"))}else console.warn(`Auth check failed with status: ${f.status}`),_(d,!0)}catch(f){console.error("Auth check error:",f)}}catch(u){console.error("Auth check error:",u),_(d,!0)}}Le(()=>{_(b,window.location.pathname),P(),window.addEventListener("storage",u=>{u.key==="user"&&(console.log("LocalStorage 'user' changed in another tab, updating..."),P())})});function R(u,f){u.preventDefault(),Se(f),_(b,f),setTimeout(P,100)}let G;Le(()=>(G=setInterval(P,3e5),()=>clearInterval(G)));async function $(){try{const u=await fetch("/logout",{method:"POST",credentials:"include"});localStorage.removeItem("user"),ie(n,null),_(m,"G"),_(d,!0),Se("/login")}catch(u){console.error("Logout error:",u),localStorage.removeItem("user"),ie(n,null),Se("/login")}}j(()=>r(),()=>{r()!==null&&(console.log("UserStore changed:",r()),_(m,D(r().username)))}),_e(),ve();var I=Yt(),y=ne(I),H=w(y);Bt(H,{gridColumns:"grid-cols-3",slotDefault:"place-self-center",slotTrail:"place-content-end",$$slots:{lead:(u,f)=>{var l=qt();O("click",l,k=>R(k,"/")),T(u,l)},trail:(u,f)=>{var l=Jt(),k=w(l);Ot(k,{regionList:"flex space-x-1 sm:space-x-2",children:(q,ce)=>{var re=Vt(),me=ne(re);const ke=fe(()=>h(b)==="/recommendation");Ae(me,{href:"/recommendation",get selected(){return h(ke)},$$events:{click:Z=>R(Z,"/recommendation")},children:(Z,Te)=>{xe();var be=we("Recommendation");T(Z,be)},$$slots:{default:!0}});var J=Q(me,2);const F=fe(()=>h(b)==="/archive");Ae(J,{href:"/archive",get selected(){return h(F)},$$events:{click:Z=>R(Z,"/archive")},children:(Z,Te)=>{xe();var be=we("Notes");T(Z,be)},$$slots:{default:!0}});var le=Q(J,2);const qe=fe(()=>h(b)==="/");Ae(le,{href:"/",get selected(){return h(qe)},$$events:{click:Z=>R(Z,"/")},children:(Z,Te)=>{xe();var be=we("Home");T(Z,be)},$$slots:{default:!0}}),T(q,re)},$$slots:{default:!0}});var M=Q(k,2),A=w(M);Ut(A,{}),x(M);var C=Q(M,2),N=w(C),V=w(N);Mt(V,{get initials(){return h(m)}});var p=Q(V,2);{var W=q=>{var ce=Ft();T(q,ce)};te(p,q=>{r()&&q(W)})}x(N),$e(N,(q,ce)=>{var re;return(re=St)==null?void 0:re(q,ce)},()=>z),x(C),x(l),T(u,l)}}}),x(y);var v=Q(y,2),c=w(v),S=w(c),L=w(S);{var g=u=>{var f=Kt(),l=w(f);x(f),O("click",l,$),T(u,f)},U=u=>{var f=ye(),l=ne(f);{var k=A=>{var C=Wt(),N=ne(C),V=w(N);x(N);var p=Q(N,2),W=w(p);x(p),O("click",V,q=>R(q,"/login")),O("click",W,q=>R(q,"/register")),T(A,C)},M=A=>{var C=Xt();T(A,C)};te(l,A=>{h(d)?A(k):A(M,!1)},!0)}T(u,f)};te(L,u=>{r()?u(g):u(U,!1)})}x(S),x(c),x(v),T(t,I),he(),s()}export{na as A,$e as a,X as b,Y as c,At as h,ia as r,K as s};
