import{h as X,M as Y,ai as g,a1 as R,aj as B}from"./DOYWxbE7.js";function oe(e,t,r,i,p){var f;X&&Y();var u=(f=t.$$slots)==null?void 0:f[r],c=!1;u===!0&&(u=t[r==="default"?"children":r],c=!0),u===void 0?p!==null&&p(e):u(e,c?()=>i:i)}function re(e){const t={};e.children&&(t.default=!0);for(const r in e.$$slots)t[r]=!0;return t}const G=g(void 0);function se(e,t){const{computePosition:r,autoUpdate:i,offset:p,shift:u,flip:c,arrow:f,size:E,autoPlacement:l,hide:m,inline:L}=R(G),s={open:!1,autoUpdateCleanup:()=>{}},M=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let b;const w="https://www.skeleton.dev/utilities/popups";let n,S;function P(){n=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),S=n.querySelector(".arrow")??document.createElement("div")}P();function $(){var a,h,v,D,F,O,q,z;if(!n)throw new Error(`The data-popup="${t.target}" element was not found. ${w}`);if(!r)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${w}`);if(!p)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${w}`);if(!u)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${w}`);if(!c)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${w}`);if(!f)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${w}`);const o=[];E&&o.push(E((a=t.middleware)==null?void 0:a.size)),l&&o.push(l((h=t.middleware)==null?void 0:h.autoPlacement)),m&&o.push(m((v=t.middleware)==null?void 0:v.hide)),L&&o.push(L((D=t.middleware)==null?void 0:D.inline)),r(e,n,{placement:t.placement??"bottom",middleware:[p(((F=t.middleware)==null?void 0:F.offset)??8),u(((O=t.middleware)==null?void 0:O.shift)??{padding:8}),c((q=t.middleware)==null?void 0:q.flip),f(((z=t.middleware)==null?void 0:z.arrow)??{element:S||null}),...o]}).then(({x:V,y:W,placement:_,middlewareData:J})=>{if(Object.assign(n.style,{left:`${V}px`,top:`${W}px`}),S){const{x:Q,y:T}=J.arrow,K={top:"bottom",right:"left",bottom:"top",left:"right"}[_.split("-")[0]];Object.assign(S.style,{left:Q!=null?`${Q}px`:"",top:T!=null?`${T}px`:"",right:"",bottom:"",[K]:"-4px"})}})}function y(){n&&(s.open=!0,t.state&&t.state({state:s.open}),$(),n.style.display="block",n.style.opacity="1",n.style.pointerEvents="auto",n.removeAttribute("inert"),s.autoUpdateCleanup=i(e,n,$),b=Array.from(n==null?void 0:n.querySelectorAll(M)))}function d(o){if(!n)return;const a=parseFloat(window.getComputedStyle(n).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{s.open=!1,t.state&&t.state({state:s.open}),n.style.opacity="0",n.setAttribute("inert",""),s.autoUpdateCleanup&&s.autoUpdateCleanup(),o&&o()},a)}function k(){s.open===!1?y():d()}function A(o){!e.contains(o.target)&&!n.contains(o.target)&&d()}function U(o){if(s.open===!1||e.contains(o.target))return;if(n&&n.contains(o.target)===!1){const v=window.getSelection();v&&v.toString().length==0&&d();return}const a=t.closeQuery===void 0?"a[href], button":t.closeQuery;if(a==="")return;const h=n==null?void 0:n.querySelectorAll(a);h==null||h.forEach(v=>{v.contains(o.target)&&d()})}const I=o=>{if(s.open===!1)return;const a=o.key;if(a==="Escape"){o.preventDefault(),e.focus(),d();return}b=Array.from(n==null?void 0:n.querySelectorAll(M)),s.open&&document.activeElement===e&&(a==="ArrowDown"||a==="Tab")&&M.length>0&&b.length>0&&(o.preventDefault(),b[0].focus())};switch(t.event){case"click":e.addEventListener("click",k,!0),window.addEventListener("mouseup",A,!0),window.addEventListener("click",U,!0);break;case"hover":e.addEventListener("mouseover",y,!0),e.addEventListener("mouseleave",()=>d(),!0);break;case"focus-blur":e.addEventListener("focus",k,!0),e.addEventListener("blur",()=>d(),!0);break;case"focus-click":e.addEventListener("focus",y,!0),window.addEventListener("click",U,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${w}`)}return window.addEventListener("keydown",I,!0),$(),{update(o){d(()=>{t=o,$(),P()})},destroy(){e.removeEventListener("click",k,!0),e.removeEventListener("mouseover",y,!0),e.removeEventListener("mouseleave",()=>d(),!0),e.removeEventListener("focus",k,!0),e.removeEventListener("focus",y,!0),e.removeEventListener("blur",()=>d(),!0),window.removeEventListener("click",U,!0),window.removeEventListener("mouseup",A,!0),window.removeEventListener("keydown",I,!0)}}}const x={};function j(e){return e==="local"?localStorage:sessionStorage}function C(e,t,r){const i=JSON,p="local";function u(c,f){j(p).setItem(c,i.stringify(f))}if(!x[e]){const c=g(t,l=>{const m=j(p).getItem(e);m&&l(i.parse(m));{const L=s=>{s.key===e&&l(s.newValue?i.parse(s.newValue):null)};return window.addEventListener("storage",L),()=>window.removeEventListener("storage",L)}}),{subscribe:f,set:E}=c;x[e]={set(l){u(e,l),E(l)},update(l){const m=l(R(c));u(e,m),E(m)},subscribe:f}}return x[e]}const Z=C("modeOsPrefers",!1),N=C("modeUserPrefers",void 0),ee=C("modeCurrent",!1);function ie(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return Z.set(e),e}function ae(e){N.set(e)}function ue(e){const t=document.documentElement.classList,r="dark";e===!0?t.remove(r):t.add(r),ee.set(e)}function ce(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",r=!("modeUserPrefers"in localStorage),i=window.matchMedia("(prefers-color-scheme: dark)").matches;t||r&&i?e.add("dark"):e.remove("dark")}const H="(prefers-reduced-motion: reduce)";function te(){return window.matchMedia(H).matches}const le=B(te(),e=>{{const t=i=>{e(i.matches)},r=window.matchMedia(H);return r.addEventListener("change",t),()=>{r.removeEventListener("change",t)}}});export{oe as a,re as b,ue as c,ae as d,ce as e,se as f,ie as g,ee as m,le as p,G as s};
