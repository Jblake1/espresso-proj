import{b as Ae,e as Ve,t as E,a as P,c as ye,n as Ke,d as Le}from"./CBSBxhCm.js";import{i as ge}from"./DbMJBHzy.js";import{b as Ye,h as le,a as Pe,j as Fe,e as Te,z as Qe,aF as We,aE as Xe,s as Ze,A as et,w as tt,G as Me,K as at,J as st,a2 as o,aU as rt,c as Ie,ac as lt,aV as it,aW as nt,aX as ot,q as ct,X as _e,aR as R,aS as he,_ as te,Y as be,Q as y,U as w,a5 as z,R as W,T as k,g as f,d as de,W as ne,aQ as fe,aT as ve,Z as Ne,aw as dt}from"./C8TPyCW6.js";import{i as ut,c as ft,d as vt,b as gt,n as _t,f as ht,g as bt,e as $,j as mt,s as yt,k as kt}from"./CQOudoi1.js";import{l as ue,b as r,a as se,c as xe,s as je,d as ce}from"./8hPzZ8EO.js";import{b as Se,a as re,c as Ce,g as wt,m as ze,d as xt,e as pt,f as St}from"./C87CxSex.js";import{o as pe}from"./9HFh9aQn.js";import{s as At,g as we}from"./By39VT9L.js";function Lt(t,e,a,s,l){var i=t,m="",S;Ye(()=>{if(m===(m=e()??"")){le&&Pe();return}S!==void 0&&(tt(S),S=void 0),m!==""&&(S=Fe(()=>{if(le){Te.data;for(var d=Pe(),A=d;d!==null&&(d.nodeType!==8||d.data!=="");)A=d,d=Qe(d);if(d===null)throw We(),Xe;Ae(Te,A),i=Ze(d);return}var I=m+"",D=Ve(I);Ae(et(D),D.lastChild),i.before(D)}))})}function Oe(t,e,a){Me(()=>{var s=at(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var l=!1,i={};st(()=>{var m=a();o(m),l&&rt(i,m)&&(i=m,s.update(m))}),l=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function Ge(t){var e,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=Ge(t[e]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function Pt(){for(var t,e,a=0,s="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=Ge(t))&&(s&&(s+=" "),s+=e);return s}function Tt(t){return typeof t=="object"?Pt(t):t??""}function ca(t){if(le){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var s=t.value;K(t,"value",null),t.value=s}if(t.hasAttribute("checked")){var l=t.checked;K(t,"checked",null),t.checked=l}}};t.__on_r=a,it(a),ht()}}function It(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function K(t,e,a,s){var l=t.__attributes??(t.__attributes={});le&&(l[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||l[e]!==(l[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[nt]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ee(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function $e(t,e,a,s,l=!1,i=!1,m=!1){let S=le&&i;S&&Ie(!1);var d=e||{},A=t.tagName==="OPTION";for(var I in e)I in a||(a[I]=null);a.class&&(a.class=Tt(a.class));var D=Ee(t),j=t.__attributes??(t.__attributes={});for(const h in a){let c=a[h];if(A&&h==="value"&&c==null){t.value=t.__value="",d[h]=c;continue}var M=d[h];if(c!==M){d[h]=c;var N=h[0]+h[1];if(N!=="$$"){if(N==="on"){const p={},L="$$"+h;let b=h.slice(2);var B=bt(b);if(ut(b)&&(b=b.slice(0,-7),p.capture=!0),!B&&M){if(c!=null)continue;t.removeEventListener(b,d[L],p),d[L]=null}if(c!=null)if(B)t[`__${b}`]=c,vt([b]);else{let U=function(V){d[h].call(this,V)};d[L]=ft(b,t,U,p)}else B&&(t[`__${b}`]=void 0)}else if(h==="style"&&c!=null)t.style.cssText=c+"";else if(h==="autofocus")gt(t,!!c);else if(!i&&(h==="__value"||h==="value"&&c!=null))t.value=t.__value=c;else if(h==="selected"&&A)It(t,c);else{var x=h;l||(x=_t(x));var H=x==="defaultValue"||x==="defaultChecked";if(c==null&&!i&&!H)if(j[h]=null,x==="value"||x==="checked"){let p=t;const L=e===void 0;if(x==="value"){let b=p.defaultValue;p.removeAttribute(x),p.defaultValue=b,p.value=p.__value=L?b:null}else{let b=p.defaultChecked;p.removeAttribute(x),p.defaultChecked=b,p.checked=L?b:!1}}else t.removeAttribute(h);else H||D.includes(x)&&(i||typeof c!="string")?t[x]=c:typeof c!="function"&&K(t,x,c)}h==="style"&&"__styles"in t&&(t.__styles={})}}}return S&&Ie(!0),d}var Be=new Map;function Ee(t){var e=Be.get(t.nodeName);if(e)return e;Be.set(t.nodeName,e=[]);for(var a,s=t,l=Element.prototype;l!==s;){a=ot(s);for(var i in a)a[i].set&&e.push(i);s=lt(s)}return e}function He(t,e,a){var s=t.__className,l=Ue(e);le&&t.getAttribute("class")===l?t.__className=l:(s!==l||le&&t.getAttribute("class")!==l)&&(l===""?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)}function F(t,e,a){var s=t.__className,l=Ue(e);le&&t.className===l?t.__className=l:(s!==l||le&&t.className!==l)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function Ue(t,e){return(t??"")+""}function Q(t,e){var i;var a=(i=t.$$events)==null?void 0:i[e.type],s=ct(a)?a.slice():a==null?[]:[a];for(var l of s)l.call(this,e)}var Nt=E("<div><!></div>"),Ct=E("<div><!></div>"),zt=E("<div><!></div>"),Bt=E('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function Rt(t,e){const a=Se(e),s=ue(e,["children","$$slots","$$events","$$legacy"]);_e(e,!1);const l=z(),i=z(),m=z(),S=z(),d=z(),A=z();let I=r(e,"background",8,"bg-surface-100-800-token"),D=r(e,"border",8,""),j=r(e,"padding",8,"p-4"),M=r(e,"shadow",8,""),N=r(e,"spacing",8,"space-y-4"),B=r(e,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),x=r(e,"gap",8,"gap-4"),H=r(e,"regionRowMain",8,""),h=r(e,"regionRowHeadline",8,""),c=r(e,"slotLead",8,""),p=r(e,"slotDefault",8,""),L=r(e,"slotTrail",8,""),b=r(e,"label",8,""),U=r(e,"labelledby",8,"");const V="flex flex-col",X="grid items-center",v="",T="flex-none flex justify-between items-center",u="flex-auto",n="flex-none flex items-center space-x-4";R(()=>(o(I()),o(D()),o(N()),o(j()),o(M()),o(s)),()=>{w(l,`${V} ${I()} ${D()} ${N()} ${j()} ${M()} ${s.class??""}`)}),R(()=>(o(B()),o(x()),o(H())),()=>{w(i,`${X} ${B()} ${x()} ${H()}`)}),R(()=>o(h()),()=>{w(m,`${v} ${h()}`)}),R(()=>o(c()),()=>{w(S,`${T} ${c()}`)}),R(()=>o(p()),()=>{w(d,`${u} ${p()}`)}),R(()=>o(L()),()=>{w(A,`${n} ${L()}`)}),he(),ge();var g=Bt(),C=y(g),O=y(C);{var _=J=>{var q=Nt(),ee=y(q);re(ee,e,"lead",{},null),k(q),te(()=>F(q,`app-bar-slot-lead ${f(S)??""}`)),P(J,q)};se(O,J=>{a.lead&&J(_)})}var G=W(O,2),Z=y(G);re(Z,e,"default",{},null),k(G);var me=W(G,2);{var Y=J=>{var q=Ct(),ee=y(q);re(ee,e,"trail",{},null),k(q),te(()=>F(q,`app-bar-slot-trail ${f(A)??""}`)),P(J,q)};se(me,J=>{a.trail&&J(Y)})}k(C);var ie=W(C,2);{var ae=J=>{var q=zt(),ee=y(q);re(ee,e,"headline",{},null),k(q),te(()=>F(q,`app-bar-row-headline ${f(m)??""}`)),P(J,q)};se(ie,J=>{a.headline&&J(ae)})}k(g),te(()=>{F(g,`app-bar ${f(l)??""}`),K(g,"aria-label",b()),K(g,"aria-labelledby",U()),F(C,`app-bar-row-main ${f(i)??""}`),F(G,`app-bar-slot-default ${f(d)??""}`)}),P(t,g),be()}var Dt=E("<img>"),Mt=Ke('<svg class="avatar-initials w-full h-full" viewBox="0 0 512 512"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-weight="bold"> </text></svg>'),jt=E("<figure><!></figure>");function Ot(t,e){const a=ue(e,["children","$$slots","$$events","$$legacy"]),s=ue(a,["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"]);_e(e,!1);const l=z();let i=r(e,"initials",8,""),m=r(e,"fill",8,"fill-token"),S=r(e,"fontSize",8,150),d=r(e,"src",12,""),A=r(e,"fallback",8,""),I=r(e,"action",8,()=>{}),D=r(e,"actionParams",8,""),j=r(e,"background",8,"bg-surface-400-500-token"),M=r(e,"width",8,"w-16"),N=r(e,"border",8,""),B=r(e,"rounded",8,"rounded-full"),x=r(e,"shadow",8,""),H=r(e,"cursor",8,""),h="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",c="w-full object-cover";function p(){return delete s.class,s}R(()=>(o(j()),o(M()),o(N()),o(B()),o(x()),o(H()),o(a)),()=>{w(l,`${h} ${j()} ${M()} ${N()} ${B()} ${x()} ${H()} ${a.class??""}`)}),he(),ge();var L=jt();let b;var U=y(L);{var V=v=>{var T=Dt();F(T,`avatar-image ${c}`),Oe(T,(u,n)=>{var g;return(g=I())==null?void 0:g(u,n)},D),Me(()=>$("error",T,()=>d(A()))),te(()=>{K(T,"style",a.style??""),K(T,"src",d()),K(T,"alt",a.alt||"")}),mt(T),P(v,T)},X=v=>{var T=ye(),u=ne(T);{var n=C=>{var O=Mt(),_=y(O),G=y(_,!0);k(_),k(O),te(Z=>{K(_,"font-size",S()),He(_,`avatar-text ${m()??""}`),yt(G,Z)},[()=>String(i()).substring(0,2).toUpperCase()],de),P(C,O)},g=C=>{var O=ye(),_=ne(O);re(_,e,"default",{},null),P(C,O)};se(u,C=>{i()?C(n):C(g,!1)},!0)}P(v,T)};se(U,v=>{d()||A()?v(V):v(X,!1)})}k(L),te(v=>b=$e(L,b,{class:`avatar ${f(l)??""}`,"data-testid":"avatar",...v}),[p],de),P(t,L),be()}var Gt=E('<div role="tabpanel" tabindex="0"><!></div>'),$t=E('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function Et(t,e){const a=Se(e),s=ue(e,["children","$$slots","$$events","$$legacy"]);_e(e,!1);const l=z(),i=z(),m=z();let S=r(e,"justify",8,"justify-start"),d=r(e,"border",8,"border-b border-surface-400-500-token"),A=r(e,"active",8,"border-b-2 border-surface-900-50-token"),I=r(e,"hover",8,"hover:variant-soft"),D=r(e,"flex",8,"flex-none"),j=r(e,"padding",8,"px-4 py-2"),M=r(e,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),N=r(e,"spacing",8,"space-y-1"),B=r(e,"regionList",8,""),x=r(e,"regionPanel",8,""),H=r(e,"labelledby",8,""),h=r(e,"panel",8,"");fe("active",A()),fe("hover",I()),fe("flex",D()),fe("padding",j()),fe("rounded",M()),fe("spacing",N());const c="space-y-4",p="flex overflow-x-auto hide-scrollbar",L="";R(()=>o(s),()=>{w(l,`${c} ${s.class??""}`)}),R(()=>(o(S()),o(d()),o(B())),()=>{w(i,`${p} ${S()} ${d()} ${B()}`)}),R(()=>o(x()),()=>{w(m,`${L} ${x()}`)}),he(),ge();var b=$t(),U=y(b),V=y(U);re(V,e,"default",{},null),k(U);var X=W(U,2);{var v=T=>{var u=Gt(),n=y(u);re(n,e,"panel",{},null),k(u),te(()=>{F(u,`tab-panel ${f(m)??""}`),K(u,"aria-labelledby",h())}),P(T,u)};se(X,T=>{a.panel&&T(v)})}k(b),te(()=>{F(b,`tab-group ${f(l)??""}`),F(U,`tab-list ${f(i)??""}`),K(U,"aria-labelledby",H())}),P(t,b),be()}var Ht=E('<div class="tab-lead"><!></div>'),Ut=E('<a><div><!> <div class="tab-label"><!></div></div></a>');function Re(t,e){const a=Se(e),s=ue(e,["children","$$slots","$$events","$$legacy"]),l=ue(s,["selected","controls","active","hover","flex","padding","rounded","spacing"]);_e(e,!1);const i=z(),m=z(),S=z();let d=r(e,"selected",8,!1),A=r(e,"controls",8,""),I=r(e,"active",24,()=>ve("active")),D=r(e,"hover",24,()=>ve("hover")),j=r(e,"flex",24,()=>ve("flex")),M=r(e,"padding",24,()=>ve("padding")),N=r(e,"rounded",24,()=>ve("rounded")),B=r(e,"spacing",24,()=>ve("spacing"));const x="text-center cursor-pointer transition-colors duration-100",H="";function h(){return delete l.class,l}R(()=>(o(d()),o(I()),o(D())),()=>{w(i,d()?I():D())}),R(()=>(o(j()),o(M()),o(N()),f(i),o(s)),()=>{w(m,`${x} ${j()} ${M()} ${N()} ${f(i)} ${s.class??""}`)}),R(()=>o(B()),()=>{w(S,`${H} ${B()}`)}),he(),ge();var c=Ut();let p;var L=y(c),b=y(L);{var U=v=>{var T=Ht(),u=y(T);re(u,e,"lead",{},null),k(T),P(v,T)};se(b,v=>{a.lead&&v(U)})}var V=W(b,2),X=y(V);re(X,e,"default",{},null),k(V),k(L),k(c),te(v=>{p=$e(c,p,{class:`tab-anchor ${f(m)??""}`,href:s.href,...v,"aria-controls":A(),role:"button","data-testid":"tab-anchor"}),F(L,`tab-interface ${f(S)??""}`)},[h],de),$("click",c,function(v){Q.call(this,e,v)}),$("keydown",c,function(v){Q.call(this,e,v)}),$("keyup",c,function(v){Q.call(this,e,v)}),$("keypress",c,function(v){Q.call(this,e,v)}),$("mouseover",c,function(v){Q.call(this,e,v)}),$("mouseleave",c,function(v){Q.call(this,e,v)}),$("focus",c,function(v){Q.call(this,e,v)}),$("blur",c,function(v){Q.call(this,e,v)}),P(t,c),be()}var qt=E('<div role="switch" aria-label="Light Switch" tabindex="0"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path></path></svg></div></div>');function De(t,e){const a=ue(e,["children","$$slots","$$events","$$legacy"]);_e(e,!1);const[s,l]=je(),i=()=>xe(ze,"$modeCurrent",s),m=z(),S=z(),d=z(),A=z(),I=z(),D=z(),j=z();let M=r(e,"title",8,"Toggle light or dark mode."),N=r(e,"bgLight",8,"bg-surface-50"),B=r(e,"bgDark",8,"bg-surface-900"),x=r(e,"fillLight",8,"fill-surface-50"),H=r(e,"fillDark",8,"fill-surface-900"),h=r(e,"width",8,"w-12"),c=r(e,"height",8,"h-6"),p=r(e,"ring",8,"ring-[1px] ring-surface-500/30"),L=r(e,"rounded",8,"rounded-token");const b="transition-all duration-[200ms]",U="cursor-pointer",V="aspect-square scale-[0.8] flex justify-center items-center",X="w-[70%] aspect-square",v={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function T(){ce(ze,!i()),xt(i()),Ce(i())}function u(_){["Enter","Space"].includes(_.code)&&(_.preventDefault(),_.currentTarget.click())}pe(()=>{"modeCurrent"in localStorage||Ce(wt())}),R(()=>(i(),o(N()),o(B())),()=>{w(m,i()===!0?N():B())}),R(()=>(i(),o(B()),o(N())),()=>{w(S,i()===!0?B():N())}),R(()=>i(),()=>{w(d,i()===!0?"translate-x-[100%]":"")}),R(()=>(i(),o(x()),o(H())),()=>{w(A,i()===!0?x():H())}),R(()=>(o(h()),o(c()),o(p()),o(L()),f(m),o(a)),()=>{w(I,`${U} ${b} ${h()} ${c()} ${p()} ${L()} ${f(m)} ${a.class??""}`)}),R(()=>(o(c()),o(L()),f(S),f(d)),()=>{w(D,`${V} ${b} ${c()} ${L()} ${f(S)} ${f(d)}`)}),R(()=>f(A),()=>{w(j,`${X} ${f(A)}`)}),he(),ge();var n=qt();kt(_=>{var G=ye(),Z=ne(G);Lt(Z,()=>`<script nonce="%sveltekit.nonce%">(${pt.toString()})();<\/script>`),P(_,G)});var g=y(n),C=y(g),O=y(C);k(C),k(g),k(n),te(()=>{F(n,`lightswitch-track ${f(I)??""}`),K(n,"aria-checked",i()),K(n,"title",M()),F(g,`lightswitch-thumb ${f(D)??""}`),He(C,`lightswitch-icon ${f(j)??""}`),K(O,"d",i()?v.sun:v.moon)}),$("click",n,T),$("click",n,function(_){Q.call(this,e,_)}),$("keydown",n,u),$("keydown",n,function(_){Q.call(this,e,_)}),$("keyup",n,function(_){Q.call(this,e,_)}),$("keypress",n,function(_){Q.call(this,e,_)}),P(t,n),be(),l()}const Jt=()=>{const t=At;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},Vt={subscribe(t){return Jt().page.subscribe(t)}};var Kt=E('<a href="/"><strong class="text-xl uppercase">Java Booklet</strong></a>'),Yt=E("<!> <!>",1),Ft=E('<span class="badge-icon variant-filled-primary absolute -top-1 -right-1 z-10">✓</span>'),Qt=E('<div class="flex items-center space-x-2 sm:space-x-4 flex-wrap justify-end"><!> <div class="relative"><button class="btn-icon variant-ghost-surface"><!> <!></button></div></div>'),Wt=E('<li><button class="w-full text-left p-2 hover:bg-primary-500/10 rounded">Logout</button></li> <li><div class="flex items-center"><!></div></li>',1),Xt=E('<li><a href="/login" class="w-full block p-2 hover:bg-primary-500/10 rounded">Login</a></li> <li><a href="/register" class="w-full block p-2 hover:bg-primary-500/10 rounded">Register</a></li> <li><div class="flex items-center"><!></div></li>',1),Zt=E('<li><div class="p-2 text-center text-sm opacity-75">Loading...</div></li>'),ea=E('<div><!></div> <div class="card p-4 w-60 shadow-xl fixed z-[1000]" data-popup="userMenu"><nav class="list-nav"><ul><!></ul></nav></div>',1);function da(t,e){_e(e,!1);const[a,s]=je(),l=()=>xe(Vt,"$page",a),i=()=>xe(d,"$userStore",a),m=z(),S=z(),d=dt(null);let A=z("G"),I=z(!1);const D={event:"click",target:"userMenu",placement:"bottom-end"};function j(u){if(!u)return"G";const n=u.split(/[\s-]+/);return n.length===1?u.substring(0,2).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase()}async function M(){try{const u=localStorage.getItem("user");if(u)try{const n=JSON.parse(u);ce(d,n),w(A,j(n.username))}catch(n){console.error("Error parsing localStorage data:",n),localStorage.removeItem("user")}if(typeof window<"u")try{const n=await fetch("/verify-auth",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(console.log("Server response status:",n.status),n.ok){const g=await n.json();console.log("Server auth response:",g),w(I,!0),g.is_authenticated?(ce(d,{id:g.user_id,username:g.username}),w(A,j(g.username)),localStorage.setItem("user",JSON.stringify(i()))):(console.log("Server says: not authenticated"),localStorage.removeItem("user"),ce(d,null),w(A,"G"))}else if(n.status===401){console.log("Auth token expired, attempting refresh...");const g=!1;w(I,!0),g||(console.log("Token refresh failed, logging out..."),localStorage.removeItem("user"),ce(d,null),w(A,"G"))}else console.warn(`Auth check failed with status: ${n.status}`),w(I,!0)}catch(n){console.error("Auth check error:",n)}}catch(u){console.error("Auth check error:",u),w(I,!0)}}pe(()=>{console.log("Current Path:",f(m)),console.log("isHomePage:",f(S)),M(),window.addEventListener("storage",u=>{u.key==="user"&&(console.log("LocalStorage 'user' changed in another tab, updating..."),M())})});function N(u,n){u.preventDefault(),we(n),console.log("Navigated to:",f(m)),setTimeout(M,100)}let B;pe(()=>(B=setInterval(M,3e5),()=>clearInterval(B)));async function x(){try{const u=await fetch("/logout",{method:"POST",credentials:"include"});localStorage.removeItem("user"),ce(d,null),w(A,"G"),w(I,!0),we("/login")}catch(u){console.error("Logout error:",u),localStorage.removeItem("user"),ce(d,null),we("/login")}}R(()=>l(),()=>{w(m,l().url.pathname)}),R(()=>f(m),()=>{w(S,f(m)==="/")}),R(()=>i(),()=>{i()!==null&&(console.log("UserStore changed:",i()),w(A,j(i().username)))}),he(),ge();var H=ea(),h=ne(H),c=y(h);const p=de(()=>f(S)?"bg-transparent":"bg-primary"),L=de(()=>`grid-cols-3 ${f(S)?"backdrop-blur":""}`);Rt(c,{get background(){return f(p)},get class(){return f(L)},slotDefault:"place-self-center",slotTrail:"place-content-end",$$slots:{lead:(u,n)=>{var g=Kt();$("click",g,C=>N(C,"/")),P(u,g)},trail:(u,n)=>{var g=Qt(),C=y(g);Et(C,{regionList:"flex space-x-1 sm:space-x-2",children:(Y,ie)=>{var ae=Yt(),J=ne(ae);const q=de(()=>f(m)==="/recommendation");Re(J,{href:"/recommendation",get selected(){return f(q)},$$events:{click:oe=>N(oe,"/recommendation")},children:(oe,Je)=>{Ne();var ke=Le("Brew");P(oe,ke)},$$slots:{default:!0}});var ee=W(J,2);const qe=de(()=>f(m)==="/archive");Re(ee,{href:"/archive",get selected(){return f(qe)},$$events:{click:oe=>N(oe,"/archive")},children:(oe,Je)=>{Ne();var ke=Le("Notes");P(oe,ke)},$$slots:{default:!0}}),P(Y,ae)},$$slots:{default:!0}});var O=W(C,2),_=y(O),G=y(_);Ot(G,{get initials(){return f(A)}});var Z=W(G,2);{var me=Y=>{var ie=Ft();P(Y,ie)};se(Z,Y=>{i()&&Y(me)})}k(_),Oe(_,(Y,ie)=>{var ae;return(ae=St)==null?void 0:ae(Y,ie)},()=>D),k(O),k(g),P(u,g)}}}),k(h);var b=W(h,2),U=y(b),V=y(U),X=y(V);{var v=u=>{var n=Wt(),g=ne(n),C=y(g);k(g);var O=W(g,2),_=y(O),G=y(_);De(G,{}),k(_),k(O),$("click",C,x),P(u,n)},T=u=>{var n=ye(),g=ne(n);{var C=_=>{var G=Xt(),Z=ne(G),me=y(Z);k(Z);var Y=W(Z,2),ie=y(Y);k(Y);var ae=W(Y,2),J=y(ae),q=y(J);De(q,{}),k(J),k(ae),$("click",me,ee=>N(ee,"/login")),$("click",ie,ee=>N(ee,"/register")),P(_,G)},O=_=>{var G=Zt();P(_,G)};se(g,_=>{f(I)?_(C):_(O,!1)},!0)}P(u,n)};se(X,u=>{i()?u(v):u(T,!1)})}k(V),k(U),k(b),P(t,H),be(),s()}export{da as A,Oe as a,F as b,Q as c,Lt as h,ca as r,K as s};
