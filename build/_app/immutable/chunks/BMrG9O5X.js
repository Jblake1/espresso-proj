import{b as Se,e as $e,t as U,a as P,c as me,n as Je,d as Ae}from"./CBSBxhCm.js";import{i as ve}from"./DbMJBHzy.js";import{b as Ve,h as re,a as Le,j as Ke,e as pe,z as Ye,aF as Fe,aE as Qe,s as We,A as Xe,w as Ze,G as Re,K as et,J as tt,a2 as o,aU as at,c as Te,ac as st,aV as rt,aW as lt,aX as it,q as nt,X as ge,aR as B,aS as _e,_ as ee,Y as he,Q as m,U as _,a5 as I,R as X,T as y,g as f,d as fe,W as ie,aQ as de,aT as ue,Z as Pe,aw as ot}from"./C8TPyCW6.js";import{i as ct,c as dt,d as ut,b as ft,n as vt,f as gt,g as _t,e as E,j as ht,s as bt,k as mt}from"./CQOudoi1.js";import{l as ce,b as i,a as ae,c as De,s as Me,d as oe}from"./8hPzZ8EO.js";import{b as xe,a as se,c as Ie,g as yt,m as Ne,d as kt,e as wt,f as xt}from"./C87CxSex.js";import{o as we}from"./9HFh9aQn.js";import{g as ke}from"./B_JrS__e.js";function St(t,e,a,r,l){var c=t,h="",k;Ve(()=>{if(h===(h=e()??"")){re&&Le();return}k!==void 0&&(Ze(k),k=void 0),h!==""&&(k=Ke(()=>{if(re){pe.data;for(var u=Le(),T=u;u!==null&&(u.nodeType!==8||u.data!=="");)T=u,u=Ye(u);if(u===null)throw Fe(),Qe;Se(pe,T),c=We(u);return}var O=h+"",C=$e(O);Se(Xe(C),C.lastChild),c.before(C)}))})}function je(t,e,a){Re(()=>{var r=et(()=>e(t,a==null?void 0:a())||{});if(a&&(r!=null&&r.update)){var l=!1,c={};tt(()=>{var h=a();o(h),l&&at(c,h)&&(c=h,r.update(h))}),l=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Oe(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=Oe(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function At(){for(var t,e,a=0,r="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=Oe(t))&&(r&&(r+=" "),r+=e);return r}function Lt(t){return typeof t=="object"?At(t):t??""}function ra(t){if(re){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;K(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var l=t.checked;K(t,"checked",null),t.checked=l}}};t.__on_r=a,rt(a),gt()}}function pt(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function K(t,e,a,r){var l=t.__attributes??(t.__attributes={});re&&(l[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||l[e]!==(l[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[lt]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ee(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Ge(t,e,a,r,l=!1,c=!1,h=!1){let k=re&&c;k&&Te(!1);var u=e||{},T=t.tagName==="OPTION";for(var O in e)O in a||(a[O]=null);a.class&&(a.class=Lt(a.class));var C=Ee(t),j=t.__attributes??(t.__attributes={});for(const b in a){let d=a[b];if(T&&b==="value"&&d==null){t.value=t.__value="",u[b]=d;continue}var R=u[b];if(d!==R){u[b]=d;var D=b[0]+b[1];if(D!=="$$"){if(D==="on"){const x={},L="$$"+b;let g=b.slice(2);var z=_t(g);if(ct(g)&&(g=g.slice(0,-7),x.capture=!0),!z&&R){if(d!=null)continue;t.removeEventListener(g,u[L],x),u[L]=null}if(d!=null)if(z)t[`__${g}`]=d,ut([g]);else{let q=function(V){u[b].call(this,V)};u[L]=dt(g,t,q,x)}else z&&(t[`__${g}`]=void 0)}else if(b==="style"&&d!=null)t.style.cssText=d+"";else if(b==="autofocus")ft(t,!!d);else if(!c&&(b==="__value"||b==="value"&&d!=null))t.value=t.__value=d;else if(b==="selected"&&T)pt(t,d);else{var w=b;l||(w=vt(w));var G=w==="defaultValue"||w==="defaultChecked";if(d==null&&!c&&!G)if(j[b]=null,w==="value"||w==="checked"){let x=t;const L=e===void 0;if(w==="value"){let g=x.defaultValue;x.removeAttribute(w),x.defaultValue=g,x.value=x.__value=L?g:null}else{let g=x.defaultChecked;x.removeAttribute(w),x.defaultChecked=g,x.checked=L?g:!1}}else t.removeAttribute(b);else G||C.includes(w)&&(c||typeof d!="string")?t[w]=d:typeof d!="function"&&K(t,w,d)}b==="style"&&"__styles"in t&&(t.__styles={})}}}return k&&Te(!0),u}var Ce=new Map;function Ee(t){var e=Ce.get(t.nodeName);if(e)return e;Ce.set(t.nodeName,e=[]);for(var a,r=t,l=Element.prototype;l!==r;){a=it(r);for(var c in a)a[c].set&&e.push(c);r=st(r)}return e}function Ue(t,e,a){var r=t.__className,l=qe(e);re&&t.getAttribute("class")===l?t.__className=l:(r!==l||re&&t.getAttribute("class")!==l)&&(l===""?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)}function Q(t,e,a){var r=t.__className,l=qe(e);re&&t.className===l?t.__className=l:(r!==l||re&&t.className!==l)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function qe(t,e){return(t??"")+""}function W(t,e){var c;var a=(c=t.$$events)==null?void 0:c[e.type],r=nt(a)?a.slice():a==null?[]:[a];for(var l of r)l.call(this,e)}var Tt=U("<div><!></div>"),Pt=U("<div><!></div>"),It=U("<div><!></div>"),Nt=U('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function Ct(t,e){const a=xe(e),r=ce(e,["children","$$slots","$$events","$$legacy"]);ge(e,!1);const l=I(),c=I(),h=I(),k=I(),u=I(),T=I();let O=i(e,"background",8,"bg-surface-100-800-token"),C=i(e,"border",8,""),j=i(e,"padding",8,"p-4"),R=i(e,"shadow",8,""),D=i(e,"spacing",8,"space-y-4"),z=i(e,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),w=i(e,"gap",8,"gap-4"),G=i(e,"regionRowMain",8,""),b=i(e,"regionRowHeadline",8,""),d=i(e,"slotLead",8,""),x=i(e,"slotDefault",8,""),L=i(e,"slotTrail",8,""),g=i(e,"label",8,""),q=i(e,"labelledby",8,"");const V="flex flex-col",Z="grid items-center",s="",n="flex-none flex justify-between items-center",v="flex-auto",S="flex-none flex items-center space-x-4";B(()=>(o(O()),o(C()),o(D()),o(j()),o(R()),o(r)),()=>{_(l,`${V} ${O()} ${C()} ${D()} ${j()} ${R()} ${r.class??""}`)}),B(()=>(o(z()),o(w()),o(G())),()=>{_(c,`${Z} ${z()} ${w()} ${G()}`)}),B(()=>o(b()),()=>{_(h,`${s} ${b()}`)}),B(()=>o(d()),()=>{_(k,`${n} ${d()}`)}),B(()=>o(x()),()=>{_(u,`${v} ${x()}`)}),B(()=>o(L()),()=>{_(T,`${S} ${L()}`)}),_e(),ve();var N=Nt(),A=m(N),M=m(A);{var p=$=>{var J=Tt(),F=m(J);se(F,e,"lead",{},null),y(J),ee(()=>Q(J,`app-bar-slot-lead ${f(k)??""}`)),P($,J)};ae(M,$=>{a.lead&&$(p)})}var Y=X(M,2),H=m(Y);se(H,e,"default",{},null),y(Y);var le=X(Y,2);{var te=$=>{var J=Pt(),F=m(J);se(F,e,"trail",{},null),y(J),ee(()=>Q(J,`app-bar-slot-trail ${f(T)??""}`)),P($,J)};ae(le,$=>{a.trail&&$(te)})}y(A);var ne=X(A,2);{var be=$=>{var J=It(),F=m(J);se(F,e,"headline",{},null),y(J),ee(()=>Q(J,`app-bar-row-headline ${f(h)??""}`)),P($,J)};ae(ne,$=>{a.headline&&$(be)})}y(N),ee(()=>{Q(N,`app-bar ${f(l)??""}`),K(N,"aria-label",g()),K(N,"aria-labelledby",q()),Q(A,`app-bar-row-main ${f(c)??""}`),Q(Y,`app-bar-slot-default ${f(u)??""}`)}),P(t,N),he()}var zt=U("<img>"),Bt=Je('<svg class="avatar-initials w-full h-full" viewBox="0 0 512 512"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-weight="bold"> </text></svg>'),Rt=U("<figure><!></figure>");function Dt(t,e){const a=ce(e,["children","$$slots","$$events","$$legacy"]),r=ce(a,["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"]);ge(e,!1);const l=I();let c=i(e,"initials",8,""),h=i(e,"fill",8,"fill-token"),k=i(e,"fontSize",8,150),u=i(e,"src",12,""),T=i(e,"fallback",8,""),O=i(e,"action",8,()=>{}),C=i(e,"actionParams",8,""),j=i(e,"background",8,"bg-surface-400-500-token"),R=i(e,"width",8,"w-16"),D=i(e,"border",8,""),z=i(e,"rounded",8,"rounded-full"),w=i(e,"shadow",8,""),G=i(e,"cursor",8,""),b="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",d="w-full object-cover";function x(){return delete r.class,r}B(()=>(o(j()),o(R()),o(D()),o(z()),o(w()),o(G()),o(a)),()=>{_(l,`${b} ${j()} ${R()} ${D()} ${z()} ${w()} ${G()} ${a.class??""}`)}),_e(),ve();var L=Rt();let g;var q=m(L);{var V=s=>{var n=zt();Q(n,`avatar-image ${d}`),je(n,(v,S)=>{var N;return(N=O())==null?void 0:N(v,S)},C),Re(()=>E("error",n,()=>u(T()))),ee(()=>{K(n,"style",a.style??""),K(n,"src",u()),K(n,"alt",a.alt||"")}),ht(n),P(s,n)},Z=s=>{var n=me(),v=ie(n);{var S=A=>{var M=Bt(),p=m(M),Y=m(p,!0);y(p),y(M),ee(H=>{K(p,"font-size",k()),Ue(p,`avatar-text ${h()??""}`),bt(Y,H)},[()=>String(c()).substring(0,2).toUpperCase()],fe),P(A,M)},N=A=>{var M=me(),p=ie(M);se(p,e,"default",{},null),P(A,M)};ae(v,A=>{c()?A(S):A(N,!1)},!0)}P(s,n)};ae(q,s=>{u()||T()?s(V):s(Z,!1)})}y(L),ee(s=>g=Ge(L,g,{class:`avatar ${f(l)??""}`,"data-testid":"avatar",...s}),[x],fe),P(t,L),he()}var Mt=U('<div role="tabpanel" tabindex="0"><!></div>'),jt=U('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function Ot(t,e){const a=xe(e),r=ce(e,["children","$$slots","$$events","$$legacy"]);ge(e,!1);const l=I(),c=I(),h=I();let k=i(e,"justify",8,"justify-start"),u=i(e,"border",8,"border-b border-surface-400-500-token"),T=i(e,"active",8,"border-b-2 border-surface-900-50-token"),O=i(e,"hover",8,"hover:variant-soft"),C=i(e,"flex",8,"flex-none"),j=i(e,"padding",8,"px-4 py-2"),R=i(e,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),D=i(e,"spacing",8,"space-y-1"),z=i(e,"regionList",8,""),w=i(e,"regionPanel",8,""),G=i(e,"labelledby",8,""),b=i(e,"panel",8,"");de("active",T()),de("hover",O()),de("flex",C()),de("padding",j()),de("rounded",R()),de("spacing",D());const d="space-y-4",x="flex overflow-x-auto hide-scrollbar",L="";B(()=>o(r),()=>{_(l,`${d} ${r.class??""}`)}),B(()=>(o(k()),o(u()),o(z())),()=>{_(c,`${x} ${k()} ${u()} ${z()}`)}),B(()=>o(w()),()=>{_(h,`${L} ${w()}`)}),_e(),ve();var g=jt(),q=m(g),V=m(q);se(V,e,"default",{},null),y(q);var Z=X(q,2);{var s=n=>{var v=Mt(),S=m(v);se(S,e,"panel",{},null),y(v),ee(()=>{Q(v,`tab-panel ${f(h)??""}`),K(v,"aria-labelledby",b())}),P(n,v)};ae(Z,n=>{a.panel&&n(s)})}y(g),ee(()=>{Q(g,`tab-group ${f(l)??""}`),Q(q,`tab-list ${f(c)??""}`),K(q,"aria-labelledby",G())}),P(t,g),he()}var Gt=U('<div class="tab-lead"><!></div>'),Et=U('<a><div><!> <div class="tab-label"><!></div></div></a>');function ze(t,e){const a=xe(e),r=ce(e,["children","$$slots","$$events","$$legacy"]),l=ce(r,["selected","controls","active","hover","flex","padding","rounded","spacing"]);ge(e,!1);const c=I(),h=I(),k=I();let u=i(e,"selected",8,!1),T=i(e,"controls",8,""),O=i(e,"active",24,()=>ue("active")),C=i(e,"hover",24,()=>ue("hover")),j=i(e,"flex",24,()=>ue("flex")),R=i(e,"padding",24,()=>ue("padding")),D=i(e,"rounded",24,()=>ue("rounded")),z=i(e,"spacing",24,()=>ue("spacing"));const w="text-center cursor-pointer transition-colors duration-100",G="";function b(){return delete l.class,l}B(()=>(o(u()),o(O()),o(C())),()=>{_(c,u()?O():C())}),B(()=>(o(j()),o(R()),o(D()),f(c),o(r)),()=>{_(h,`${w} ${j()} ${R()} ${D()} ${f(c)} ${r.class??""}`)}),B(()=>o(z()),()=>{_(k,`${G} ${z()}`)}),_e(),ve();var d=Et();let x;var L=m(d),g=m(L);{var q=s=>{var n=Gt(),v=m(n);se(v,e,"lead",{},null),y(n),P(s,n)};ae(g,s=>{a.lead&&s(q)})}var V=X(g,2),Z=m(V);se(Z,e,"default",{},null),y(V),y(L),y(d),ee(s=>{x=Ge(d,x,{class:`tab-anchor ${f(h)??""}`,href:r.href,...s,"aria-controls":T(),role:"button","data-testid":"tab-anchor"}),Q(L,`tab-interface ${f(k)??""}`)},[b],fe),E("click",d,function(s){W.call(this,e,s)}),E("keydown",d,function(s){W.call(this,e,s)}),E("keyup",d,function(s){W.call(this,e,s)}),E("keypress",d,function(s){W.call(this,e,s)}),E("mouseover",d,function(s){W.call(this,e,s)}),E("mouseleave",d,function(s){W.call(this,e,s)}),E("focus",d,function(s){W.call(this,e,s)}),E("blur",d,function(s){W.call(this,e,s)}),P(t,d),he()}var Ut=U('<div role="switch" aria-label="Light Switch" tabindex="0"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path></path></svg></div></div>');function Be(t,e){const a=ce(e,["children","$$slots","$$events","$$legacy"]);ge(e,!1);const[r,l]=Me(),c=()=>De(Ne,"$modeCurrent",r),h=I(),k=I(),u=I(),T=I(),O=I(),C=I(),j=I();let R=i(e,"title",8,"Toggle light or dark mode."),D=i(e,"bgLight",8,"bg-surface-50"),z=i(e,"bgDark",8,"bg-surface-900"),w=i(e,"fillLight",8,"fill-surface-50"),G=i(e,"fillDark",8,"fill-surface-900"),b=i(e,"width",8,"w-12"),d=i(e,"height",8,"h-6"),x=i(e,"ring",8,"ring-[1px] ring-surface-500/30"),L=i(e,"rounded",8,"rounded-token");const g="transition-all duration-[200ms]",q="cursor-pointer",V="aspect-square scale-[0.8] flex justify-center items-center",Z="w-[70%] aspect-square",s={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function n(){oe(Ne,!c()),kt(c()),Ie(c())}function v(p){["Enter","Space"].includes(p.code)&&(p.preventDefault(),p.currentTarget.click())}we(()=>{"modeCurrent"in localStorage||Ie(yt())}),B(()=>(c(),o(D()),o(z())),()=>{_(h,c()===!0?D():z())}),B(()=>(c(),o(z()),o(D())),()=>{_(k,c()===!0?z():D())}),B(()=>c(),()=>{_(u,c()===!0?"translate-x-[100%]":"")}),B(()=>(c(),o(w()),o(G())),()=>{_(T,c()===!0?w():G())}),B(()=>(o(b()),o(d()),o(x()),o(L()),f(h),o(a)),()=>{_(O,`${q} ${g} ${b()} ${d()} ${x()} ${L()} ${f(h)} ${a.class??""}`)}),B(()=>(o(d()),o(L()),f(k),f(u)),()=>{_(C,`${V} ${g} ${d()} ${L()} ${f(k)} ${f(u)}`)}),B(()=>f(T),()=>{_(j,`${Z} ${f(T)}`)}),_e(),ve();var S=Ut();mt(p=>{var Y=me(),H=ie(Y);St(H,()=>`<script nonce="%sveltekit.nonce%">(${wt.toString()})();<\/script>`),P(p,Y)});var N=m(S),A=m(N),M=m(A);y(A),y(N),y(S),ee(()=>{Q(S,`lightswitch-track ${f(O)??""}`),K(S,"aria-checked",c()),K(S,"title",R()),Q(N,`lightswitch-thumb ${f(C)??""}`),Ue(A,`lightswitch-icon ${f(j)??""}`),K(M,"d",c()?s.sun:s.moon)}),E("click",S,n),E("click",S,function(p){W.call(this,e,p)}),E("keydown",S,v),E("keydown",S,function(p){W.call(this,e,p)}),E("keyup",S,function(p){W.call(this,e,p)}),E("keypress",S,function(p){W.call(this,e,p)}),P(t,S),he(),l()}var qt=U('<a href="/"><strong class="text-xl uppercase">Java Booklet</strong></a>'),Ht=U("<!> <!>",1),$t=U('<span class="badge-icon variant-filled-primary absolute -top-1 -right-1 z-10">✓</span>'),Jt=U('<div class="flex items-center space-x-2 sm:space-x-4 flex-wrap justify-end"><!> <div class="relative"><button class="btn-icon variant-ghost-surface"><!> <!></button></div></div>'),Vt=U('<li><button class="w-full text-left p-2 hover:bg-primary-500/10 rounded">Logout</button></li> <li><div class="flex items-center"><!></div></li>',1),Kt=U('<li><a href="/login" class="w-full block p-2 hover:bg-primary-500/10 rounded">Login</a></li> <li><a href="/register" class="w-full block p-2 hover:bg-primary-500/10 rounded">Register</a></li> <li><div class="flex items-center"><!></div></li>',1),Yt=U('<li><div class="p-2 text-center text-sm opacity-75">Loading...</div></li>'),Ft=U('<div><!></div> <div class="card p-4 w-60 shadow-xl fixed z-[1000]" data-popup="userMenu"><nav class="list-nav"><ul><!></ul></nav></div>',1);function la(t,e){ge(e,!1);const[a,r]=Me(),l=()=>De(h,"$userStore",a),c=I(),h=ot(null);let k=I(""),u=I("G"),T=I(!1);const O={event:"click",target:"userMenu",placement:"bottom-end"};function C(s){if(!s)return"G";const n=s.split(/[\s-]+/);return n.length===1?s.substring(0,2).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase()}async function j(){try{const s=localStorage.getItem("user");if(s)try{const n=JSON.parse(s);oe(h,n),_(u,C(n.username))}catch(n){console.error("Error parsing localStorage data:",n),localStorage.removeItem("user")}if(typeof window<"u")try{const n=await fetch("/verify-auth",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(console.log("Server response status:",n.status),n.ok){const v=await n.json();console.log("Server auth response:",v),_(T,!0),v.is_authenticated?(oe(h,{id:v.user_id,username:v.username}),_(u,C(v.username)),localStorage.setItem("user",JSON.stringify(l()))):(console.log("Server says: not authenticated"),localStorage.removeItem("user"),oe(h,null),_(u,"G"))}else if(n.status===401){console.log("Auth token expired, attempting refresh...");const v=!1;_(T,!0),v||(console.log("Token refresh failed, logging out..."),localStorage.removeItem("user"),oe(h,null),_(u,"G"))}else console.warn(`Auth check failed with status: ${n.status}`),_(T,!0)}catch(n){console.error("Auth check error:",n)}}catch(s){console.error("Auth check error:",s),_(T,!0)}}we(()=>{_(k,window.location.pathname),console.log("Current Path:",f(k)),j(),window.addEventListener("storage",s=>{s.key==="user"&&(console.log("LocalStorage 'user' changed in another tab, updating..."),j())})});function R(s,n){s.preventDefault(),ke(n),_(k,n),console.log("Navigated to:",f(k)),setTimeout(j,100)}let D;we(()=>(D=setInterval(j,3e5),()=>clearInterval(D)));async function z(){try{const s=await fetch("/logout",{method:"POST",credentials:"include"});localStorage.removeItem("user"),oe(h,null),_(u,"G"),_(T,!0),ke("/login")}catch(s){console.error("Logout error:",s),localStorage.removeItem("user"),oe(h,null),ke("/login")}}B(()=>f(k),()=>{_(c,f(k)==="/")}),B(()=>l(),()=>{l()!==null&&(console.log("UserStore changed:",l()),_(u,C(l().username)))}),_e(),ve();var w=Ft(),G=ie(w),b=m(G);const d=fe(()=>`grid-cols-3 ${f(c)?"bg-white/80 backdrop-blur":"bg-primary"}`);Ct(b,{get class(){return f(d)},slotDefault:"place-self-center",slotTrail:"place-content-end",$$slots:{lead:(s,n)=>{var v=qt();E("click",v,S=>R(S,"/")),P(s,v)},trail:(s,n)=>{var v=Jt(),S=m(v);Ot(S,{regionList:"flex space-x-1 sm:space-x-2",children:(H,le)=>{var te=Ht(),ne=ie(te);const be=fe(()=>f(k)==="/recommendation");ze(ne,{href:"/recommendation",get selected(){return f(be)},$$events:{click:F=>R(F,"/recommendation")},children:(F,He)=>{Pe();var ye=Ae("Brew");P(F,ye)},$$slots:{default:!0}});var $=X(ne,2);const J=fe(()=>f(k)==="/archive");ze($,{href:"/archive",get selected(){return f(J)},$$events:{click:F=>R(F,"/archive")},children:(F,He)=>{Pe();var ye=Ae("Notes");P(F,ye)},$$slots:{default:!0}}),P(H,te)},$$slots:{default:!0}});var N=X(S,2),A=m(N),M=m(A);Dt(M,{get initials(){return f(u)}});var p=X(M,2);{var Y=H=>{var le=$t();P(H,le)};ae(p,H=>{l()&&H(Y)})}y(A),je(A,(H,le)=>{var te;return(te=xt)==null?void 0:te(H,le)},()=>O),y(N),y(v),P(s,v)}}}),y(G);var x=X(G,2),L=m(x),g=m(L),q=m(g);{var V=s=>{var n=Vt(),v=ie(n),S=m(v);y(v);var N=X(v,2),A=m(N),M=m(A);Be(M,{}),y(A),y(N),E("click",S,z),P(s,n)},Z=s=>{var n=me(),v=ie(n);{var S=A=>{var M=Kt(),p=ie(M),Y=m(p);y(p);var H=X(p,2),le=m(H);y(H);var te=X(H,2),ne=m(te),be=m(ne);Be(be,{}),y(ne),y(te),E("click",Y,$=>R($,"/login")),E("click",le,$=>R($,"/register")),P(A,M)},N=A=>{var M=Yt();P(A,M)};ae(v,A=>{f(T)?A(S):A(N,!1)},!0)}P(s,n)};ae(q,s=>{l()?s(V):s(Z,!1)})}y(g),y(L),y(x),P(t,w),he(),r()}export{la as A,je as a,Q as b,W as c,St as h,ra as r,K as s};
