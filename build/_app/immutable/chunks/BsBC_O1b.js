import{b as Pe,e as Ve,t as E,a as T,c as ke,n as Ke,d as we}from"./CBSBxhCm.js";import{i as ge}from"./DbMJBHzy.js";import{b as Ye,h as re,a as Ie,j as Fe,e as Ne,z as Qe,aF as We,aE as Xe,s as Ze,A as et,w as tt,G as Me,K as at,J as st,a2 as o,aU as rt,c as Ce,ac as lt,aV as it,aW as nt,aX as ot,q as ct,X as _e,aR as R,aS as he,_ as ee,Y as be,Q as m,U as _,a5 as I,R as F,T as y,g as f,d as de,W as ie,aQ as fe,aT as ve,Z as xe,aw as dt}from"./C8TPyCW6.js";import{i as ut,c as ft,d as vt,b as gt,n as _t,f as ht,g as bt,e as G,j as mt,s as yt,k as kt}from"./CQOudoi1.js";import{l as ue,b as i,a as ae,c as je,s as $e,d as ce}from"./8hPzZ8EO.js";import{b as pe,a as se,c as ze,g as wt,m as Be,d as xt,e as St,f as At}from"./C87CxSex.js";import{o as Le}from"./9HFh9aQn.js";import{g as Se}from"./BGRbhcsd.js";function Lt(t,e,a,r,l){var c=t,h="",k;Ye(()=>{if(h===(h=e()??"")){re&&Ie();return}k!==void 0&&(tt(k),k=void 0),h!==""&&(k=Fe(()=>{if(re){Ne.data;for(var u=Ie(),P=u;u!==null&&(u.nodeType!==8||u.data!=="");)P=u,u=Qe(u);if(u===null)throw We(),Xe;Pe(Ne,P),c=Ze(u);return}var $=h+"",C=Ve($);Pe(et(C),C.lastChild),c.before(C)}))})}function Oe(t,e,a){Me(()=>{var r=at(()=>e(t,a==null?void 0:a())||{});if(a&&(r!=null&&r.update)){var l=!1,c={};st(()=>{var h=a();o(h),l&&rt(c,h)&&(c=h,r.update(h))}),l=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Ge(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=Ge(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function pt(){for(var t,e,a=0,r="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=Ge(t))&&(r&&(r+=" "),r+=e);return r}function Tt(t){return typeof t=="object"?pt(t):t??""}function ia(t){if(re){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;K(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var l=t.checked;K(t,"checked",null),t.checked=l}}};t.__on_r=a,it(a),ht()}}function Pt(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function K(t,e,a,r){var l=t.__attributes??(t.__attributes={});re&&(l[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||l[e]!==(l[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[nt]=a),a==null?t.removeAttribute(e):typeof a!="string"&&He(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Ee(t,e,a,r,l=!1,c=!1,h=!1){let k=re&&c;k&&Ce(!1);var u=e||{},P=t.tagName==="OPTION";for(var $ in e)$ in a||(a[$]=null);a.class&&(a.class=Tt(a.class));var C=He(t),j=t.__attributes??(t.__attributes={});for(const b in a){let d=a[b];if(P&&b==="value"&&d==null){t.value=t.__value="",u[b]=d;continue}var z=u[b];if(d!==z){u[b]=d;var D=b[0]+b[1];if(D!=="$$"){if(D==="on"){const x={},L="$$"+b;let g=b.slice(2);var B=bt(g);if(ut(g)&&(g=g.slice(0,-7),x.capture=!0),!B&&z){if(d!=null)continue;t.removeEventListener(g,u[L],x),u[L]=null}if(d!=null)if(B)t[`__${g}`]=d,vt([g]);else{let U=function(V){u[b].call(this,V)};u[L]=ft(g,t,U,x)}else B&&(t[`__${g}`]=void 0)}else if(b==="style"&&d!=null)t.style.cssText=d+"";else if(b==="autofocus")gt(t,!!d);else if(!c&&(b==="__value"||b==="value"&&d!=null))t.value=t.__value=d;else if(b==="selected"&&P)Pt(t,d);else{var w=b;l||(w=_t(w));var O=w==="defaultValue"||w==="defaultChecked";if(d==null&&!c&&!O)if(j[b]=null,w==="value"||w==="checked"){let x=t;const L=e===void 0;if(w==="value"){let g=x.defaultValue;x.removeAttribute(w),x.defaultValue=g,x.value=x.__value=L?g:null}else{let g=x.defaultChecked;x.removeAttribute(w),x.defaultChecked=g,x.checked=L?g:!1}}else t.removeAttribute(b);else O||C.includes(w)&&(c||typeof d!="string")?t[w]=d:typeof d!="function"&&K(t,w,d)}b==="style"&&"__styles"in t&&(t.__styles={})}}}return k&&Ce(!0),u}var Re=new Map;function He(t){var e=Re.get(t.nodeName);if(e)return e;Re.set(t.nodeName,e=[]);for(var a,r=t,l=Element.prototype;l!==r;){a=ot(r);for(var c in a)a[c].set&&e.push(c);r=lt(r)}return e}function Ue(t,e,a){var r=t.__className,l=qe(e);re&&t.getAttribute("class")===l?t.__className=l:(r!==l||re&&t.getAttribute("class")!==l)&&(l===""?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)}function Q(t,e,a){var r=t.__className,l=qe(e);re&&t.className===l?t.__className=l:(r!==l||re&&t.className!==l)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function qe(t,e){return(t??"")+""}function W(t,e){var c;var a=(c=t.$$events)==null?void 0:c[e.type],r=ct(a)?a.slice():a==null?[]:[a];for(var l of r)l.call(this,e)}var It=E("<div><!></div>"),Nt=E("<div><!></div>"),Ct=E("<div><!></div>"),zt=E('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function Bt(t,e){const a=pe(e),r=ue(e,["children","$$slots","$$events","$$legacy"]);_e(e,!1);const l=I(),c=I(),h=I(),k=I(),u=I(),P=I();let $=i(e,"background",8,"bg-surface-100-800-token"),C=i(e,"border",8,""),j=i(e,"padding",8,"p-4"),z=i(e,"shadow",8,""),D=i(e,"spacing",8,"space-y-4"),B=i(e,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),w=i(e,"gap",8,"gap-4"),O=i(e,"regionRowMain",8,""),b=i(e,"regionRowHeadline",8,""),d=i(e,"slotLead",8,""),x=i(e,"slotDefault",8,""),L=i(e,"slotTrail",8,""),g=i(e,"label",8,""),U=i(e,"labelledby",8,"");const V="flex flex-col",X="grid items-center",s="",n="flex-none flex justify-between items-center",v="flex-auto",S="flex-none flex items-center space-x-4";R(()=>(o($()),o(C()),o(D()),o(j()),o(z()),o(r)),()=>{_(l,`${V} ${$()} ${C()} ${D()} ${j()} ${z()} ${r.class??""}`)}),R(()=>(o(B()),o(w()),o(O())),()=>{_(c,`${X} ${B()} ${w()} ${O()}`)}),R(()=>o(b()),()=>{_(h,`${s} ${b()}`)}),R(()=>o(d()),()=>{_(k,`${n} ${d()}`)}),R(()=>o(x()),()=>{_(u,`${v} ${x()}`)}),R(()=>o(L()),()=>{_(P,`${S} ${L()}`)}),he(),ge();var N=zt(),A=m(N),M=m(A);{var p=H=>{var J=It(),oe=m(J);se(oe,e,"lead",{},null),y(J),ee(()=>Q(J,`app-bar-slot-lead ${f(k)??""}`)),T(H,J)};ae(M,H=>{a.lead&&H(p)})}var Y=F(M,2),q=m(Y);se(q,e,"default",{},null),y(Y);var le=F(Y,2);{var te=H=>{var J=Nt(),oe=m(J);se(oe,e,"trail",{},null),y(J),ee(()=>Q(J,`app-bar-slot-trail ${f(P)??""}`)),T(H,J)};ae(le,H=>{a.trail&&H(te)})}y(A);var ne=F(A,2);{var me=H=>{var J=Ct(),oe=m(J);se(oe,e,"headline",{},null),y(J),ee(()=>Q(J,`app-bar-row-headline ${f(h)??""}`)),T(H,J)};ae(ne,H=>{a.headline&&H(me)})}y(N),ee(()=>{Q(N,`app-bar ${f(l)??""}`),K(N,"aria-label",g()),K(N,"aria-labelledby",U()),Q(A,`app-bar-row-main ${f(c)??""}`),Q(Y,`app-bar-slot-default ${f(u)??""}`)}),T(t,N),be()}var Rt=E("<img>"),Dt=Ke('<svg class="avatar-initials w-full h-full" viewBox="0 0 512 512"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-weight="bold"> </text></svg>'),Mt=E("<figure><!></figure>");function jt(t,e){const a=ue(e,["children","$$slots","$$events","$$legacy"]),r=ue(a,["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"]);_e(e,!1);const l=I();let c=i(e,"initials",8,""),h=i(e,"fill",8,"fill-token"),k=i(e,"fontSize",8,150),u=i(e,"src",12,""),P=i(e,"fallback",8,""),$=i(e,"action",8,()=>{}),C=i(e,"actionParams",8,""),j=i(e,"background",8,"bg-surface-400-500-token"),z=i(e,"width",8,"w-16"),D=i(e,"border",8,""),B=i(e,"rounded",8,"rounded-full"),w=i(e,"shadow",8,""),O=i(e,"cursor",8,""),b="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",d="w-full object-cover";function x(){return delete r.class,r}R(()=>(o(j()),o(z()),o(D()),o(B()),o(w()),o(O()),o(a)),()=>{_(l,`${b} ${j()} ${z()} ${D()} ${B()} ${w()} ${O()} ${a.class??""}`)}),he(),ge();var L=Mt();let g;var U=m(L);{var V=s=>{var n=Rt();Q(n,`avatar-image ${d}`),Oe(n,(v,S)=>{var N;return(N=$())==null?void 0:N(v,S)},C),Me(()=>G("error",n,()=>u(P()))),ee(()=>{K(n,"style",a.style??""),K(n,"src",u()),K(n,"alt",a.alt||"")}),mt(n),T(s,n)},X=s=>{var n=ke(),v=ie(n);{var S=A=>{var M=Dt(),p=m(M),Y=m(p,!0);y(p),y(M),ee(q=>{K(p,"font-size",k()),Ue(p,`avatar-text ${h()??""}`),yt(Y,q)},[()=>String(c()).substring(0,2).toUpperCase()],de),T(A,M)},N=A=>{var M=ke(),p=ie(M);se(p,e,"default",{},null),T(A,M)};ae(v,A=>{c()?A(S):A(N,!1)},!0)}T(s,n)};ae(U,s=>{u()||P()?s(V):s(X,!1)})}y(L),ee(s=>g=Ee(L,g,{class:`avatar ${f(l)??""}`,"data-testid":"avatar",...s}),[x],de),T(t,L),be()}var $t=E('<div role="tabpanel" tabindex="0"><!></div>'),Ot=E('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function Gt(t,e){const a=pe(e),r=ue(e,["children","$$slots","$$events","$$legacy"]);_e(e,!1);const l=I(),c=I(),h=I();let k=i(e,"justify",8,"justify-start"),u=i(e,"border",8,"border-b border-surface-400-500-token"),P=i(e,"active",8,"border-b-2 border-surface-900-50-token"),$=i(e,"hover",8,"hover:variant-soft"),C=i(e,"flex",8,"flex-none"),j=i(e,"padding",8,"px-4 py-2"),z=i(e,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),D=i(e,"spacing",8,"space-y-1"),B=i(e,"regionList",8,""),w=i(e,"regionPanel",8,""),O=i(e,"labelledby",8,""),b=i(e,"panel",8,"");fe("active",P()),fe("hover",$()),fe("flex",C()),fe("padding",j()),fe("rounded",z()),fe("spacing",D());const d="space-y-4",x="flex overflow-x-auto hide-scrollbar",L="";R(()=>o(r),()=>{_(l,`${d} ${r.class??""}`)}),R(()=>(o(k()),o(u()),o(B())),()=>{_(c,`${x} ${k()} ${u()} ${B()}`)}),R(()=>o(w()),()=>{_(h,`${L} ${w()}`)}),he(),ge();var g=Ot(),U=m(g),V=m(U);se(V,e,"default",{},null),y(U);var X=F(U,2);{var s=n=>{var v=$t(),S=m(v);se(S,e,"panel",{},null),y(v),ee(()=>{Q(v,`tab-panel ${f(h)??""}`),K(v,"aria-labelledby",b())}),T(n,v)};ae(X,n=>{a.panel&&n(s)})}y(g),ee(()=>{Q(g,`tab-group ${f(l)??""}`),Q(U,`tab-list ${f(c)??""}`),K(U,"aria-labelledby",O())}),T(t,g),be()}var Et=E('<div class="tab-lead"><!></div>'),Ht=E('<a><div><!> <div class="tab-label"><!></div></div></a>');function Ae(t,e){const a=pe(e),r=ue(e,["children","$$slots","$$events","$$legacy"]),l=ue(r,["selected","controls","active","hover","flex","padding","rounded","spacing"]);_e(e,!1);const c=I(),h=I(),k=I();let u=i(e,"selected",8,!1),P=i(e,"controls",8,""),$=i(e,"active",24,()=>ve("active")),C=i(e,"hover",24,()=>ve("hover")),j=i(e,"flex",24,()=>ve("flex")),z=i(e,"padding",24,()=>ve("padding")),D=i(e,"rounded",24,()=>ve("rounded")),B=i(e,"spacing",24,()=>ve("spacing"));const w="text-center cursor-pointer transition-colors duration-100",O="";function b(){return delete l.class,l}R(()=>(o(u()),o($()),o(C())),()=>{_(c,u()?$():C())}),R(()=>(o(j()),o(z()),o(D()),f(c),o(r)),()=>{_(h,`${w} ${j()} ${z()} ${D()} ${f(c)} ${r.class??""}`)}),R(()=>o(B()),()=>{_(k,`${O} ${B()}`)}),he(),ge();var d=Ht();let x;var L=m(d),g=m(L);{var U=s=>{var n=Et(),v=m(n);se(v,e,"lead",{},null),y(n),T(s,n)};ae(g,s=>{a.lead&&s(U)})}var V=F(g,2),X=m(V);se(X,e,"default",{},null),y(V),y(L),y(d),ee(s=>{x=Ee(d,x,{class:`tab-anchor ${f(h)??""}`,href:r.href,...s,"aria-controls":P(),role:"button","data-testid":"tab-anchor"}),Q(L,`tab-interface ${f(k)??""}`)},[b],de),G("click",d,function(s){W.call(this,e,s)}),G("keydown",d,function(s){W.call(this,e,s)}),G("keyup",d,function(s){W.call(this,e,s)}),G("keypress",d,function(s){W.call(this,e,s)}),G("mouseover",d,function(s){W.call(this,e,s)}),G("mouseleave",d,function(s){W.call(this,e,s)}),G("focus",d,function(s){W.call(this,e,s)}),G("blur",d,function(s){W.call(this,e,s)}),T(t,d),be()}var Ut=E('<div role="switch" aria-label="Light Switch" tabindex="0"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path></path></svg></div></div>');function De(t,e){const a=ue(e,["children","$$slots","$$events","$$legacy"]);_e(e,!1);const[r,l]=$e(),c=()=>je(Be,"$modeCurrent",r),h=I(),k=I(),u=I(),P=I(),$=I(),C=I(),j=I();let z=i(e,"title",8,"Toggle light or dark mode."),D=i(e,"bgLight",8,"bg-surface-50"),B=i(e,"bgDark",8,"bg-surface-900"),w=i(e,"fillLight",8,"fill-surface-50"),O=i(e,"fillDark",8,"fill-surface-900"),b=i(e,"width",8,"w-12"),d=i(e,"height",8,"h-6"),x=i(e,"ring",8,"ring-[1px] ring-surface-500/30"),L=i(e,"rounded",8,"rounded-token");const g="transition-all duration-[200ms]",U="cursor-pointer",V="aspect-square scale-[0.8] flex justify-center items-center",X="w-[70%] aspect-square",s={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function n(){ce(Be,!c()),xt(c()),ze(c())}function v(p){["Enter","Space"].includes(p.code)&&(p.preventDefault(),p.currentTarget.click())}Le(()=>{"modeCurrent"in localStorage||ze(wt())}),R(()=>(c(),o(D()),o(B())),()=>{_(h,c()===!0?D():B())}),R(()=>(c(),o(B()),o(D())),()=>{_(k,c()===!0?B():D())}),R(()=>c(),()=>{_(u,c()===!0?"translate-x-[100%]":"")}),R(()=>(c(),o(w()),o(O())),()=>{_(P,c()===!0?w():O())}),R(()=>(o(b()),o(d()),o(x()),o(L()),f(h),o(a)),()=>{_($,`${U} ${g} ${b()} ${d()} ${x()} ${L()} ${f(h)} ${a.class??""}`)}),R(()=>(o(d()),o(L()),f(k),f(u)),()=>{_(C,`${V} ${g} ${d()} ${L()} ${f(k)} ${f(u)}`)}),R(()=>f(P),()=>{_(j,`${X} ${f(P)}`)}),he(),ge();var S=Ut();kt(p=>{var Y=ke(),q=ie(Y);Lt(q,()=>`<script nonce="%sveltekit.nonce%">(${St.toString()})();<\/script>`),T(p,Y)});var N=m(S),A=m(N),M=m(A);y(A),y(N),y(S),ee(()=>{Q(S,`lightswitch-track ${f($)??""}`),K(S,"aria-checked",c()),K(S,"title",z()),Q(N,`lightswitch-thumb ${f(C)??""}`),Ue(A,`lightswitch-icon ${f(j)??""}`),K(M,"d",c()?s.sun:s.moon)}),G("click",S,n),G("click",S,function(p){W.call(this,e,p)}),G("keydown",S,v),G("keydown",S,function(p){W.call(this,e,p)}),G("keyup",S,function(p){W.call(this,e,p)}),G("keypress",S,function(p){W.call(this,e,p)}),T(t,S),be(),l()}var qt=E('<a href="/"><strong class="text-xl uppercase">Java Booklet</strong></a>'),Jt=E("<!> <!> <!>",1),Vt=E('<span class="badge-icon variant-filled-primary absolute -top-1 -right-1 z-10">âœ“</span>'),Kt=E('<div class="flex items-center space-x-2 sm:space-x-4 flex-wrap justify-end"><!> <div class="relative"><button class="btn-icon variant-ghost-surface"><!> <!></button></div></div>'),Yt=E('<li><button class="w-full text-left p-2 hover:bg-primary-500/10 rounded">Logout</button></li> <li><div class="flex items-center"><!></div></li>',1),Ft=E('<li><a href="/login" class="w-full block p-2 hover:bg-primary-500/10 rounded">Login</a></li> <li><a href="/register" class="w-full block p-2 hover:bg-primary-500/10 rounded">Register</a></li> <li><div class="flex items-center"><!></div></li>',1),Qt=E('<li><div class="p-2 text-center text-sm opacity-75">Loading...</div></li>'),Wt=E('<div><!></div> <div class="card p-4 w-60 shadow-xl fixed z-[1000]" data-popup="userMenu"><nav class="list-nav"><ul><!></ul></nav></div>',1);function na(t,e){_e(e,!1);const[a,r]=$e(),l=()=>je(h,"$userStore",a),c=I(),h=dt(null);let k=I(""),u=I("G"),P=I(!1);const $={event:"click",target:"userMenu",placement:"bottom-end"};function C(s){if(!s)return"G";const n=s.split(/[\s-]+/);return n.length===1?s.substring(0,2).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase()}async function j(){try{const s=localStorage.getItem("user");if(s)try{const n=JSON.parse(s);ce(h,n),_(u,C(n.username))}catch(n){console.error("Error parsing localStorage data:",n),localStorage.removeItem("user")}if(typeof window<"u")try{const n=await fetch("/verify-auth",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(console.log("Server response status:",n.status),n.ok){const v=await n.json();console.log("Server auth response:",v),_(P,!0),v.is_authenticated?(ce(h,{id:v.user_id,username:v.username}),_(u,C(v.username)),localStorage.setItem("user",JSON.stringify(l()))):(console.log("Server says: not authenticated"),localStorage.removeItem("user"),ce(h,null),_(u,"G"))}else if(n.status===401){console.log("Auth token expired, attempting refresh...");const v=!1;_(P,!0),v||(console.log("Token refresh failed, logging out..."),localStorage.removeItem("user"),ce(h,null),_(u,"G"))}else console.warn(`Auth check failed with status: ${n.status}`),_(P,!0)}catch(n){console.error("Auth check error:",n)}}catch(s){console.error("Auth check error:",s),_(P,!0)}}Le(()=>{_(k,window.location.pathname),j(),window.addEventListener("storage",s=>{s.key==="user"&&(console.log("LocalStorage 'user' changed in another tab, updating..."),j())})});function z(s,n){s.preventDefault(),Se(n),_(k,n),setTimeout(j,100)}let D;Le(()=>(D=setInterval(j,3e5),()=>clearInterval(D)));async function B(){try{const s=await fetch("/logout",{method:"POST",credentials:"include"});localStorage.removeItem("user"),ce(h,null),_(u,"G"),_(P,!0),Se("/login")}catch(s){console.error("Logout error:",s),localStorage.removeItem("user"),ce(h,null),Se("/login")}}R(()=>f(k),()=>{_(c,f(k)==="/")}),R(()=>l(),()=>{l()!==null&&(console.log("UserStore changed:",l()),_(u,C(l().username)))}),he(),ge();var w=Wt(),O=ie(w),b=m(O);const d=de(()=>`grid-cols-3 ${f(c)?"bg-white/80 backdrop-blur":"bg-primary"}`);Bt(b,{get class(){return f(d)},slotDefault:"place-self-center",slotTrail:"place-content-end",$$slots:{lead:(s,n)=>{var v=qt();G("click",v,S=>z(S,"/")),T(s,v)},trail:(s,n)=>{var v=Kt(),S=m(v);Gt(S,{regionList:"flex space-x-1 sm:space-x-2",children:(q,le)=>{var te=Jt(),ne=ie(te);const me=de(()=>f(k)==="/recommendation");Ae(ne,{href:"/recommendation",get selected(){return f(me)},$$events:{click:Z=>z(Z,"/recommendation")},children:(Z,Te)=>{xe();var ye=we("Brew");T(Z,ye)},$$slots:{default:!0}});var H=F(ne,2);const J=de(()=>f(k)==="/archive");Ae(H,{href:"/archive",get selected(){return f(J)},$$events:{click:Z=>z(Z,"/archive")},children:(Z,Te)=>{xe();var ye=we("Notes");T(Z,ye)},$$slots:{default:!0}});var oe=F(H,2);const Je=de(()=>f(k)==="/");Ae(oe,{href:"/",get selected(){return f(Je)},$$events:{click:Z=>z(Z,"/")},children:(Z,Te)=>{xe();var ye=we("Home");T(Z,ye)},$$slots:{default:!0}}),T(q,te)},$$slots:{default:!0}});var N=F(S,2),A=m(N),M=m(A);jt(M,{get initials(){return f(u)}});var p=F(M,2);{var Y=q=>{var le=Vt();T(q,le)};ae(p,q=>{l()&&q(Y)})}y(A),Oe(A,(q,le)=>{var te;return(te=At)==null?void 0:te(q,le)},()=>$),y(N),y(v),T(s,v)}}}),y(O);var x=F(O,2),L=m(x),g=m(L),U=m(g);{var V=s=>{var n=Yt(),v=ie(n),S=m(v);y(v);var N=F(v,2),A=m(N),M=m(A);De(M,{}),y(A),y(N),G("click",S,B),T(s,n)},X=s=>{var n=ke(),v=ie(n);{var S=A=>{var M=Ft(),p=ie(M),Y=m(p);y(p);var q=F(p,2),le=m(q);y(q);var te=F(q,2),ne=m(te),me=m(ne);De(me,{}),y(ne),y(te),G("click",Y,H=>z(H,"/login")),G("click",le,H=>z(H,"/register")),T(A,M)},N=A=>{var M=Qt();T(A,M)};ae(v,A=>{f(P)?A(S):A(N,!1)},!0)}T(s,n)};ae(U,s=>{l()?s(V):s(X,!1)})}y(g),y(L),y(x),T(t,w),be(),r()}export{na as A,Oe as a,Q as b,W as c,Lt as h,ia as r,K as s};
