import{b as Te,e as qe,t as E,a as T,c as me,n as Ve,d as ke}from"./W4TM1z4w.js";import{i as fe}from"./CzBPpHCt.js";import{w as Fe,h as se,x as Pe,F as Je,C as Ie,W as Ke,aF as We,aE as Xe,A as Ye,X as Qe,T as Ze,e as De,u as et,r as tt,a2 as o,aU as at,B as Ce,ac as st,aV as rt,aW as lt,aX as it,d as nt,p as ve,aR as j,aS as ge,v as ee,j as _e,k as b,t as y,a5 as B,s as Y,n as m,g as k,y as ue,f as le,aQ as ce,aT as de,o as we,aw as ot}from"./CZLb4j7O.js";import{i as ct,c as dt,d as ut,b as ft,n as vt,f as gt,g as _t,e as O,j as ht,s as bt,k as mt}from"./DdtZw0U8.js";import{l as oe,b as i,i as te,c as Me,s as je,d as ne}from"./B0R6SzIc.js";import{b as Le,a as ae,c as Ne,g as yt,m as Be,d as kt,e as wt,f as xt}from"./TVdZ1f0f.js";import{o as Ae}from"./B49uhO74.js";import{g as xe}from"./CMUdv0H0.js";function St(t,e,a,r,l){var n=t,x="",S;Fe(()=>{if(x===(x=e()??"")){se&&Pe();return}S!==void 0&&(Ze(S),S=void 0),x!==""&&(S=Je(()=>{if(se){Ie.data;for(var d=Pe(),R=d;d!==null&&(d.nodeType!==8||d.data!=="");)R=d,d=Ke(d);if(d===null)throw We(),Xe;Te(Ie,R),n=Ye(d);return}var D=x+"",I=qe(D);Te(Qe(I),I.lastChild),n.before(I)}))})}function $e(t,e,a){De(()=>{var r=et(()=>e(t,a==null?void 0:a())||{});if(a&&(r!=null&&r.update)){var l=!1,n={};tt(()=>{var x=a();o(x),l&&at(n,x)&&(n=x,r.update(x))}),l=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Oe(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(a=Oe(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function At(){for(var t,e,a=0,r="",l=arguments.length;a<l;a++)(t=arguments[a])&&(e=Oe(t))&&(r&&(r+=" "),r+=e);return r}function Lt(t){return typeof t=="object"?At(t):t??""}function ra(t){if(se){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;W(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var l=t.checked;W(t,"checked",null),t.checked=l}}};t.__on_r=a,rt(a),gt()}}function pt(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function W(t,e,a,r){var l=t.__attributes??(t.__attributes={});se&&(l[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||l[e]!==(l[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[lt]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ge(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Ee(t,e,a,r,l=!1,n=!1,x=!1){let S=se&&n;S&&Ce(!1);var d=e||{},R=t.tagName==="OPTION";for(var D in e)D in a||(a[D]=null);a.class&&(a.class=Lt(a.class));var I=Ge(t),z=t.__attributes??(t.__attributes={});for(const v in a){let c=a[v];if(R&&v==="value"&&c==null){t.value=t.__value="",d[v]=c;continue}var G=d[v];if(c!==G){d[v]=c;var $=v[0]+v[1];if($!=="$$"){if($==="on"){const L={},p="$$"+v;let h=v.slice(2);var C=_t(h);if(ct(h)&&(h=h.slice(0,-7),L.capture=!0),!C&&G){if(c!=null)continue;t.removeEventListener(h,d[p],L),d[p]=null}if(c!=null)if(C)t[`__${h}`]=c,ut([h]);else{let U=function(u){d[v].call(this,u)};d[p]=dt(h,t,U,L)}else C&&(t[`__${h}`]=void 0)}else if(v==="style"&&c!=null)t.style.cssText=c+"";else if(v==="autofocus")ft(t,!!c);else if(!n&&(v==="__value"||v==="value"&&c!=null))t.value=t.__value=c;else if(v==="selected"&&R)pt(t,c);else{var A=v;l||(A=vt(A));var H=A==="defaultValue"||A==="defaultChecked";if(c==null&&!n&&!H)if(z[v]=null,A==="value"||A==="checked"){let L=t;const p=e===void 0;if(A==="value"){let h=L.defaultValue;L.removeAttribute(A),L.defaultValue=h,L.value=L.__value=p?h:null}else{let h=L.defaultChecked;L.removeAttribute(A),L.defaultChecked=h,L.checked=p?h:!1}}else t.removeAttribute(v);else H||I.includes(A)&&(n||typeof c!="string")?t[A]=c:typeof c!="function"&&W(t,A,c)}v==="style"&&"__styles"in t&&(t.__styles={})}}}return S&&Ce(!0),d}var ze=new Map;function Ge(t){var e=ze.get(t.nodeName);if(e)return e;ze.set(t.nodeName,e=[]);for(var a,r=t,l=Element.prototype;l!==r;){a=it(r);for(var n in a)a[n].set&&e.push(n);r=st(r)}return e}function He(t,e,a){var r=t.__className,l=Ue(e);se&&t.getAttribute("class")===l?t.__className=l:(r!==l||se&&t.getAttribute("class")!==l)&&(l===""?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)}function Q(t,e,a){var r=t.__className,l=Ue(e);se&&t.className===l?t.__className=l:(r!==l||se&&t.className!==l)&&(e==null?t.removeAttribute("class"):t.className=l,t.__className=l)}function Ue(t,e){return(t??"")+""}function Z(t,e){var n;var a=(n=t.$$events)==null?void 0:n[e.type],r=nt(a)?a.slice():a==null?[]:[a];for(var l of r)l.call(this,e)}var Tt=E("<div><!></div>"),Pt=E("<div><!></div>"),It=E("<div><!></div>"),Ct=E('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function Nt(t,e){const a=Le(e),r=oe(e,["children","$$slots","$$events","$$legacy"]);ve(e,!1);const l=B(),n=B(),x=B(),S=B(),d=B(),R=B();let D=i(e,"background",8,"bg-surface-100-800-token"),I=i(e,"border",8,""),z=i(e,"padding",8,"p-4"),G=i(e,"shadow",8,""),$=i(e,"spacing",8,"space-y-4"),C=i(e,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),A=i(e,"gap",8,"gap-4"),H=i(e,"regionRowMain",8,""),v=i(e,"regionRowHeadline",8,""),c=i(e,"slotLead",8,""),L=i(e,"slotDefault",8,""),p=i(e,"slotTrail",8,""),h=i(e,"label",8,""),U=i(e,"labelledby",8,"");const u="flex flex-col",f="grid items-center",s="",w="flex-none flex justify-between items-center",N="flex-auto",g="flex-none flex items-center space-x-4";j(()=>(o(D()),o(I()),o($()),o(z()),o(G()),o(r)),()=>{y(l,`${u} ${D()} ${I()} ${$()} ${z()} ${G()} ${r.class??""}`)}),j(()=>(o(C()),o(A()),o(H())),()=>{y(n,`${f} ${C()} ${A()} ${H()}`)}),j(()=>o(v()),()=>{y(x,`${s} ${v()}`)}),j(()=>o(c()),()=>{y(S,`${w} ${c()}`)}),j(()=>o(L()),()=>{y(d,`${N} ${L()}`)}),j(()=>o(p()),()=>{y(R,`${g} ${p()}`)}),ge(),fe();var P=Ct(),M=b(P),J=b(M);{var _=X=>{var F=Tt(),q=b(F);ae(q,e,"lead",{},null),m(F),ee(()=>Q(F,`app-bar-slot-lead ${k(S)??""}`)),T(X,F)};te(J,X=>{a.lead&&X(_)})}var V=Y(J,2),K=b(V);ae(K,e,"default",{},null),m(V);var ie=Y(V,2);{var he=X=>{var F=Pt(),q=b(F);ae(q,e,"trail",{},null),m(F),ee(()=>Q(F,`app-bar-slot-trail ${k(R)??""}`)),T(X,F)};te(ie,X=>{a.trail&&X(he)})}m(M);var re=Y(M,2);{var ye=X=>{var F=It(),q=b(F);ae(q,e,"headline",{},null),m(F),ee(()=>Q(F,`app-bar-row-headline ${k(x)??""}`)),T(X,F)};te(re,X=>{a.headline&&X(ye)})}m(P),ee(()=>{Q(P,`app-bar ${k(l)??""}`),W(P,"aria-label",h()),W(P,"aria-labelledby",U()),Q(M,`app-bar-row-main ${k(n)??""}`),Q(V,`app-bar-slot-default ${k(d)??""}`)}),T(t,P),_e()}var Bt=E("<img>"),zt=Ve('<svg class="avatar-initials w-full h-full" viewBox="0 0 512 512"><text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-weight="bold"> </text></svg>'),Rt=E("<figure><!></figure>");function Dt(t,e){const a=oe(e,["children","$$slots","$$events","$$legacy"]),r=oe(a,["initials","fill","fontSize","src","fallback","action","actionParams","background","width","border","rounded","shadow","cursor"]);ve(e,!1);const l=B();let n=i(e,"initials",8,""),x=i(e,"fill",8,"fill-token"),S=i(e,"fontSize",8,150),d=i(e,"src",12,""),R=i(e,"fallback",8,""),D=i(e,"action",8,()=>{}),I=i(e,"actionParams",8,""),z=i(e,"background",8,"bg-surface-400-500-token"),G=i(e,"width",8,"w-16"),$=i(e,"border",8,""),C=i(e,"rounded",8,"rounded-full"),A=i(e,"shadow",8,""),H=i(e,"cursor",8,""),v="flex aspect-square text-surface-50 font-semibold justify-center items-center overflow-hidden isolate",c="w-full object-cover";function L(){return delete r.class,r}j(()=>(o(z()),o(G()),o($()),o(C()),o(A()),o(H()),o(a)),()=>{y(l,`${v} ${z()} ${G()} ${$()} ${C()} ${A()} ${H()} ${a.class??""}`)}),ge(),fe();var p=Rt();let h;var U=b(p);{var u=s=>{var w=Bt();Q(w,`avatar-image ${c}`),$e(w,(N,g)=>{var P;return(P=D())==null?void 0:P(N,g)},I),De(()=>O("error",w,()=>d(R()))),ee(()=>{W(w,"style",a.style??""),W(w,"src",d()),W(w,"alt",a.alt||"")}),ht(w),T(s,w)},f=s=>{var w=me(),N=le(w);{var g=M=>{var J=zt(),_=b(J),V=b(_,!0);m(_),m(J),ee(K=>{W(_,"font-size",S()),He(_,`avatar-text ${x()??""}`),bt(V,K)},[()=>String(n()).substring(0,2).toUpperCase()],ue),T(M,J)},P=M=>{var J=me(),_=le(J);ae(_,e,"default",{},null),T(M,J)};te(N,M=>{n()?M(g):M(P,!1)},!0)}T(s,w)};te(U,s=>{d()||R()?s(u):s(f,!1)})}m(p),ee(s=>h=Ee(p,h,{class:`avatar ${k(l)??""}`,"data-testid":"avatar",...s}),[L],ue),T(t,p),_e()}var Mt=E('<div role="tabpanel" tabindex="0"><!></div>'),jt=E('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function $t(t,e){const a=Le(e),r=oe(e,["children","$$slots","$$events","$$legacy"]);ve(e,!1);const l=B(),n=B(),x=B();let S=i(e,"justify",8,"justify-start"),d=i(e,"border",8,"border-b border-surface-400-500-token"),R=i(e,"active",8,"border-b-2 border-surface-900-50-token"),D=i(e,"hover",8,"hover:variant-soft"),I=i(e,"flex",8,"flex-none"),z=i(e,"padding",8,"px-4 py-2"),G=i(e,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),$=i(e,"spacing",8,"space-y-1"),C=i(e,"regionList",8,""),A=i(e,"regionPanel",8,""),H=i(e,"labelledby",8,""),v=i(e,"panel",8,"");ce("active",R()),ce("hover",D()),ce("flex",I()),ce("padding",z()),ce("rounded",G()),ce("spacing",$());const c="space-y-4",L="flex overflow-x-auto hide-scrollbar",p="";j(()=>o(r),()=>{y(l,`${c} ${r.class??""}`)}),j(()=>(o(S()),o(d()),o(C())),()=>{y(n,`${L} ${S()} ${d()} ${C()}`)}),j(()=>o(A()),()=>{y(x,`${p} ${A()}`)}),ge(),fe();var h=jt(),U=b(h),u=b(U);ae(u,e,"default",{},null),m(U);var f=Y(U,2);{var s=w=>{var N=Mt(),g=b(N);ae(g,e,"panel",{},null),m(N),ee(()=>{Q(N,`tab-panel ${k(x)??""}`),W(N,"aria-labelledby",v())}),T(w,N)};te(f,w=>{a.panel&&w(s)})}m(h),ee(()=>{Q(h,`tab-group ${k(l)??""}`),Q(U,`tab-list ${k(n)??""}`),W(U,"aria-labelledby",H())}),T(t,h),_e()}var Ot=E('<div class="tab-lead"><!></div>'),Et=E('<a><div><!> <div class="tab-label"><!></div></div></a>');function Se(t,e){const a=Le(e),r=oe(e,["children","$$slots","$$events","$$legacy"]),l=oe(r,["selected","controls","active","hover","flex","padding","rounded","spacing"]);ve(e,!1);const n=B(),x=B(),S=B();let d=i(e,"selected",8,!1),R=i(e,"controls",8,""),D=i(e,"active",24,()=>de("active")),I=i(e,"hover",24,()=>de("hover")),z=i(e,"flex",24,()=>de("flex")),G=i(e,"padding",24,()=>de("padding")),$=i(e,"rounded",24,()=>de("rounded")),C=i(e,"spacing",24,()=>de("spacing"));const A="text-center cursor-pointer transition-colors duration-100",H="";function v(){return delete l.class,l}j(()=>(o(d()),o(D()),o(I())),()=>{y(n,d()?D():I())}),j(()=>(o(z()),o(G()),o($()),k(n),o(r)),()=>{y(x,`${A} ${z()} ${G()} ${$()} ${k(n)} ${r.class??""}`)}),j(()=>o(C()),()=>{y(S,`${H} ${C()}`)}),ge(),fe();var c=Et();let L;var p=b(c),h=b(p);{var U=s=>{var w=Ot(),N=b(w);ae(N,e,"lead",{},null),m(w),T(s,w)};te(h,s=>{a.lead&&s(U)})}var u=Y(h,2),f=b(u);ae(f,e,"default",{},null),m(u),m(p),m(c),ee(s=>{L=Ee(c,L,{class:`tab-anchor ${k(x)??""}`,href:r.href,...s,"aria-controls":R(),role:"button","data-testid":"tab-anchor"}),Q(p,`tab-interface ${k(S)??""}`)},[v],ue),O("click",c,function(s){Z.call(this,e,s)}),O("keydown",c,function(s){Z.call(this,e,s)}),O("keyup",c,function(s){Z.call(this,e,s)}),O("keypress",c,function(s){Z.call(this,e,s)}),O("mouseover",c,function(s){Z.call(this,e,s)}),O("mouseleave",c,function(s){Z.call(this,e,s)}),O("focus",c,function(s){Z.call(this,e,s)}),O("blur",c,function(s){Z.call(this,e,s)}),T(t,c),_e()}var Gt=E('<div role="switch" aria-label="Light Switch" tabindex="0"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path></path></svg></div></div>');function Re(t,e){const a=oe(e,["children","$$slots","$$events","$$legacy"]);ve(e,!1);const[r,l]=je(),n=()=>Me(Be,"$modeCurrent",r),x=B(),S=B(),d=B(),R=B(),D=B(),I=B(),z=B();let G=i(e,"title",8,"Toggle light or dark mode."),$=i(e,"bgLight",8,"bg-surface-50"),C=i(e,"bgDark",8,"bg-surface-900"),A=i(e,"fillLight",8,"fill-surface-50"),H=i(e,"fillDark",8,"fill-surface-900"),v=i(e,"width",8,"w-12"),c=i(e,"height",8,"h-6"),L=i(e,"ring",8,"ring-[1px] ring-surface-500/30"),p=i(e,"rounded",8,"rounded-token");const h="transition-all duration-[200ms]",U="cursor-pointer",u="aspect-square scale-[0.8] flex justify-center items-center",f="w-[70%] aspect-square",s={sun:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z",moon:"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"};function w(){ne(Be,!n()),kt(n()),Ne(n())}function N(_){["Enter","Space"].includes(_.code)&&(_.preventDefault(),_.currentTarget.click())}Ae(()=>{"modeCurrent"in localStorage||Ne(yt())}),j(()=>(n(),o($()),o(C())),()=>{y(x,n()===!0?$():C())}),j(()=>(n(),o(C()),o($())),()=>{y(S,n()===!0?C():$())}),j(()=>n(),()=>{y(d,n()===!0?"translate-x-[100%]":"")}),j(()=>(n(),o(A()),o(H())),()=>{y(R,n()===!0?A():H())}),j(()=>(o(v()),o(c()),o(L()),o(p()),k(x),o(a)),()=>{y(D,`${U} ${h} ${v()} ${c()} ${L()} ${p()} ${k(x)} ${a.class??""}`)}),j(()=>(o(c()),o(p()),k(S),k(d)),()=>{y(I,`${u} ${h} ${c()} ${p()} ${k(S)} ${k(d)}`)}),j(()=>k(R),()=>{y(z,`${f} ${k(R)}`)}),ge(),fe();var g=Gt();mt(_=>{var V=me(),K=le(V);St(K,()=>`<script nonce="%sveltekit.nonce%">(${wt.toString()})();<\/script>`),T(_,V)});var P=b(g),M=b(P),J=b(M);m(M),m(P),m(g),ee(()=>{Q(g,`lightswitch-track ${k(D)??""}`),W(g,"aria-checked",n()),W(g,"title",G()),Q(P,`lightswitch-thumb ${k(I)??""}`),He(M,`lightswitch-icon ${k(z)??""}`),W(J,"d",n()?s.sun:s.moon)}),O("click",g,w),O("click",g,function(_){Z.call(this,e,_)}),O("keydown",g,N),O("keydown",g,function(_){Z.call(this,e,_)}),O("keyup",g,function(_){Z.call(this,e,_)}),O("keypress",g,function(_){Z.call(this,e,_)}),T(t,g),_e(),l()}var Ht=E('<a href="/"><strong class="text-xl uppercase">Java Booklet</strong></a>'),Ut=E("<!> <!> <!>",1),qt=E('<span class="badge-icon variant-filled-primary absolute -top-1 -right-1 z-10">✓</span>'),Vt=E('<div class="flex items-center space-x-2 sm:space-x-4 flex-wrap justify-end"><!> <div class="relative"><button class="btn-icon variant-ghost-surface"><!> <!></button></div></div>'),Ft=E('<li><button class="w-full text-left p-2 hover:bg-primary-500/10 rounded">Logout</button></li> <li><div class="flex items-center"><!></div></li>',1),Jt=E('<li><a href="/login" class="w-full block p-2 hover:bg-primary-500/10 rounded">Login</a></li> <li><a href="/register" class="w-full block p-2 hover:bg-primary-500/10 rounded">Register</a></li> <li><div class="flex items-center"><!></div></li>',1),Kt=E('<li><div class="p-2 text-center text-sm opacity-75">Loading...</div></li>'),Wt=E('<div><!></div> <div class="card p-4 w-60 shadow-xl fixed z-[1000]" data-popup="userMenu"><nav class="list-nav"><ul><!></ul></nav></div>',1);function la(t,e){ve(e,!1);const[a,r]=je(),l=()=>Me(n,"$userStore",a),n=ot(null);let x=B(""),S=B("G"),d=B(!1);const R={event:"click",target:"userMenu",placement:"bottom-end"};function D(u){if(!u)return"G";const f=u.split(/[\s-]+/);return f.length===1?u.substring(0,2).toUpperCase():(f[0][0]+f[f.length-1][0]).toUpperCase()}async function I(){try{const u=localStorage.getItem("user");if(u)try{const f=JSON.parse(u);ne(n,f),y(S,D(f.username))}catch(f){console.error("Error parsing localStorage data:",f),localStorage.removeItem("user")}if(typeof window<"u")try{const f=await fetch("/verify-auth",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(console.log("Server response status:",f.status),f.ok){const s=await f.json();console.log("Server auth response:",s),y(d,!0),s.is_authenticated?(ne(n,{id:s.user_id,username:s.username}),y(S,D(s.username)),localStorage.setItem("user",JSON.stringify(l()))):(console.log("Server says: not authenticated"),localStorage.removeItem("user"),ne(n,null),y(S,"G"))}else if(f.status===401){console.log("Auth token expired, attempting refresh...");const s=!1;y(d,!0),s||(console.log("Token refresh failed, logging out..."),localStorage.removeItem("user"),ne(n,null),y(S,"G"))}else console.warn(`Auth check failed with status: ${f.status}`),y(d,!0)}catch(f){console.error("Auth check error:",f)}}catch(u){console.error("Auth check error:",u),y(d,!0)}}Ae(()=>{y(x,window.location.pathname),I(),window.addEventListener("storage",u=>{u.key==="user"&&(console.log("LocalStorage 'user' changed in another tab, updating..."),I())})});function z(u,f){u.preventDefault(),xe(f),y(x,f),setTimeout(I,100)}let G;Ae(()=>(G=setInterval(I,3e5),()=>clearInterval(G)));async function $(){try{const u=await fetch("/logout",{method:"POST",credentials:"include"});localStorage.removeItem("user"),ne(n,null),y(S,"G"),y(d,!0),xe("/login")}catch(u){console.error("Logout error:",u),localStorage.removeItem("user"),ne(n,null),xe("/login")}}j(()=>l(),()=>{l()!==null&&(console.log("UserStore changed:",l()),y(S,D(l().username)))}),ge(),fe();var C=Wt(),A=le(C),H=b(A);Nt(H,{gridColumns:"grid-cols-3",slotDefault:"place-self-center",slotTrail:"place-content-end",$$slots:{lead:(u,f)=>{var s=Ht();O("click",s,w=>z(w,"/")),T(u,s)},trail:(u,f)=>{var s=Vt(),w=b(s);$t(w,{regionList:"flex space-x-1 sm:space-x-2",children:(_,V)=>{var K=Ut(),ie=le(K);const he=ue(()=>k(x)==="/recommendation");Se(ie,{href:"/recommendation",get selected(){return k(he)},$$events:{click:q=>z(q,"/recommendation")},children:(q,pe)=>{we();var be=ke("Brew");T(q,be)},$$slots:{default:!0}});var re=Y(ie,2);const ye=ue(()=>k(x)==="/archive");Se(re,{href:"/archive",get selected(){return k(ye)},$$events:{click:q=>z(q,"/archive")},children:(q,pe)=>{we();var be=ke("Notes");T(q,be)},$$slots:{default:!0}});var X=Y(re,2);const F=ue(()=>k(x)==="/");Se(X,{href:"/",get selected(){return k(F)},$$events:{click:q=>z(q,"/")},children:(q,pe)=>{we();var be=ke("Home");T(q,be)},$$slots:{default:!0}}),T(_,K)},$$slots:{default:!0}});var N=Y(w,2),g=b(N),P=b(g);Dt(P,{get initials(){return k(S)}});var M=Y(P,2);{var J=_=>{var V=qt();T(_,V)};te(M,_=>{l()&&_(J)})}m(g),$e(g,(_,V)=>{var K;return(K=xt)==null?void 0:K(_,V)},()=>R),m(N),m(s),T(u,s)}}}),m(A);var v=Y(A,2),c=b(v),L=b(c),p=b(L);{var h=u=>{var f=Ft(),s=le(f),w=b(s);m(s);var N=Y(s,2),g=b(N),P=b(g);Re(P,{}),m(g),m(N),O("click",w,$),T(u,f)},U=u=>{var f=me(),s=le(f);{var w=g=>{var P=Jt(),M=le(P),J=b(M);m(M);var _=Y(M,2),V=b(_);m(_);var K=Y(_,2),ie=b(K),he=b(ie);Re(he,{}),m(ie),m(K),O("click",J,re=>z(re,"/login")),O("click",V,re=>z(re,"/register")),T(g,P)},N=g=>{var P=Kt();T(g,P)};te(s,g=>{k(d)?g(w):g(N,!1)},!0)}T(u,f)};te(p,u=>{l()?u(h):u(U,!1)})}m(L),m(c),m(v),T(t,C),_e(),r()}export{la as A,$e as a,Q as b,Z as c,St as h,ra as r,W as s};
